---
title: Redis quick start
date: 2021-04-30 18:19:46
categories:
- 弹射起步
tags:
- redis
---


## Nosql 概述

> 单机数据库：

1. 数据量如果太大，一个机器放不下
2. 数据的索引，一个机器内存放不下
3. 访问量，一个服务器承受不了

> Memcached(缓存) + MySQL+ 垂直拆分

网站 80% 的情况都是在读数据，每次都查 DB 就十分慢，采用缓存保证效率

发展过程：优化数据结构和索引 -> 文件缓存(IO) -> Memcached

> 分库分表 + 水平拆分 + MySQL 集群

* ISAM：早期，表锁，效率低
* Innodb: 行所

> 如今，数据量大，变化快，MySQL 不太适用这种场景了

MySQL 也不适合存储比较大的文件，博客，图片。表大，效率低，需要专门的数据库

> 为什么用 NoSQL

用户信息爆发式增长，NoSQL 可以解决上面的问题

NoSQL = Not Only SQL

关系型数据库 = 表 + 行 + 列

泛指非关系型数据库，随着 web2.0 互联网的诞生，传统的关系型数据库很难对付，尤其是超大规模的高并发社区。

很多数据类型，比如个人信息，社交网络，地理位置不需要一个固定格式，不需要过多操作就能横向操作

> 特点

1. 方便扩展
2. 大数据量高性能 (redis 写 8w/s, 读 11w/s, NoSQL 的缓存记录级，是一种细粒度的缓存，性能会比较高)
3. 数据类型是多样型的(不需要事先设计数据库)

> RDBMS Vs NoSQL

RDBMS

* 结构化组织(表/列)
* SQL
* 数据和关系都存在单独的表中
* 数据操作语言，数据定义语言(DSL, DML)
* 严格的一致性

NoSQL

* 不仅仅是SQL
* 没有固定的查询语言
* 存储类型多样(键值，文档，列存储，图形数据-社交关系)
* 最终一致性
* CAP定理和BASE 异地多活
* 高性能，高可用，高可扩

> 3v + 3高

3v: 主要描述问题

1. 海量Volume
2. 多样Variety
3. 实时Velocity

3 高:

1. 高并发
2. 高可扩
3. 高性能

真实情况：NoSQL + RDBMS

## 典型电商网站分析

1. 商品基本信息，名称，价格，商家信息，存关系型数据库
2. 商品描述，评论(文字较多) MongoDB
3. 图片，分布式文件系统 FastDFS, 淘宝 TFS，Google GFS， Hadoop HDFD, 阿里云 OSS
4. 商品关键字，搜索，solr, ES, ISearch
5. 商品热门的波段信息，内存数据库，Redis, Tair, Memcache
6. 商品交易 - 第三方接口

## NoSQL 四大分类

KV键值对:

* 新浪： Redis
* 美团：Redis + Tair
* 阿里，百度：Redis + memocache

文档型数据库(bson)

* MongoDB(一般需要掌握)
  * MongoDB 是一个给予分布式文件存储的数据库，C++ 编写，主要用来处理大量文档
  * MongoDB 是一个介于关系型数据库和非关系型数据库的中间产品

列存储数据库：

* HBase
* 分布式文件系统

图关系数据库：

* 社交网络
* Neo4j

## Redis 入门

Remote Dictionary Server: c，基于内存，可持久化， KV，多语言 API

> 能干嘛

1. 内存存储，可持久化(RDB, AOF)
2. 效率高，可高速缓存
3. 发布订阅系统
4. 地图信息分析
5. 计数器 - 订阅量，计时器