<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/hexo/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hexo/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hexo/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/hexo/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="UgODgWVmvTsdD--vjodDR3tPUZRWM3i7JpHzbYejxUM">

<link rel="stylesheet" href="/hexo/css/main.css">


<link rel="stylesheet" href="/hexo/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/hexo/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="我是张江搬砖小码农, 知识搬运工">
<meta property="og:type" content="website">
<meta property="og:title" content="Jackpot">
<meta property="og:url" content="https://jack-zheng.github.io/hexo/page/6/index.html">
<meta property="og:site_name" content="Jackpot">
<meta property="og:description" content="我是张江搬砖小码农, 知识搬运工">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jack Zheng">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jack-zheng.github.io/hexo/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Jackpot</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/hexo/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jackpot</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-tags">

    <a href="/hexo/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/hexo/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/hexo/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/jack-zheng" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/17/LSSC-shell-something-out/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/17/LSSC-shell-something-out/" class="post-title-link" itemprop="url">牛刀小试</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-17 19:27:05" itemprop="dateCreated datePublished" datetime="2021-05-17T19:27:05+08:00">2021-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>11 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>Man</strong> 帮助文档操作方式</p>
<ul>
<li>ctrl + F或者 Page Down：向下翻页</li>
<li>ctrl + B或者 Page Up：向上翻页</li>
<li>gg到第一行</li>
<li>GG到最后一行</li>
<li>/start：能在整手册中搜索start相关字符，使用n查找下一个，使用N查找上一个</li>
<li>j，k与vi中一样使用，j向下一行，k向上一行</li>
<li>d下翻半页</li>
<li>u上翻半页</li>
<li>h获取man使用帮助</li>
<li>q退出man</li>
</ul>
<h2 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h2><p>以下实验均基于 bas</p>
<ul>
<li>提示符 <code>$</code> 表示普通用户， <code>#</code> 表示 root 用户</li>
<li>shebang: shell 文件首部的，以 <code>#!</code> 开头指定 shell 版本的语句</li>
<li>两种运行方式，终端对话框运行 or 运行脚本文件 <code>bash /path/to/file.script.sh</code></li>
<li>历史记录存储在 <code>.bash_history</code> 文件中</li>
<li>两个 cmd 可以写在同一行，但是需要用 <code>;</code> 隔开， <code>echo a ; echo b</code> 等价于 <code>echo a \n echo b</code></li>
</ul>
<blockquote>
<p>什么是 login shell<br>A login shell is the shell which you get just after logging in to a machine. However, if you open up a shell while logged in to a graphical environment (such as GNOME, KDE, and so on), then it is not a login shell.</p>
</blockquote>
<h2 id="Printing-in-the-terminal"><a href="#Printing-in-the-terminal" class="headerlink" title="Printing in the terminal"></a>Printing in the terminal</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打印，自带结尾换行效果</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Welcome to Bash&quot;</span></span><br><span class="line"><span class="comment"># Welcome to Bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不带引号也可以</span></span><br><span class="line"><span class="built_in">echo</span> Welcome to Bash</span><br><span class="line"><span class="comment"># Welcome to Bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 单引号也可以</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;text in quotes&#x27;</span></span><br><span class="line"><span class="comment"># text in quotes</span></span><br></pre></td></tr></table></figure>

<p>从上面效果看，都能打印，而且结果都一致，但是这几种使用方式还是有区别的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &quot; 中不能以 ！ 结尾, 在 bash 中 ！有特殊含义，表示前一个</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hi !&quot;</span></span><br><span class="line"><span class="comment"># bash: !&quot;: event not found</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用之前命令测试</span></span><br><span class="line"><span class="built_in">echo</span> aaa</span><br><span class="line"><span class="comment"># aaa</span></span><br><span class="line">!<span class="built_in">echo</span></span><br><span class="line"><span class="comment"># echo aaa</span></span><br><span class="line"><span class="comment"># aaa</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是如果 ！ 后面接空格则正常</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hi ! &quot;</span></span><br><span class="line"><span class="comment"># hi !</span></span><br></pre></td></tr></table></figure>

<p>echo 的几种用法的副作用：</p>
<ol>
<li>光杆 echo, 后面不能接 <code>;</code> 不然命令断裂了</li>
<li>单引号 echo, 变量复制不起作用</li>
</ol>
<p>echo 的其他用法：</p>
<ol>
<li><code>echo -n &quot;hi&quot;</code> 使用 <code>-n</code> 取出换行</li>
<li><code>echo -e &quot;1\t2\t3&quot;</code> 使用 <code>-e</code> 打印转义符</li>
</ol>
<p>echo 输出变色：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \e[1;31m 设置字体为红色, \e[0m 重制</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\e[1;31m This is red text \e[0m&quot;</span></span><br><span class="line"><span class="comment"># This is red text</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># \e[1;42m 设置背景为绿色, \e[0m 重制</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\e[1;42m Green Background \e[0m&quot;</span></span><br><span class="line"><span class="comment"># Green Background</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 混合使用也是 OK 的</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\e[1;42m\e[1;31m Green Background \e[0m&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># printf 和 C 语言中用法一致，默认不带换行</span></span><br><span class="line">bash-3.2$ <span class="built_in">printf</span> <span class="string">&quot;hello world&quot;</span></span><br><span class="line">hello worldbash-3.2$</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印示例</span></span><br><span class="line"><span class="built_in">printf</span>  <span class="string">&quot;%-5s %-10s %-4s\n&quot;</span> No Name  Mark</span><br><span class="line"><span class="built_in">printf</span>  <span class="string">&quot;%-5s %-10s %-4.2f\n&quot;</span> 1 Sarath 80.3456</span><br><span class="line"><span class="built_in">printf</span>  <span class="string">&quot;%-5s %-10s %-4.2f\n&quot;</span> 2 James 90.9989</span><br><span class="line"><span class="built_in">printf</span>  <span class="string">&quot;%-5s %-10s %-4.2f\n&quot;</span> 3 Jeff 77.564</span><br><span class="line"><span class="comment"># No    Name       Mark</span></span><br><span class="line"><span class="comment"># 1     Sarath     80.35</span></span><br><span class="line"><span class="comment"># 2     James      91.00</span></span><br><span class="line"><span class="comment"># 3     Jeff       77.56</span></span><br></pre></td></tr></table></figure>

<p>PS: -5, 左对齐，占 5 个位置</p>
<h2 id="Session-3-Playing-with-variables-and-environment-variables"><a href="#Session-3-Playing-with-variables-and-environment-variables" class="headerlink" title="Session 3 Playing with variables and environment variables"></a>Session 3 Playing with variables and environment variables</h2><p>赋值语句 <code>var=value</code>，需要注意的是，<code>var = value</code> 是不对的，后者是等于运算。如果 value 中间没有空格，则直接写，不然需要用引号包裹。当使用 echo 或者 prinf 输出变量时，需要用<strong>双引号</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">name=jack</span><br><span class="line">echo $name # or `echo $&#123;name&#125;`</span><br><span class="line"><span class="meta">#</span><span class="bash"> jack</span></span><br><span class="line"></span><br><span class="line">name2 = jaack</span><br><span class="line"><span class="meta">#</span><span class="bash"> zsh: <span class="built_in">command</span> not found: name2</span></span><br><span class="line"></span><br><span class="line">name=&quot;jack zheng&quot;</span><br><span class="line">echo $&#123;name&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> jack zheng</span></span><br><span class="line"></span><br><span class="line">name=&#x27;jack zheng&#x27;</span><br><span class="line">echo $&#123;name&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> jack zheng</span></span><br><span class="line"></span><br><span class="line">fruit=apple</span><br><span class="line">count=5 </span><br><span class="line">echo &quot;We have $count $&#123;fruit&#125;(s)&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> We have 5 apple(s)</span></span><br><span class="line">echo &#x27;We have $count $&#123;fruit&#125;(s)&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> We have <span class="variable">$count</span> <span class="variable">$&#123;fruit&#125;</span>(s)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输出变量长度</span></span><br><span class="line">length=$&#123;#name&#125;</span><br><span class="line">echo $length</span><br><span class="line"><span class="meta">#</span><span class="bash"> 10 - it<span class="string">&#x27;s the length of &#x27;</span>jack zheng<span class="string">&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示当前的 shell 种类</span></span><br><span class="line">echo $SHELL # or `echo $0`</span><br><span class="line"><span class="meta">#</span><span class="bash"> /bin/zsh</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果运行 script 的用户不是 root，打印提示信息</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意点：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   1. 书上的例子首字母写错了</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   2. <span class="keyword">if</span> [ 之间都有空格的，不然会抛语法错误</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   3. root user 的 UID 为 0</span></span><br><span class="line">if [ $UID -ne 0 ]; then</span><br><span class="line">    echo Non root user. Please run as root.</span><br><span class="line">else</span><br><span class="line">    echo Root user</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改提示符内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以通过修改 .bashrc 中的 PS1 变量来达到该效果，不过我本地用的 zsh 和书上说的略有不同，就不是试了</span></span><br></pre></td></tr></table></figure>

<h2 id="Function-to-prepend-to-environmnet-variables"><a href="#Function-to-prepend-to-environmnet-variables" class="headerlink" title="Function to prepend to environmnet variables"></a>Function to prepend to environmnet variables</h2><p>假设我们安装了新的应用到 <code>/opt/myapp</code>，这个应用包含 <code>bin</code> 和 <code>lib</code> 目录。为了使他生效，我们需要做如下设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/opt/myapp/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/opt/myapp/lib;<span class="variable">$LD_LIBRARY_PATH</span></span><br></pre></td></tr></table></figure>

<p>如果想简化上面的设置的话，我们可以在 <code>.bashrc</code> 里自定义一些函数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">prepend</span></span>() &#123; [ -d <span class="string">&quot;<span class="variable">$2</span>&quot;</span> ] &amp;&amp; <span class="built_in">eval</span> <span class="variable">$1</span>=\&quot;<span class="variable">$2</span><span class="string">&#x27;:&#x27;</span>\$<span class="variable">$1</span>\&quot; &amp;&amp; <span class="built_in">export</span> <span class="variable">$1</span>; &#125;</span><br><span class="line"><span class="comment"># $1=\&quot;$2&#x27;:&#x27;\$$1\&quot; 人话说就是 PATH=&quot;New_Path:$PATH&quot;</span></span><br><span class="line"><span class="comment"># 可以通过 echo $1=\&quot;$2&#x27;:&#x27;\$$1\&quot; 测试</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 之前的命令可以简化为</span></span><br><span class="line">prepend PATH /opt/myapp/bin</span><br><span class="line">prepend LD_LIBRARY_PATH /opt/myapp/lib</span><br></pre></td></tr></table></figure>

<p>但是上面的脚本有瑕疵，当原始 PATH 为 null 时，新生成的 PATH 就会以 <code>:</code> 结果，我们可以改进如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">prepend</span></span>() &#123; [ -d <span class="string">&quot;<span class="variable">$2</span>&quot;</span> ] &amp;&amp; <span class="built_in">eval</span> <span class="variable">$1</span>=\&quot;<span class="variable">$2</span>\$\&#123;<span class="variable">$1</span>:+<span class="string">&#x27;:&#x27;</span>\$<span class="variable">$1</span>\&#125;\&quot; &amp;&amp; <span class="built_in">export</span> <span class="variable">$1</span> ; &#125;</span><br></pre></td></tr></table></figure>

<p>PS: shell 中定义变量的格式 <code>$&#123;parameter:+expression&#125;</code></p>
<h2 id="上例中语法解释"><a href="#上例中语法解释" class="headerlink" title="上例中语法解释"></a>上例中语法解释</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如何定义函数？</span></span><br><span class="line"><span class="comment"># 格式如下，写在 .zshrc 中，source 一下即可调用</span></span><br><span class="line"><span class="function"><span class="title">demoFun</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;This is a function...&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">demoFun   </span><br><span class="line"><span class="comment"># This is a function...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何取得调用时传入的参数？</span></span><br><span class="line"><span class="comment"># 当位数超过 10 时需要用 $&#123;n&#125; 获取参数</span></span><br><span class="line"><span class="comment"># 其他特殊字符表示含义：</span></span><br><span class="line"><span class="comment">#   * $#: 传入参数的个数</span></span><br><span class="line"><span class="comment">#   * $*: 以一个字符串显示所有参数</span></span><br><span class="line"><span class="comment">#   * $@: 同上，但是需要加引号</span></span><br><span class="line"><span class="comment">#   * $$: 脚本运行的当前进程 ID</span></span><br><span class="line"><span class="comment">#   * $!: 后台运行的最后一个进程的 ID</span></span><br><span class="line"><span class="comment">#   * $?: 显示最后命令的退出状态，0 表示没错误，其他值表示有错误</span></span><br><span class="line"><span class="function"><span class="title">funWithParam</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第一个参数为 <span class="variable">$1</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第二个参数为 <span class="variable">$2</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十个参数为 <span class="variable">$10</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十个参数为 <span class="variable">$&#123;10&#125;</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十一个参数为 <span class="variable">$&#123;11&#125;</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;参数总数有 <span class="variable">$#</span> 个!&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;作为一个字符串输出所有参数 $* !&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">funWithParam 1 2 3 4 5 6 7 8 9 34 73</span><br><span class="line"><span class="comment"># 第一个参数为 1 !</span></span><br><span class="line"><span class="comment"># 第二个参数为 2 !</span></span><br><span class="line"><span class="comment"># 第十个参数为 34 !</span></span><br><span class="line"><span class="comment"># 第十个参数为 34 !</span></span><br><span class="line"><span class="comment"># 第十一个参数为 73 !</span></span><br><span class="line"><span class="comment"># 参数总数有 11 个!</span></span><br><span class="line"><span class="comment"># 作为一个字符串输出所有参数 1 2 3 4 5 6 7 8 9 34 73 !</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [] 什么意思？</span></span><br><span class="line"><span class="comment"># shell 中方括号和 Test 等价</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -d 什么意思？</span></span><br><span class="line"><span class="comment"># -d filename 表示是否为目录，但是总感觉用在这里词不达意</span></span><br><span class="line"><span class="comment"># 类似的还有 -eq，判等</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># eval 什么意思？</span></span><br><span class="line"><span class="comment"># eval 如果后面直接跟命令，直接运行，如果命令中包含变量，则计算变量后运行</span></span><br><span class="line"><span class="built_in">set</span> 11 22 33 44</span><br><span class="line"><span class="comment"># 假设我们不知道参数长度，可以如下输出最后一个参数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$#</span></span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$<span class="variable">$#</span>&quot;</span></span><br><span class="line"><span class="comment"># $4</span></span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">echo</span> <span class="string">&quot;\$<span class="variable">$#</span>&quot;</span></span><br><span class="line"><span class="comment"># 44</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后的 \$\&#123;$1:+&#x27;:&#x27;\$$1\&#125; 是什么意思？</span></span><br><span class="line"><span class="comment"># :+ 表示覆盖缺省值</span></span><br><span class="line"><span class="comment"># 只有当var不是空的时候才替换成string, 若var为空时则不替换或者说是替换成变量var的值,即空值</span></span><br><span class="line">COMPANY=<span class="string">&quot;Nightlight Inc.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;COMPANY:+Company has been overridden&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># Company has been overridden</span></span><br><span class="line">COMPANY=</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;COMPANY:+Company has been overridden&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># 打印空行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &amp;&amp; 什么意思</span></span><br><span class="line"><span class="comment"># 逻辑与，前面条件成立才能执行后面的逻辑</span></span><br></pre></td></tr></table></figure>

<h2 id="Math-with-the-shell"><a href="#Math-with-the-shell" class="headerlink" title="Math with the shell"></a>Math with the shell</h2><p>体验下来就一个感觉，bash 下的计算略微繁琐</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 准备变量</span></span><br><span class="line">no1=4; no2=5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 let 关键字</span></span><br><span class="line"><span class="comment"># 整个表达式没有空格，不然报错！！！</span></span><br><span class="line"><span class="built_in">let</span> result=no1+no2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line"><span class="comment"># 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 支持自增/减</span></span><br><span class="line"><span class="built_in">let</span> no1++ <span class="comment"># 也支持写成 no1+=1</span></span><br><span class="line"><span class="built_in">let</span> no2-- <span class="comment"># 也支持写成 no2-=1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$no1</span> <span class="variable">$no2</span></span><br><span class="line"><span class="comment"># 6 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 和 let 功能相同的还有 []</span></span><br><span class="line">result=$[ no1 + no2 ]   <span class="comment"># 等号两边不能有空格，中括号中间无所谓</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line"><span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方括号中间的变量可以带 $，不影响结果</span></span><br><span class="line">result=$[ <span class="variable">$no1</span> + 100 ]</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line"><span class="comment"># 106</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相同的功能还有 (()), 用法和 [] 一致</span></span><br><span class="line">result=$(( <span class="variable">$no1</span> + <span class="number">50</span> ))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line"><span class="comment"># 56</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相同功能的还有 expr</span></span><br><span class="line">result=`expr <span class="variable">$no1</span> + 4`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line"><span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是它们貌似都只能做整数计算</span></span><br><span class="line"><span class="built_in">let</span> result=3+4.0</span><br><span class="line"><span class="comment"># bash: let: result=3+4.0: syntax error: invalid arithmetic operator (error token is &quot;.0&quot;)</span></span><br><span class="line">result=$[expr <span class="variable">$no1</span> + 4.0]</span><br><span class="line"><span class="comment"># bash: expr 6 + 4.0: syntax error in expression (error token is &quot;6 + 4.0&quot;)</span></span><br><span class="line">bash-3.2$ result=$((expr <span class="variable">$no1</span> + <span class="number">4.0</span>))</span><br><span class="line"><span class="comment"># bash: expr 6 + 4.0: syntax error in expression (error token is &quot;6 + 4.0&quot;)</span></span><br><span class="line">result=`expr <span class="variable">$no1</span> + 4.0`</span><br><span class="line"><span class="comment"># expr: not a decimal number: &#x27;4.0&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果想要有精度的计算，可以使用 <code>bc</code>, bc 是basic calculator/bench calculator的简称。其语法类似于C语言，支持加减乘除还有更多复杂的运算。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; bc</span><br><span class="line">1+2</span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line">quit</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4 * 0.56&quot;</span> | bc</span><br><span class="line"><span class="comment"># 2.24</span></span><br><span class="line"></span><br><span class="line">result=`<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$no</span> * 1.5&quot;</span> | bc`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line"><span class="comment"># 81.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以指定精确的位数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;scale=2;3/8&quot;</span> | bc</span><br><span class="line"><span class="comment"># .37</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以做进制转化, 而且必须先设置 obase 在设置 ibase</span></span><br><span class="line">no=100</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;obase=2;<span class="variable">$no</span>&quot;</span> | bc</span><br><span class="line"><span class="comment"># 1100100</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;obase=10;ibase=2;1100100&quot;</span> | bc</span><br><span class="line">100</span><br><span class="line"></span><br><span class="line"><span class="comment"># echo 也可以达到进制转化的效果，不过只能转成 10 进制</span></span><br><span class="line"><span class="built_in">echo</span> $[8<span class="comment">#11] # 效果等同与 $((8#11))</span></span><br><span class="line"><span class="comment"># 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中也有自带的函数，比如次方和开方</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;10^2&quot;</span> | bc</span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;sqrt(100)&quot;</span> | bc</span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>man page 说明如下:<br>There are four special variables, scale, ibase, obase, and last. scale defines how some operations use digits after the decimal point. The default value of scale is 0.<br>ibase and obase define the conversion base for input and output numbers. The default for both input and output is base 10.<br>last (an extension) is a variable that has the value of the last printed number. These will be discussed in further detail where appropriate.<br>All of these variables may have values assigned to them as well as used in expressions.</p>
</blockquote>
<h2 id="Playing-with-file-descriptors-and-redirection"><a href="#Playing-with-file-descriptors-and-redirection" class="headerlink" title="Playing with file descriptors and redirection"></a>Playing with file descriptors and redirection</h2><p>文件描述符：</p>
<ul>
<li>0: stdin</li>
<li>1: stdout</li>
<li>2: stderr</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基操，输入到文件，如果原来有值，会覆盖</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is a sample text 1&quot;</span> &gt; tmp.txt</span><br><span class="line">ls</span><br><span class="line"><span class="comment"># tmp.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># append 内容</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is a sample text 2&quot;</span> &gt;&gt; tmp.txt</span><br><span class="line">cat tmp.txt</span><br><span class="line"><span class="comment"># This is a sample text 1</span></span><br><span class="line"><span class="comment"># This is a sample text 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重定向错误信息</span></span><br><span class="line">ls +</span><br><span class="line"><span class="comment"># ls: +: No such file or directory</span></span><br><span class="line"><span class="comment"># 打印命令返回值，非 0 都是失败</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 尝试将 err 导入文件</span></span><br><span class="line">ls + &gt; out.txt</span><br><span class="line"><span class="comment"># ls: +: No such file or directory</span></span><br><span class="line">cat out.txt</span><br><span class="line"><span class="comment"># 无内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># stderr 标识符 2，所以 2&gt; 表示把错误信息导入到某个流处理的意思</span></span><br><span class="line">ls + 2&gt; out.txt</span><br><span class="line">cat out.txt </span><br><span class="line"><span class="comment"># ls: +: No such file or directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 还可以分别指定流出口</span></span><br><span class="line">cmd 2&gt;stderr.txt 1&gt;stdout.txt</span><br><span class="line">cat stderr.txt </span><br><span class="line"><span class="comment"># bash: cmd: command not found</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将标准输出和错误信息一起写入文件</span></span><br><span class="line">cmd &gt; out.txt 2&gt;&amp;1</span><br><span class="line"><span class="comment"># 他还有一个简写方式</span></span><br><span class="line">cmd &amp;&gt; out.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试 /dev/null</span></span><br><span class="line"><span class="comment"># 这个测试感觉上不怎么贴切，但是，它用来生产 err 的方式还是很可以的</span></span><br><span class="line"><span class="comment"># 测试描述：生产三个文件，将其中一个权限变为 000, cat 这三个文件就会抛异常</span></span><br><span class="line"><span class="built_in">echo</span> a1 &gt; a1; cp a1 a2; cp a1 a3; chmod 000 a1;</span><br><span class="line">cat a* 2&gt; err.txt</span><br><span class="line"><span class="comment"># a1</span></span><br><span class="line"><span class="comment"># a1</span></span><br><span class="line">cat err.txt</span><br><span class="line"><span class="comment"># cat: a1: Permission denied</span></span><br><span class="line"><span class="comment"># 将 err 导向 /dev/null 则没有输出</span></span><br><span class="line">cmd 2&gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># tee 将输出写入文件的同时，给一份到 stdout</span></span><br><span class="line"><span class="comment"># 默认情况下 tee 会覆盖原文件，用 tee -a 可以达到 append 的效果</span></span><br><span class="line">cat a* | tee out.txt | cat -n</span><br><span class="line"><span class="comment"># cat: a1: Permission denied</span></span><br><span class="line"><span class="comment">#      1    a1</span></span><br><span class="line"><span class="comment">#      2    a1</span></span><br><span class="line">cat out.txt</span><br><span class="line"><span class="comment"># a1</span></span><br><span class="line"><span class="comment"># a1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tee 后接多个 file，内容都是重复的</span></span><br><span class="line"><span class="built_in">echo</span> aaa | tee f1 f2</span><br><span class="line">cat f1 f2</span><br><span class="line"><span class="comment"># aaa</span></span><br><span class="line"><span class="comment"># aaa</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># `-` 代表标准输入, </span></span><br><span class="line"><span class="built_in">echo</span> who is this | tee -</span><br><span class="line"><span class="comment"># who is this</span></span><br></pre></td></tr></table></figure>

<p><code>&gt;</code> Vs <code>&gt;&gt;</code>: 前者是覆盖，后者是续接</p>
<blockquote>
<p>./dev/null is a special device file where any data received by the file is discarded. The null device is often known as a black hole as all the data that goes into it is lost forever.<br>/dev/null 是一个特殊的设备，可以将它看作一个黑洞，所有进去的东西都没了 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 终端多行输入</span></span><br><span class="line">cat &lt;&lt; EOF &gt; log.txt</span><br><span class="line">LOG FILE HEADER</span><br><span class="line">This is a <span class="built_in">test</span> <span class="built_in">log</span> file</span><br><span class="line">Function: System statistics</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat log.txt</span><br><span class="line"><span class="comment"># LOG FILE HEADER</span></span><br><span class="line"><span class="comment"># This is a test log file</span></span><br><span class="line"><span class="comment"># Function: System statistics</span></span><br></pre></td></tr></table></figure>

<p>自定义文件描述符</p>
<p>可用模式：Read mode, Write with truncate mode, Write with append mode</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># `&lt;` 用于将文件导向 stdin</span></span><br><span class="line"><span class="built_in">echo</span> this is a <span class="built_in">test</span> line &gt; input.txt</span><br><span class="line"><span class="built_in">exec</span> 3&lt;input.txt</span><br><span class="line">cat &lt;&amp;3</span><br><span class="line"><span class="comment"># this is a test line</span></span><br><span class="line">cat &lt;&amp;3</span><br><span class="line"><span class="comment"># 没有输出，这种方式不能复用，需要重新赋值</span></span><br></pre></td></tr></table></figure>

<p>为写操作自定义文件描述符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span> 4&gt; output.txt</span><br><span class="line"><span class="built_in">echo</span> newline &gt;&amp;4</span><br><span class="line">cat output.txt</span><br><span class="line"><span class="comment"># newline</span></span><br><span class="line"><span class="comment"># 书上说这种方式再次调用会覆盖的才对，我这边测试是以 append 方式附加的</span></span><br><span class="line"><span class="built_in">echo</span> aaa &gt;&amp;4</span><br><span class="line">cat output.txt</span><br><span class="line"><span class="comment"># newline</span></span><br><span class="line"><span class="comment"># aaa</span></span><br></pre></td></tr></table></figure>

<p>为 append 模式的 write 定义文件描述符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span> 5&gt;&gt;out.txt</span><br><span class="line"><span class="built_in">echo</span> appended line &gt;&amp;5</span><br><span class="line">cat out.txt</span><br><span class="line"><span class="comment"># appended line</span></span><br><span class="line"><span class="built_in">echo</span> appended line2 &gt;&amp;5</span><br><span class="line">cat out.txt</span><br><span class="line"><span class="comment"># appended line</span></span><br><span class="line"><span class="comment"># appended line2</span></span><br></pre></td></tr></table></figure>

<p>PS: <code>&gt;&gt;</code> 自带会车，如果不想要，需要用可以用 <code>echo -n</code> 或者 <code>printf &quot;%s&quot; &quot;$(value)&quot;</code></p>
<h2 id="Arrays-and-associative-arrays"><a href="#Arrays-and-associative-arrays" class="headerlink" title="Arrays and associative arrays"></a>Arrays and associative arrays</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数组声明及调用</span></span><br><span class="line">array_var=(1 2 3 4 5 6)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var[0]&#125;</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 输出全部</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var[*]&#125;</span>  <span class="comment"># or echo $&#123;array_var[@]&#125;</span></span><br><span class="line"><span class="comment"># 1 2 3 4 5 6</span></span><br><span class="line"><span class="comment"># 打印长度</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array_var[*]&#125;</span></span><br><span class="line"><span class="comment"># 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 index 下标</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!array_var[*]&#125;</span> <span class="comment"># or echo $&#123;!array_var[@]&#125;</span></span><br><span class="line"><span class="comment"># 0 1 2 3 4 5</span></span><br></pre></td></tr></table></figure>

<p>Associative arrays: 关系型数组，普通数组只能存整形，但是关系型数组可以存储混合的，任何 text 格式的数据。这种数据类型是在 Bash 4.0 引入的</p>
<p>Mac 升级 Bash 版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前版本</span></span><br><span class="line">bash --version</span><br><span class="line"><span class="comment"># GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin20)</span></span><br><span class="line"><span class="comment"># Copyright (C) 2007 Free Software Foundation, Inc.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 小八卦：Bash 在 3.2 后的版本改了协议，开始使用 GPLv3 许可，Apple 不想支持，所以 Mac 上默认 Bash 只到 3.2 为止</span></span><br><span class="line"><span class="comment"># 新的 Bash 有很强的 tab 补全，值得期待</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看以安装 bash 路径</span></span><br><span class="line"><span class="built_in">which</span> bash</span><br><span class="line"><span class="comment"># /bin/bash</span></span><br><span class="line"></span><br><span class="line">brew install bash</span><br><span class="line"><span class="comment"># Updating Homebrew...</span></span><br><span class="line"><span class="comment"># ==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bash-5.1.8.big_sur.bottle.tar.gz</span></span><br><span class="line"><span class="comment"># ######################################################################## 100.0%</span></span><br><span class="line"><span class="comment"># ==&gt; Pouring bash-5.1.8.big_sur.bottle.tar.gz</span></span><br><span class="line"><span class="comment"># /usr/local/Cellar/bash/5.1.8: 157 files, 10.9MB</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">which</span> bash</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/bash</span><br><span class="line"></span><br><span class="line">bash --version</span><br><span class="line"><span class="comment"># GNU bash, version 5.1.8(1)-release (x86_64-apple-darwin20.3.0)</span></span><br><span class="line"><span class="comment"># Copyright (C) 2020 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="comment"># License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This is free software; you are free to change and redistribute it.</span></span><br><span class="line"><span class="comment"># There is NO WARRANTY, to the extent permitted by law.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 安装结束</span></span><br></pre></td></tr></table></figure>

<p>Associative arrays 使用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -A fruits_value</span><br><span class="line">fruits_value=([apple]=<span class="string">&#x27;100 dollars&#x27;</span> [orange]=<span class="string">&#x27;150 dollars&#x27;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Apple costs <span class="variable">$&#123;fruits_value[apple]&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># Apple costs 100 dollars</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出下标，或者索引更贴切</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!fruits_value[*]&#125;</span></span><br><span class="line"><span class="comment"># orange apple</span></span><br></pre></td></tr></table></figure>

<p>PS: 感觉被骗了，这 TM 叫数组？！！命名就是字典嘛</p>
<h2 id="Visiting-aliases"><a href="#Visiting-aliases" class="headerlink" title="Visiting aliases"></a>Visiting aliases</h2><p>alias: 将很长的命令用一个简写来代替， 声明形式 <code>alias new_command=&#39;command sequence&#39;</code>, 例如 <code>alias install=&#39;sudo apt-get install&#39;</code></p>
<p>终端声明的 alias 是零时的，重启终端后失效，可以将其写入 rc 文件 <code>echo &#39;alias cmd=&quot;command seq&quot;&#39; &gt;&gt; ~/.bashrc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示所有可用的别名</span></span><br><span class="line"><span class="built_in">alias</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新定义 rm 行为，删除文件时将它备份</span></span><br><span class="line"><span class="comment"># 测试失败。。。</span></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">&#x27;cp $@ ~/backup &amp;&amp; rm $@&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这应该就是持续失败的原因，参数为止调换了</span></span><br><span class="line"><span class="comment"># 搜了下好像每有类似的问题，难道我系统坏了？？ 在 docker 容器中可以重现这个错误</span></span><br><span class="line"><span class="built_in">alias</span> mycp=<span class="string">&#x27;echo &quot;cp $@ ~/backup&quot;&#x27;</span></span><br><span class="line">mycp aaa.txt</span><br><span class="line"><span class="comment"># cp  ~/backup aaa.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 经过多方查证，作者这里的脚本写的有问题。按官方的原画，alias 是不支持传入参数的(补贴切)</span></span><br><span class="line"><span class="comment"># 这里可以用函数代替，在 alias 里面定义函数格式和外面不一样</span></span><br><span class="line"><span class="built_in">alias</span> mycp=<span class="string">&#x27;function _mycp() &#123; echo &quot;aaa $@ bbb&quot;; &#125;;_mycp&#x27;</span></span><br><span class="line">mycp xxx</span><br><span class="line"><span class="comment"># aaa xxx bbb</span></span><br><span class="line"><span class="built_in">alias</span> mycp=<span class="string">&#x27;function _mycp() &#123; echo &quot;aaa $1 bbb $2 ccc&quot;; &#125;;_mycp&#x27;</span></span><br><span class="line">mycp xxx yyy</span><br><span class="line"><span class="comment"># aaa xxx bbb yyy ccc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PS: 另外，如果只需要在末尾添加参数的话，alias 还是可以做到的</span></span><br><span class="line"><span class="built_in">alias</span> myls=<span class="string">&#x27;ls -al $@&#x27;</span> <span class="comment"># 或者 alias myls=&#x27;ls -al&#x27;</span></span><br><span class="line">myls ~/backup</span><br><span class="line"><span class="comment"># total 0</span></span><br><span class="line"><span class="comment"># drwxr-xr-x   2 i306454  staff    64 May 20 20:25 .</span></span><br><span class="line"><span class="comment"># drwxr-xr-x+ 76 i306454  staff  2432 May 21 13:05 ..</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 宗上所属，定制的 rm 应该写成如下形式</span></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">&#x27;function _rm() &#123; cp $@ ~/backup &amp;&amp; rm $@;  &#125;; _rm&#x27;</span></span><br><span class="line">rm java_error_in_idea_12605.log</span><br><span class="line">ls ./backup</span><br><span class="line"><span class="comment"># java_error_in_idea_12605.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># disable alias, 前面加一个反斜杠</span></span><br><span class="line">\<span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示定义的 alias</span></span><br><span class="line"><span class="built_in">alias</span> rm</span><br><span class="line"><span class="comment"># alias rm=&#x27;cp $@ ~/backup &amp;&amp; rm $@&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="built_in">unalias</span> rm</span><br><span class="line"><span class="built_in">alias</span> rm</span><br><span class="line"><span class="comment"># bash: alias: rm: not found</span></span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://www.gnu.org/software/bash/manual/html_node/Aliases.html">Gun - Alias</a></li>
</ul>
<blockquote>
<p>There is no mechanism for using arguments in the replacement text, as in csh. If arguments are needed, a shell function should be used (see Shell Functions).</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/17/Java-base64-encode-and-decode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/17/Java-base64-encode-and-decode/" class="post-title-link" itemprop="url">Java 中实现 base64 编码/解码</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-17 18:56:05" itemprop="dateCreated datePublished" datetime="2021-05-17T18:56:05+08:00">2021-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>466</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Java util 包中自带了 base 64 的编码/解码方法，示例如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Base64Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String origin = <span class="string">&quot;HelloWorld&quot;</span>;</span><br><span class="line">        String encodeRet = Base64.getEncoder().encodeToString(origin.getBytes());</span><br><span class="line">        System.out.println(<span class="string">&quot;Encode result: &quot;</span> + encodeRet);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Decode result: &quot;</span> + <span class="keyword">new</span> String(Base64.getDecoder().decode(encodeRet)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode result: SGVsbG9Xb3JsZA==</span></span><br><span class="line"><span class="comment">// Decode result: HelloWorld</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/17/Shell-customized-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/17/Shell-customized-command/" class="post-title-link" itemprop="url">定制 Shell 脚本</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-17 12:24:54" itemprop="dateCreated datePublished" datetime="2021-05-17T12:24:54+08:00">2021-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="定制-git-pull"><a href="#定制-git-pull" class="headerlink" title="定制 git pull"></a>定制 git pull</h2><p>git pull 算是开发时经常用到的一个命令了，但是更新代码之后，时常会遇到最新版本的代码不 work 的情况。由此，打算对 pull 命令做一个优化，每次 pull 的时候，将当前 repo 的信息写到历史记录中，类似 <code>.zsh_history</code> 的功能。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> git &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;\$@: &quot;</span> <span class="variable">$@</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;\$1: &quot;</span> <span class="variable">$1</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;\$2: &quot;</span> <span class="variable">$2</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="built_in">command</span> git <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> git &#123;</span><br><span class="line">  <span class="comment"># use wild card match, so use </span></span><br><span class="line">  <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;pull&quot;</span> &amp;&amp; <span class="string">&quot;<span class="variable">$@</span>&quot;</span> != *<span class="string">&quot;--help&quot;</span>* ]]; <span class="keyword">then</span></span><br><span class="line">    updateinfo=$(<span class="built_in">command</span> git pull | grep Updating)</span><br><span class="line">    <span class="keyword">if</span> [[ -z <span class="variable">$updateinfo</span> ]]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;Skip recording pull history...&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;Recording pull history...&quot;</span></span><br><span class="line">      <span class="comment"># write process date time</span></span><br><span class="line">      <span class="built_in">printf</span> <span class="string">&quot;%s  &quot;</span> <span class="string">&quot;<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>&quot;</span> &gt;&gt; ~/.git_pull.history</span><br><span class="line">      <span class="comment"># write current version for recover</span></span><br><span class="line">      <span class="built_in">printf</span> <span class="string">&quot;%s  &quot;</span> <span class="string">&quot;<span class="variable">$updateinfo</span>&quot;</span>  &gt;&gt; ~/.git_pull.history</span><br><span class="line">      <span class="comment"># write repo name</span></span><br><span class="line">      <span class="built_in">printf</span> <span class="string">&quot;%s\n&quot;</span> <span class="string">&quot;<span class="subst">$(command git config --get remote.origin.url | cut -d &#x27;/&#x27; -f 2)</span>&quot;</span>  &gt;&gt; ~/.git_pull.history</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">command</span> git <span class="string">&quot;<span class="variable">$@</span>&quot;</span>    <span class="comment"># command 用于调用外部命令</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PS: 为了重复测试脚本，可以使用 <code>git reset --hard xxx</code> 回退版本，再次测试 pull</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3538774/is-it-possible-to-override-git-command-by-git-alias">Stackoverflow</a></li>
</ul>
<h2 id="过滤文件"><a href="#过滤文件" class="headerlink" title="过滤文件"></a>过滤文件</h2><p>任务描述：</p>
<p>有一个 git repo 存储了所有的测试文件(java 格式)，已知需要筛选的文件列表，筛选出所有文件中包含 ‘DB’ (忽略大小写)的文件。并列出包含关键字的列，以便人工删选。</p>
<p>原始文件名列表格式如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">results</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">testcase</span> <span class="attr">external_id</span>=<span class="string">&#x27;PLT#-123456950&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span>&gt;</span>p<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">notes</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">testcase</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">results</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用编辑器的快捷功能将 <code>#-</code> 去掉</p>
<p>PS: 查询一下 sed, awk 和内置的字符串处理方式</p>
<p>repo 中文件名格式如下：PLT123457725UTF8ExportTemplateUserRecordWithUTF8UserImportAndShownCorrectEncoding</p>
<p>使用 find + grep 删选哪些文件包含 db 操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find . -iname &#x27;PLT123457726*.java&#x27; -exec grep -i &quot;dbUtil\|DB&quot; &#123;&#125; \;</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&quot;Priorities.P1&quot;</span>, <span class="string">&quot;DBType.Oracle&quot;</span>, <span class="string">&quot;all&quot;</span>, <span class="string">&quot;TestType.Regression&quot;</span>, <span class="string">&quot;systemUltra&quot;</span>, <span class="string">&quot;systemv12&quot;</span>,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> String ssn = dbUtil.getSingleUserFieldValueByUserIdFromSMUserInfoTable(PLT123457670, SSN);</span></span><br><span class="line"></span><br><span class="line">find . -iname &#x27;PLT123457726*.java&#x27; -exec grep -i &quot;dbUtil\|db&quot; &#123;&#125; \; | grep -v &#x27;DBType&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> String ssn = dbUtil.getSingleUserFieldValueByUserIdFromSMUserInfoTable(PLT123457670, SSN);</span></span><br></pre></td></tr></table></figure>

<p>将文件中的 case name 删选出来 <code>grep -E -o &#39;PLT.*[0-9]+&#39; bulk.xml &gt;&gt; bulk2.xml</code></p>
<p>遍历每一行，做 query</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">file=&quot;./bulk2.xml&quot;</span><br><span class="line">while IFS= read line</span><br><span class="line"></span><br><span class="line">do</span><br><span class="line">    echo &quot;------------- start -------------&quot;</span><br><span class="line">    # write file name to file</span><br><span class="line">    find . -iname &quot;$line*.java&quot; -exec basename &#123;&#125; \;</span><br><span class="line">    echo &#x27;------------- match start -------------&#x27;</span><br><span class="line">    # write matched line to file</span><br><span class="line">    find . -iname &quot;$line*.java&quot; -exec grep -i &quot;dbUtil\|db&quot; &#123;&#125; \; | grep -v &quot;DBType&quot;</span><br><span class="line">    echo &#x27;------------- match end -------------&#x27;</span><br><span class="line">done &lt;&quot;$file&quot;</span><br></pre></td></tr></table></figure>

<p>PS: 由于技术手段的缺失，很多函数我都不清楚怎么调用，对 shell 还是很不熟悉，需要更多的实践练习</p>
<h2 id="ZSH-history-实现机制"><a href="#ZSH-history-实现机制" class="headerlink" title="ZSH history 实现机制"></a>ZSH history 实现机制</h2><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li>shell 文件里面写 <code>echo -n &#39;,&#39;</code> 会把 <code>-n</code> 也写进去？</li>
<li>因为每次执行都会扫一遍 repo，所以想能不能建立一个 name-context map 到内存然后扫描</li>
<li>以上面的 idea 为基础，能不能实时监测 shell 运行时的内存消耗</li>
<li>read/write to file in shell</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/11/Quick-start-cucumber/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/11/Quick-start-cucumber/" class="post-title-link" itemprop="url">Cucumber 弹射起步</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-11 15:39:11" itemprop="dateCreated datePublished" datetime="2021-05-11T15:39:11+08:00">2021-05-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/%E5%BC%B9%E5%B0%84%E8%B5%B7%E6%AD%A5/" itemprop="url" rel="index">
                    <span itemprop="name">弹射起步</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Scenario-Outline"><a href="#Scenario-Outline" class="headerlink" title="Scenario Outline"></a>Scenario Outline</h2><p>通过这个关键字，我们可以进行一组数据的测试，共能上类似于 TestNG 的 dataProvider</p>
<p>Scenario Outline 需要和 Examples 搭配使用，写了前者，IDEA 会给提示的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Feature: user creation related tests</span><br><span class="line"></span><br><span class="line">  Scenario Outline: Negative scenario, create user should be fail if field miss in body</span><br><span class="line">    When call REST API to create user and field miss &lt;fieldName&gt; in body</span><br><span class="line">    Then user should create failure, err msg contains &lt;fieldInMsg&gt; show in response</span><br><span class="line">    Examples:</span><br><span class="line">      | fieldName           | fieldInMsg           |</span><br><span class="line">      | provisionerId       | Provisioner ID       |</span><br><span class="line">      | provisionerName     | Provisioner name     |</span><br><span class="line">      | provisionerPassword | Provisioner password |</span><br><span class="line">      | provisionerEmail    | Provisioner email    |</span><br></pre></td></tr></table></figure>

<p>对应的 Java 代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateUserImpl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@When(&quot;call REST API to create user and field miss &#123;&#125; in body&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callRESTAPIToCreateProvisionerAndFieldMissFieldNameInBody</span><span class="params">(String fieldName)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;fileName: &quot;</span> + fieldName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Then(&quot;user should create failure, err msg contains &#123;&#125; show in response&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">provisionerShouldCreateFailureErrMsgContainsFieldInMsgShowInResponse</span><span class="params">(String fieldInMsg)</span> </span>&#123;</span><br><span class="line">        String errMsg = fieldInMsg + <span class="string">&quot;can not be null.&quot;</span>;</span><br><span class="line">        System.out.println(errMsg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个 scenario 会运行 4 遍，每一行测试一次</p>
<h2 id="DataTable"><a href="#DataTable" class="headerlink" title="DataTable"></a>DataTable</h2><p>和上面的概念很类似的还有一个叫 DataTable 的概念，他的作用是在一个 Step 中创建多组数据</p>
<p>格式上的区别：DataTable 是不需要 table header 的， 而且不需要 Examples 关键字，在 annotation 里面也不需要占位符</p>
<figure class="highlight feature"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Scenario</span>: Show my fruits</span><br><span class="line">    <span class="keyword">When</span> I have kinds of fruits</span><br><span class="line">        |<span class="string"> Apple     </span>|</span><br><span class="line">        |<span class="string"> Banana    </span>|</span><br><span class="line">    <span class="keyword">Then</span> show them</span><br></pre></td></tr></table></figure>

<p>java 实现代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@When(&quot;I have kinds of fruits&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iHaveKindsOfFruits</span><span class="params">(DataTable dataTable)</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; list = dataTable.asList();</span><br><span class="line">    System.out.println(Arrays.toString(list.toArray()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Then(&quot;show them&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showThem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/11/What-is-POSIX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/11/What-is-POSIX/" class="post-title-link" itemprop="url">What is POSIX</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-11 11:34:46" itemprop="dateCreated datePublished" datetime="2021-05-11T11:34:46+08:00">2021-05-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/What/" itemprop="url" rel="index">
                    <span itemprop="name">What</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>498</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>从知乎上扒来的通俗解释，我觉得很形象</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POSIX是Unix的标准。当年最早的Unix，源代码流传出去了，加上早期的Unix不够完善，于是之后出现了好些独立开发的与Unix基本兼容但又不完全兼容的OS，通称Unix-like OS。局面非常混乱，为了提高兼容性和应用程序的可移植性，标准化Unix-like OS，提出了大家都应该遵守的POSIX标准。后来，Unix这个名字成为了商标，只有花钱进行POSIX标准兼容性测试并通过了的OS，才能称为Unix，其余的OS，最多称为Unix-like OS或者*nix OS。Windows从WinNT开始就有兼容POSIX的考虑。这是因为当年在要求严格的领域，Unix地位比Windows高。为了把Unix用户拉到Windows阵营，搞的。现在情况当然有变化，与当年大不相同了。现在最新的Win10对 Linux/POSIX 支持好，则是因为Linux已经统治了廉价服务器市场。为了提高Windows的竞争力搞的。</span><br><span class="line"></span><br><span class="line">作者：匿名用户</span><br><span class="line">链接：https://www.zhihu.com/question/21048638/answer/148137115</span><br><span class="line">来源：知乎</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/11/Regex-test-in-terminal/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/11/Regex-test-in-terminal/" class="post-title-link" itemprop="url">Regex test in terminal</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-11 11:03:55" itemprop="dateCreated datePublished" datetime="2021-05-11T11:03:55+08:00">2021-05-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/regex/" itemprop="url" rel="index">
                    <span itemprop="name">regex</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>终端如何测试一个正则表达式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;aaabbbccc&#x27;</span> | grep -E bc       <span class="comment"># bc 会被标红</span></span><br><span class="line"><span class="comment"># aaabbbccc</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;aaabbbccc&#x27;</span> | grep -E -o bc    <span class="comment"># 只输出匹配的字段</span></span><br><span class="line"><span class="comment"># bc</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a1b a2b acb&#x27;</span> | grep -E -o <span class="string">&#x27;a[^0-9]b&#x27;</span>      <span class="comment"># 当方括号中有 ^ 时，表示除外的意思</span></span><br><span class="line"><span class="comment"># acb</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a1b a2b acb&#x27;</span> | grep -G <span class="string">&#x27;a\w+&#x27;</span>     <span class="comment"># 使用 basic regex 匹配的时候没有适配的结果</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a1b a2b acb&#x27;</span> | grep -G <span class="string">&#x27;a\w\+&#x27;</span>    <span class="comment"># 需要在 &#x27;+&#x27; 的前面也添加转义符才能生效</span></span><br></pre></td></tr></table></figure>

<h2 id="BRE-ERE"><a href="#BRE-ERE" class="headerlink" title="BRE ERE"></a>BRE ERE</h2><p><code>man grep</code> 可以看到它支持的一些可选正则模式, 这几种模式有什么区别？</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-E, --extended-regexp     PATTERN is an extended regular expression (ERE)</span><br><span class="line">-G, --basic-regexp        PATTERN is a basic regular expression (BRE)</span><br><span class="line">-P, --perl-regexp         PATTERN is a Perl regular expression</span><br><span class="line">-e, --regexp=PATTERN      use PATTERN for matching</span><br></pre></td></tr></table></figure>

<blockquote>
<p>In GNU sed, the only difference between basic and extended regular expressions is in the behavior of a few special characters: ‘?’, ‘+’, parentheses(‘()’), braces(‘{}’), and ‘|’.</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Type</th>
<th align="center">Desc</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BRE</td>
<td align="center">character like () {} + ? | need use escape character</td>
</tr>
<tr>
<td align="center">ERE</td>
<td align="center">no need to use escape caharcter before + ? ( ) { } |</td>
</tr>
<tr>
<td align="center">PRE</td>
<td align="center">same as ERE, and add other func</td>
</tr>
</tbody></table>
<p>BRE、ERE可以使用 POSIX 字符集来操作</p>
<p>使用支持<br>grep<br>支持BRE,通过参数控制,默认BRE, -P开启PRE, -E开启ERE</p>
<p>sed<br>支持BRE,默认BRE,-r开启ERE</p>
<p>awk<br>支持ERE,默认ERE。</p>
<h2 id="其他一些知识点"><a href="#其他一些知识点" class="headerlink" title="其他一些知识点"></a>其他一些知识点</h2><p>元字符(Metacharacter), 指SHELL直译器或正则表达式（regex）引擎等计算机程序中具有特殊意义的字符。</p>
<p>在 POSIX 扩展正则表达式里,定义了14个元字符,它们被作为一般的字符使用时,必须要通过 “转义”（前面加一个反斜杠”&quot;）来去除他们本身的特殊意义,这些元字符包括：</p>
<p>开和闭方括号：”[“和”]”<br>反斜线：”&quot;<br>脱字符：”^”<br>美元符号：”$”<br>句号/点：”.”<br>竖线/管道符：”|”<br>问号：”?”<br>星号：”*”<br>加号：”+”<br>开和闭 花括号：”{“和”}”<br>开和闭 小括号：”(“和”)”</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/10/Algorithm-radix-sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/10/Algorithm-radix-sort/" class="post-title-link" itemprop="url">基数排序</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-10 18:52:52" itemprop="dateCreated datePublished" datetime="2021-05-10T18:52:52+08:00">2021-05-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>算法描述：</p>
<ol>
<li>取得数组中的最大数，并取得位数</li>
<li>arr为原始数组，从最低位开始取每个位组成radix数组</li>
<li>对radix进行计数排序（利用计数排序适用于小范围数的特点）</li>
</ol>
<p>稳定，时间复杂度 O(d*2n)</p>
<h2 id="课外小知识"><a href="#课外小知识" class="headerlink" title="课外小知识"></a>课外小知识</h2><p>java 中的 n 次方计算</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Math.pow(<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line">System.out.println(Math.pow(<span class="number">3</span>,<span class="number">2</span>));</span><br><span class="line"><span class="comment">// 8.0</span></span><br><span class="line"><span class="comment">// 9.0</span></span><br></pre></td></tr></table></figure>

<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RadixSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">67</span>, <span class="number">75</span>, <span class="number">61</span>, <span class="number">18</span>, <span class="number">60</span>, <span class="number">30</span>, <span class="number">90</span>, <span class="number">19</span>, <span class="number">89</span>, <span class="number">35</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">        <span class="keyword">int</span> max = getMaxDigit(arr);</span><br><span class="line">        System.out.println(<span class="string">&quot;Max: &quot;</span> + max);</span><br><span class="line">        <span class="keyword">int</span>[] ret = radixSort(arr, max);</span><br><span class="line">        System.out.println(Arrays.toString(ret));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] radixSort(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> length) &#123;</span><br><span class="line">        <span class="keyword">int</span> mod = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> dev = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</span><br><span class="line">        <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++, mod *= <span class="number">10</span>, dev *= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> division = (<span class="keyword">int</span>) Math.pow(<span class="number">10</span>, i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k : arr) &#123;</span><br><span class="line">                <span class="keyword">int</span> remainder = k / division % <span class="number">10</span>;</span><br><span class="line">                bucket[remainder]++;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;bucket: &quot;</span> + Arrays.toString(bucket));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; bucket.length; j++) &#123;</span><br><span class="line">                bucket[j] = bucket[j] + bucket[j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;bucket: &quot;</span> + Arrays.toString(bucket));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = arr.length - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123; <span class="comment">// 等于 0 时也要计算</span></span><br><span class="line">                System.out.println(<span class="string">&quot;arr[j]: &quot;</span> + arr[j] + <span class="string">&quot;; division: &quot;</span> + division + <span class="string">&quot;; reminder: &quot;</span> + arr[j] / division % <span class="number">10</span>);</span><br><span class="line">                <span class="keyword">int</span> indexOfBucket = bucket[arr[j] / division % <span class="number">10</span>];</span><br><span class="line">                System.out.println(<span class="string">&quot;index: &quot;</span> + index);</span><br><span class="line">                result[indexOfBucket - <span class="number">1</span>] = arr[j];</span><br><span class="line">                bucket[arr[j] / division % <span class="number">10</span>]--;</span><br><span class="line">                System.out.println(Arrays.toString(result));</span><br><span class="line">            &#125;</span><br><span class="line">            System.arraycopy(result, <span class="number">0</span>, arr, <span class="number">0</span>, arr.length);</span><br><span class="line">            System.out.println(<span class="string">&quot;Reset arr: &quot;</span> + Arrays.toString(arr));</span><br><span class="line">            Arrays.fill(bucket, <span class="number">0</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Reset ret: &quot;</span> + Arrays.toString(result));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMaxDigit</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// get max value</span></span><br><span class="line">        <span class="keyword">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (max &lt; i)</span><br><span class="line">                max = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get max value length</span></span><br><span class="line">        <span class="keyword">return</span> String.valueOf(max).length();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种从低位开始的排序叫做：Least significant digital</p>
<h2 id="MSD"><a href="#MSD" class="headerlink" title="MSD"></a>MSD</h2><p>Most signficat digital</p>
<h2 id="考虑负数"><a href="#考虑负数" class="headerlink" title="考虑负数"></a>考虑负数</h2><h2 id="字符串排序"><a href="#字符串排序" class="headerlink" title="字符串排序"></a>字符串排序</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/10/Python-err-str-object-is-not-callable/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/10/Python-err-str-object-is-not-callable/" class="post-title-link" itemprop="url">Python err str object is not callable</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-10 17:38:34" itemprop="dateCreated datePublished" datetime="2021-05-10T17:38:34+08:00">2021-05-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>454</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在 VSCode 上写代码的时候，终端突然不能做 int 到 String 的转化了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TypeError                                 Traceback (most recent call last)</span></span><br><span class="line"><span class="comment"># &lt;ipython-input-40-5760e6fd64bf&gt; in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#      10     else:</span></span><br><span class="line"><span class="comment">#      11         tmpStr = re.sub(&#x27;\s+&#x27;, &#x27; &#x27;, sub[&#x27;preview&#x27;])</span></span><br><span class="line"><span class="comment"># ---&gt; 12         allLines += &quot;\n&quot; + str(sub[&#x27;lineNumber&#x27;]) + &quot; &quot; + tmpStr</span></span><br><span class="line"><span class="comment">#      13 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TypeError: &#x27;str&#x27; object is not callable</span></span><br></pre></td></tr></table></figure>

<p>查了下，str 是一个 global 的函数，如果之前有类似 <code>str = &#39;asdf&#39;</code> 的赋值语句的话，后面对这个函数的调用就会出问题。。。。</p>
<p>回忆一下，貌似终端 debug 的时候有做过类似的操作 （；￣ェ￣）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/08/Design-pattern-factory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/08/Design-pattern-factory/" class="post-title-link" itemprop="url">工厂模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-08 17:14:36" itemprop="dateCreated datePublished" datetime="2021-05-08T17:14:36+08:00">2021-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>379</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>简单工厂并不是一种设计模式，而是一种良好的编码习惯</li>
</ul>
<blockquote>
<p><strong>The Factory Method Pattern</strong> defines an interface for creating an object, but lets subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.<br>工厂方法 模式，这个名字可以说是很形象了，哈哈。它定义一个方法来创建对象，并把创建对象的逻辑托付给子类。</p>
</blockquote>
<p>简单工厂，工厂只是一个其他的对象，而 工厂方法 这个设计模式中，工厂是一个子类</p>
<p>SimpleFactory, which gives you a way to encapsulate object creation, but not give you the flexibility of the Factory Method</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/07/Algorithm-counting-sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/hexo/2021/05/07/Algorithm-counting-sort/" class="post-title-link" itemprop="url">计数排序</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-07 18:47:57" itemprop="dateCreated datePublished" datetime="2021-05-07T18:47:57+08:00">2021-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-17 19:37:38" itemprop="dateModified" datetime="2021-11-17T19:37:38+08:00">2021-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>计数排序不是比较排序，他将数据的值转化为键存储在额外空间中，时间复杂度是线性的。他要求输入的数据必须是有确定范围的整数。</p>
<p>算法说明：</p>
<ol>
<li>找出待排数组中的最大，最小元素</li>
<li>统计数组中每个值为 i 的元素出现的次数，存入索引数组的第 i 相中</li>
<li>对所有计数累加</li>
<li>反向填充目标数组：元素 i 放到新数组第 C[i] 位置，美方一个元素 C[i] - 1</li>
</ol>
<p>时间/空间复杂度：O(n+k)</p>
<h2 id="普通实现"><a href="#普通实现" class="headerlink" title="普通实现"></a>普通实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountingSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> Random().ints(<span class="number">0</span>, <span class="number">100</span>).limit(<span class="number">10</span>).toArray();</span><br><span class="line">        System.out.println(<span class="string">&quot;Origin: &quot;</span> + Arrays.toString(arr));</span><br><span class="line">        <span class="keyword">int</span>[] result = countingSort(arr);</span><br><span class="line">        System.out.println(<span class="string">&quot;After:  &quot;</span> + Arrays.toString(result));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] countingSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">        <span class="comment">// 遍历数组，得到最大值</span></span><br><span class="line">        <span class="keyword">int</span> max = arr[<span class="number">0</span>];  <span class="comment">// 这里之前写的是 max = 0; 如果原数组包含负数就挂了。。</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j : arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (max &lt; j) &#123;</span><br><span class="line">                max = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 根据这个值新建一个用于计数的数组, 比如原数组最大值为 2，新建的计数数组为 [0, 1, 2]，所以声明长度的时候为 max + 1</span></span><br><span class="line">        <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[max + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 再次遍历数组，将对应的 bucket 下标坐 ++ 操作</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</span><br><span class="line">            bucket[i]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历 bucket 数组，将统计结果塞到新建结果集中</span></span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (bucket[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                result[index] = i;</span><br><span class="line">                index++;</span><br><span class="line">                bucket[i]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Origin: [36, 7, 70, 84, 69, 65, 88, 11, 16, 87]</span></span><br><span class="line"><span class="comment">// After:  [7, 11, 16, 36, 65, 69, 70, 84, 87, 88]</span></span><br></pre></td></tr></table></figure>

<p>步骤和思路很都简单明了，容易理解</p>
<h2 id="稳定性"><a href="#稳定性" class="headerlink" title="稳定性"></a>稳定性</h2><p>但是上面的实现有一个弊端，就是，他是不稳定的。。。。</p>
<p>所谓的稳定性，简单来说，如果原数组中，有两个相等的值 arr[i], arr[j]，在排序后他们的前后顺序还保持一致，那么就是稳定的。</p>
<p>好处：稳定的算法，第一个键排序的结果可以当作第二次排序的输入使用</p>
<p>PS：这个说法我大致有感觉，但是具体还是没把握。。。</p>
<h2 id="保证稳定性的实现"><a href="#保证稳定性的实现" class="headerlink" title="保证稳定性的实现"></a>保证稳定性的实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountingSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> Random().ints(<span class="number">0</span>, <span class="number">10</span>).limit(<span class="number">10</span>).toArray();</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Origin&quot;</span>, Arrays.toString(arr));</span><br><span class="line">        <span class="keyword">int</span>[] result = countingSort(arr);</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;After&quot;</span>, Arrays.toString(result));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] countingSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">        <span class="keyword">int</span> max = getMax(arr);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据这个值新建一个用于计数的数组, 比如原数组最大值为 2，新建的计数数组为 [0, 1, 2]，所以声明长度的时候为 max + 1</span></span><br><span class="line">        <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[max + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 再次遍历数组，将对应的 bucket 下标做 ++ 操作</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</span><br><span class="line">            bucket[i]++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Bucket&quot;</span>, Arrays.toString(bucket));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新建一个数组存储下标结束的值，用于保证排序稳定性</span></span><br><span class="line">        <span class="keyword">int</span>[] endIndex = <span class="keyword">new</span> <span class="keyword">int</span>[bucket.length];</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; endIndex.length; i++) &#123;</span><br><span class="line">            sum += bucket[i];</span><br><span class="line">            endIndex[i] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;endIndex&quot;</span>, Arrays.toString(endIndex));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历 bucket 数组，将统计结果塞到新建结果集中</span></span><br><span class="line">        <span class="comment">// 这一段实现踩了好多坑</span></span><br><span class="line">        <span class="comment">//  1. i 结束条件 &gt;= 0，第一次实现没有把 = 纳入</span></span><br><span class="line">        <span class="comment">//  2. 后两句的 endIndex[arr[i]] 老是写成 endIndex[i]，对应关系还是没有写清楚</span></span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            result[endIndex[arr[i]] - <span class="number">1</span>] = arr[i];</span><br><span class="line">            endIndex[arr[i]]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 遍历数组，得到最大值</span></span><br><span class="line">        <span class="keyword">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j : arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (max &lt; j) &#123;</span><br><span class="line">                max = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Origin    : [4, 6, 8, 3, 8, 0, 0, 4, 3, 5]</span></span><br><span class="line"><span class="comment">// Bucket    : [2, 0, 0, 2, 2, 1, 1, 0, 2]</span></span><br><span class="line"><span class="comment">// endIndex  : [2, 2, 2, 4, 6, 7, 8, 8, 10]</span></span><br><span class="line"><span class="comment">// After     : [0, 0, 3, 3, 4, 4, 5, 6, 8, 8]</span></span><br></pre></td></tr></table></figure>

<h2 id="不是从-0-开始的实现"><a href="#不是从-0-开始的实现" class="headerlink" title="不是从 0 开始的实现"></a>不是从 0 开始的实现</h2><p>之前的实现还是有瑕疵，作为统计数组的下标都是从 0 开始的，在一开始统计最值的时候可以同时统计最小值，缩小样本空间，减少空间消耗</p>
<p>在之前的练习中理解了下标，值之间的对应关系，修改一下并不十分麻烦，挺好理解的。</p>
<p>有的示例中会把 bucket 和 endIndex 合并来减少内存开销，我觉得都 OK，这样写思路会清晰一点</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountingSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> Random().ints(<span class="number">0</span>, <span class="number">10</span>).limit(<span class="number">10</span>).toArray();</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Origin&quot;</span>, Arrays.toString(arr));</span><br><span class="line">        <span class="keyword">int</span>[] result = countingSort(arr);</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;After&quot;</span>, Arrays.toString(result));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] countingSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">        <span class="comment">// 遍历数组，得到最值</span></span><br><span class="line">        <span class="keyword">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> min = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j : arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (max &lt; j) &#123;</span><br><span class="line">                max = j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (min &gt; j) &#123;</span><br><span class="line">                min = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据最值新建一个用于计数的数组, 比如原数组最大值为 4，最小值为 2，新建的计数数组为 [2，3，4]，所以声明长度的时候为 max - min + 1</span></span><br><span class="line">        <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 再次遍历数组，将对应的 bucket 下标做 ++ 操作</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</span><br><span class="line">            bucket[i - min]++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Bucket&quot;</span>, Arrays.toString(bucket));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新建一个数组存储下标结束的值，用于保证排序稳定性</span></span><br><span class="line">        <span class="keyword">int</span>[] endIndex = <span class="keyword">new</span> <span class="keyword">int</span>[bucket.length];</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; endIndex.length; i++) &#123;</span><br><span class="line">            sum += bucket[i];</span><br><span class="line">            endIndex[i] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;endIndex&quot;</span>, Arrays.toString(endIndex));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历 bucket 数组，将统计结果塞到新建结果集中</span></span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            result[endIndex[arr[i] - min] - <span class="number">1</span>] = arr[i];</span><br><span class="line">            endIndex[arr[i] - min]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Origin    : [5, 1, 7, 6, 1, 0, 5, 2, 0, 3]</span></span><br><span class="line"><span class="comment">// Bucket    : [2, 2, 1, 1, 0, 2, 1, 1]</span></span><br><span class="line"><span class="comment">// endIndex  : [2, 4, 5, 6, 6, 8, 9, 10]</span></span><br><span class="line"><span class="comment">// After     : [0, 0, 1, 1, 2, 3, 5, 5, 6, 7]</span></span><br></pre></td></tr></table></figure>

<h2 id="继续演进"><a href="#继续演进" class="headerlink" title="继续演进"></a>继续演进</h2><p>既然都写到这里了，直接在源代码基础上，直接将 bucket 和 endIndex 合并了，so easy</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountingSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> Random().ints(<span class="number">0</span>, <span class="number">10</span>).limit(<span class="number">10</span>).toArray();</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Origin&quot;</span>, Arrays.toString(arr));</span><br><span class="line">        <span class="keyword">int</span>[] result = countingSort(arr);</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;After&quot;</span>, Arrays.toString(result));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] countingSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">        <span class="comment">// 遍历数组，得到最值</span></span><br><span class="line">        <span class="keyword">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> min = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j : arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (max &lt; j) &#123;</span><br><span class="line">                max = j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (min &gt; j) &#123;</span><br><span class="line">                min = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据最值新建一个用于计数的数组, 比如原数组最大值为 4，最小值为 2，新建的计数数组为 [2，3，4]，所以声明长度的时候为 max - min + 1</span></span><br><span class="line">        <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 再次遍历数组，将对应的 bucket 下标做 ++ 操作</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</span><br><span class="line">            bucket[i - min]++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Bucket&quot;</span>, Arrays.toString(bucket));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新建一个数组存储下标结束的值，用于保证排序稳定性</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">            bucket[i] = bucket[i] + bucket[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%-10s: %s%n&quot;</span>, <span class="string">&quot;Index&quot;</span>, Arrays.toString(bucket));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历 bucket 数组，将统计结果塞到新建结果集中</span></span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            result[bucket[arr[i] - min] - <span class="number">1</span>] = arr[i]; <span class="comment">// 下标计算注意一下，arr[i] - min 取出 bucket 存储的位置值，但是这个值比下标大1</span></span><br><span class="line">            bucket[arr[i] - min]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Origin    : [1, 4, 6, 3, 9, 5, 0, 0, 9, 8]</span></span><br><span class="line"><span class="comment">// Bucket    : [2, 1, 0, 1, 1, 1, 1, 0, 1, 2]</span></span><br><span class="line"><span class="comment">// Index     : [2, 3, 3, 4, 5, 6, 7, 7, 8, 10]</span></span><br><span class="line"><span class="comment">// After     : [0, 0, 1, 3, 4, 5, 6, 8, 9, 9]</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/hexo/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/hexo/">1</a><span class="space">&hellip;</span><a class="page-number" href="/hexo/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/hexo/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/hexo/page/21/">21</a><a class="extend next" rel="next" href="/hexo/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jack Zheng"
      src="/hexo/images/jack.jpg">
  <p class="site-author-name" itemprop="name">Jack Zheng</p>
  <div class="site-description" itemprop="description">我是张江搬砖小码农, 知识搬运工</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/hexo/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/hexo/categories/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/hexo/tags/">
          
        <span class="site-state-item-count">182</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Zheng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">1.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">16:10</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v5.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/hexo/lib/anime.min.js"></script>
  <script src="/hexo/lib/velocity/velocity.min.js"></script>
  <script src="/hexo/lib/velocity/velocity.ui.min.js"></script>

<script src="/hexo/js/utils.js"></script>

<script src="/hexo/js/motion.js"></script>


<script src="/hexo/js/schemes/muse.js"></script>


<script src="/hexo/js/next-boot.js"></script>




  




  
<script src="/hexo/js/local-search.js"></script>














  

  


</body>
</html>
