<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/hexo/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hexo/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hexo/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/hexo/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="UgODgWVmvTsdD--vjodDR3tPUZRWM3i7JpHzbYejxUM">

<link rel="stylesheet" href="/hexo/css/main.css">


<link rel="stylesheet" href="/hexo/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/hexo/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Chapter 1: Starting with Linux ShellsWhat Is LinuxLinux 系统主要由一下 4 部分组成  The Linux kernel The GUN utilities A graphical desktop environment Application software  Looking into the Linux KernelLinux 系统的核">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux命令行与shell脚本编程大全 第一章 Linux 命令行">
<meta property="og:url" content="https://jack-zheng.github.io/hexo/2021/05/31/LSCASSB-parti-the-linux-command-line/index.html">
<meta property="og:site_name" content="Jackpot">
<meta property="og:description" content="Chapter 1: Starting with Linux ShellsWhat Is LinuxLinux 系统主要由一下 4 部分组成  The Linux kernel The GUN utilities A graphical desktop environment Application software  Looking into the Linux KernelLinux 系统的核">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-31T02:04:57.000Z">
<meta property="article:modified_time" content="2021-10-13T11:29:19.755Z">
<meta property="article:author" content="Jack Zheng">
<meta property="article:tag" content="Linux命令行与shell脚本编程大全 3rd">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jack-zheng.github.io/hexo/2021/05/31/LSCASSB-parti-the-linux-command-line/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Linux命令行与shell脚本编程大全 第一章 Linux 命令行 | Jackpot</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/hexo/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jackpot</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-tags">

    <a href="/hexo/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/hexo/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/hexo/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/jack-zheng" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/31/LSCASSB-parti-the-linux-command-line/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux命令行与shell脚本编程大全 第一章 Linux 命令行
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-31 10:04:57" itemprop="dateCreated datePublished" datetime="2021-05-31T10:04:57+08:00">2021-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-13 19:29:19" itemprop="dateModified" datetime="2021-10-13T19:29:19+08:00">2021-10-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>28k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>26 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Chapter-1-Starting-with-Linux-Shells"><a href="#Chapter-1-Starting-with-Linux-Shells" class="headerlink" title="Chapter 1: Starting with Linux Shells"></a>Chapter 1: Starting with Linux Shells</h2><h3 id="What-Is-Linux"><a href="#What-Is-Linux" class="headerlink" title="What Is Linux"></a>What Is Linux</h3><p>Linux 系统主要由一下 4 部分组成</p>
<ul>
<li>The Linux kernel</li>
<li>The GUN utilities</li>
<li>A graphical desktop environment</li>
<li>Application software</li>
</ul>
<h4 id="Looking-into-the-Linux-Kernel"><a href="#Looking-into-the-Linux-Kernel" class="headerlink" title="Looking into the Linux Kernel"></a>Looking into the Linux Kernel</h4><p>Linux 系统的核心就是 kernel，它起到调度硬件软件资源的作用。</p>
<p>kernel 有四个主要的功能</p>
<ul>
<li>System memory management</li>
<li>Software program management</li>
<li>Hardware management</li>
<li>Filesystem management</li>
</ul>
<h5 id="System-Memory-management"><a href="#System-Memory-management" class="headerlink" title="System Memory management"></a>System Memory management</h5><p>下面的内容和操作系统相关，很多概念我都不是很感兴趣，可以先跳过</p>
<h2 id="Chapter-2-Getting-to-the-Shell"><a href="#Chapter-2-Getting-to-the-Shell" class="headerlink" title="Chapter 2: Getting to the Shell"></a>Chapter 2: Getting to the Shell</h2><p>终端介绍，跳过</p>
<h2 id="Chapter-3-Basic-bash-Shell-Commands"><a href="#Chapter-3-Basic-bash-Shell-Commands" class="headerlink" title="Chapter 3: Basic bash Shell Commands"></a>Chapter 3: Basic bash Shell Commands</h2><h3 id="Interacting-with-the-bash-Manual"><a href="#Interacting-with-the-bash-Manual" class="headerlink" title="Interacting with the bash Manual"></a>Interacting with the bash Manual</h3><p>man page 的结构如下</p>
<table>
<thead>
<tr>
<th align="left">Section</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Name</td>
<td align="left">Displays command name and a short description</td>
</tr>
<tr>
<td align="left">Syopsis</td>
<td align="left">Shows command syntax</td>
</tr>
<tr>
<td align="left">Configuration</td>
<td align="left">Provides configuration information</td>
</tr>
<tr>
<td align="left">Description</td>
<td align="left">Describes command generally</td>
</tr>
<tr>
<td align="left">Options</td>
<td align="left">Describes command option(s)</td>
</tr>
<tr>
<td align="left">Exit Status</td>
<td align="left">Defines command exit status indicator(s)</td>
</tr>
<tr>
<td align="left">Return Value</td>
<td align="left">describes command return value(s)</td>
</tr>
<tr>
<td align="left">Errors</td>
<td align="left">Provides command return value(s)</td>
</tr>
<tr>
<td align="left">Environment</td>
<td align="left">Describes envrionment variable(s) used</td>
</tr>
<tr>
<td align="left">Files</td>
<td align="left">Defines files used by command</td>
</tr>
<tr>
<td align="left">Versions</td>
<td align="left">Describes command version information</td>
</tr>
<tr>
<td align="left">Conforming To</td>
<td align="left">Provides standards followed</td>
</tr>
<tr>
<td align="left">Notes</td>
<td align="left">Describes additional helpful command material</td>
</tr>
<tr>
<td align="left">Bugs</td>
<td align="left">Provides the location to report found buds</td>
</tr>
<tr>
<td align="left">Example</td>
<td align="left">Shows command use examples</td>
</tr>
<tr>
<td align="left">Authors</td>
<td align="left">Provides information on command developers</td>
</tr>
<tr>
<td align="left">Copyright</td>
<td align="left">Defines command code copyright status</td>
</tr>
<tr>
<td align="left">See Also</td>
<td align="left">Refers similar available commands</td>
</tr>
</tbody></table>
<h3 id="Navigating-the-Filesystem"><a href="#Navigating-the-Filesystem" class="headerlink" title="Navigating the Filesystem"></a>Navigating the Filesystem</h3><p>常见的目录及用途</p>
<table>
<thead>
<tr>
<th align="left">Directory</th>
<th align="left">Usage</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/</td>
<td align="left">root of the virtual directory, where normally, no files are placed</td>
</tr>
<tr>
<td align="left">/bin</td>
<td align="left">binary directory, where GNU user-level utilities are stored</td>
</tr>
<tr>
<td align="left">/boot</td>
<td align="left">boot directory, where boot files are stored</td>
</tr>
<tr>
<td align="left">/dev</td>
<td align="left">device directory, where Linux creates device nodes</td>
</tr>
<tr>
<td align="left">/etc</td>
<td align="left">system configuration files directory</td>
</tr>
<tr>
<td align="left">/home</td>
<td align="left">home directory, where Linux creates user directories</td>
</tr>
<tr>
<td align="left">/lib</td>
<td align="left">library directory, where system and application library files are stored</td>
</tr>
<tr>
<td align="left">/media</td>
<td align="left">media directory, a common place for mount points used for removable media</td>
</tr>
<tr>
<td align="left">/mnt</td>
<td align="left">mount directory, another common place for mount points used for removable media</td>
</tr>
<tr>
<td align="left">/opt</td>
<td align="left">optional directory, often used to store third-part software packages and data files</td>
</tr>
<tr>
<td align="left">/proc</td>
<td align="left">process directory, where current hardware and process information is stored</td>
</tr>
<tr>
<td align="left">/root</td>
<td align="left">root home directory</td>
</tr>
<tr>
<td align="left">/sbin</td>
<td align="left">system binary directory, where many GNU admin-level utilities are stored</td>
</tr>
<tr>
<td align="left">/run</td>
<td align="left">run directory, where runtime data is held during system operation</td>
</tr>
<tr>
<td align="left">/srv</td>
<td align="left">service directory, where local services stre their files</td>
</tr>
<tr>
<td align="left">/sys</td>
<td align="left">system directory, where system hardware information files are stored</td>
</tr>
<tr>
<td align="left">/tmp</td>
<td align="left">temporary directory, where temporary work files can be crated and destroyed</td>
</tr>
<tr>
<td align="left">/usr</td>
<td align="left">user binary directory, where the bulk of GUN user-level utilities and data files are stored</td>
</tr>
<tr>
<td align="left">/var</td>
<td align="left">variable directory, for files that change frequently, such as log files</td>
</tr>
</tbody></table>
<h3 id="Listing-Files-and-Directories"><a href="#Listing-Files-and-Directories" class="headerlink" title="Listing Files and Directories"></a>Listing Files and Directories</h3><h4 id="Displaying-a-basic-list"><a href="#Displaying-a-basic-list" class="headerlink" title="Displaying a basic list"></a>Displaying a basic list</h4><p>展示文件命令 <code>ls</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果终端没有配置颜色，使用 -F 区分文件和文件夹,可执行文件后会加 *</span></span><br><span class="line">ls -F</span><br><span class="line"><span class="comment"># test3b.sh*      tmp_folder/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -a 显示所有文件，包括隐藏文件</span></span><br><span class="line">ls -a</span><br><span class="line"><span class="comment"># . npm  Documents</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -R 循环显示子目录</span></span><br><span class="line">ls -F -R</span><br><span class="line"><span class="comment"># badtest*        nohup.out       search.xml      search.xml.bak  tmp_folder/</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ./tmp_folder:</span></span><br><span class="line"><span class="comment"># test1.sh*       test10b.out</span></span><br></pre></td></tr></table></figure>

<h4 id="Displaying-a-long-listing"><a href="#Displaying-a-long-listing" class="headerlink" title="Displaying a long listing"></a>Displaying a long listing</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Displaying a long list</span></span><br><span class="line">ls -l</span><br><span class="line"><span class="comment"># total 10112</span></span><br><span class="line"><span class="comment"># -rwxr--r--   1 i306454  staff      159 May 30 15:56 badtest</span></span><br><span class="line"><span class="comment"># -rw-------   1 i306454  staff      138 Jun  2 19:12 nohup.out</span></span><br></pre></td></tr></table></figure>

<p>long list 显示格式说明</p>
<ul>
<li>The file type, directory(d), regular file(-), linked file(l), character device(c) or block device(b)</li>
<li>The file permissions</li>
<li>The number of file hard links</li>
<li>The file owner username</li>
<li>The file primary group name</li>
<li>The file byte size</li>
<li>The last time file was modified</li>
<li>The filename or directory name</li>
</ul>
<p>long list 是一个比较强力的模式，你可以收集到很多信息</p>
<h4 id="Filtering-listing-output"><a href="#Filtering-listing-output" class="headerlink" title="Filtering listing output"></a>Filtering listing output</h4><p>过滤文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l bad*</span><br><span class="line"><span class="comment"># -rwxr--r--  1 i306454  staff  159 May 30 15:56 badtest</span></span><br></pre></td></tr></table></figure>

<p>可用的过滤符</p>
<ul>
<li>? 单个字符</li>
<li>* 多个字符</li>
<li>[] 多选，可以是 [ai], [a-i],[!a]</li>
</ul>
<p>使用星号的过滤方法也叫做 file globbing</p>
<h3 id="Handling-Files"><a href="#Handling-Files" class="headerlink" title="Handling Files"></a>Handling Files</h3><p>过一下常用的文件处理命令</p>
<h4 id="Creating-files"><a href="#Creating-files" class="headerlink" title="Creating files"></a>Creating files</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># touch 创建空文件</span></span><br><span class="line">touch test_one</span><br><span class="line">ls -l test_one</span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  0 Jun  4 11:25 test_one</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以在不改变文件内容的情况下更新最后改动时间，这个之前倒是不知道</span></span><br><span class="line">ls -l test_one </span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  3 Jun  4 11:27 test_one</span></span><br><span class="line">touch test_one </span><br><span class="line">ls -l test_one </span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  3 Jun  4 11:29 test_one</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -a 只修改最近访问时间</span></span><br><span class="line">ls -a test_one</span><br><span class="line"><span class="comment"># 不过 Mac 不支持这个参数</span></span><br></pre></td></tr></table></figure>

<h4 id="Copying-files"><a href="#Copying-files" class="headerlink" title="Copying files"></a>Copying files</h4><p>format: <code>cp source destination</code>, copy 的文件是一个全新的文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -i 当文件已经存在时，询问是否覆盖</span></span><br><span class="line">cp -i test_one test_two </span><br><span class="line"><span class="comment"># overwrite test_two? (y/n [n]) n</span></span><br><span class="line"><span class="comment"># not overwritten</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -d 只显示文件夹，不显示文件夹内容</span></span><br><span class="line">ls -Fd tmp_folder</span><br><span class="line"><span class="comment"># tmp_folder/</span></span><br><span class="line">ls -F tmp_folder/</span><br><span class="line"><span class="comment"># test1.sh*       test10b.out...</span></span><br></pre></td></tr></table></figure>

<h4 id="Linking-files"><a href="#Linking-files" class="headerlink" title="Linking files"></a>Linking files</h4><p>Linux 中你的文件可以有一个物理主体和多个虚拟链接，这种链接即为 links。系统中有两种链接</p>
<ul>
<li>A symbolic link</li>
<li>A hard link</li>
</ul>
<p>A symbolic link is simply a physical file that points to another file somewhere in the virtual directory structure. The two symnolically linked together files do not share the same contents.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ln -s test_one  sl_test_one</span><br><span class="line">ls -l *test_one</span><br><span class="line"><span class="comment"># lrwxr-xr-x  1 i306454  staff  8 Jun  4 12:30 sl_test_one -&gt; test_one</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  3 Jun  4 11:29 test_one</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -i 显示 inode 名字</span></span><br><span class="line">ls -i *test_one</span><br><span class="line">51540816 sl_test_one    51538439 test_one</span><br></pre></td></tr></table></figure>

<p>hard link 是一个虚拟链接，你可以通过它对原文件做修改</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ln test_two hl_test_two</span><br><span class="line"></span><br><span class="line">ls -il *test_two</span><br><span class="line"><span class="comment"># 51538882 -rw-r--r--  2 i306454  staff  3 Jun  4 11:38 hl_test_two</span></span><br><span class="line"><span class="comment"># 51538882 -rw-r--r--  2 i306454  staff  3 Jun  4 11:38 test_two</span></span><br></pre></td></tr></table></figure>

<p><strong>Note</strong> 创建 hard link 要求你创建的地方是同一个物理空间，如果是分开的空间，只能创建 symblic link.</p>
<p>查阅下来发现，符号链接和硬链接最主要的区别有</p>
<ul>
<li>symbolic link 和原文件有不同的 inode, hard link 和原文件相同</li>
<li>hard link 启动备份的作用，当所有指向同一个 inode 的文件都删除了文件才删除</li>
<li>symbolic link 保存原文件路径，当原文件删除了，link 的文件内容就消失了</li>
</ul>
<h4 id="Renaming-files"><a href="#Renaming-files" class="headerlink" title="Renaming files"></a>Renaming files</h4><p>Renaming files is called moving files. <code>mv</code> won’t change the inode number.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">touch file1</span><br><span class="line">mv file1 file2</span><br><span class="line">ls file*</span><br><span class="line"><span class="comment"># file2</span></span><br></pre></td></tr></table></figure>

<p><code>mv</code> 也支持整个文件夹的迁移，且不需要加任何参数</p>
<h4 id="Deleting-files"><a href="#Deleting-files" class="headerlink" title="Deleting files"></a>Deleting files</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -i file2</span><br><span class="line"><span class="comment"># remove file2?</span></span><br></pre></td></tr></table></figure>

<h3 id="Managing-Directories"><a href="#Managing-Directories" class="headerlink" title="Managing Directories"></a>Managing Directories</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mkdir New_Dir</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建多级文件夹</span></span><br><span class="line">mkdir -p folder1/folder2/folder3</span><br><span class="line">ls -R folder1</span><br><span class="line"><span class="comment"># folder2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># folder1/folder2:</span></span><br><span class="line"><span class="comment"># folder3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># folder1/folder2/folder3:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># rmdir 只能删除空文件夹</span></span><br><span class="line">rmdir folder1</span><br><span class="line"><span class="comment"># rmdir: folder1: Directory not empty</span></span><br><span class="line"></span><br><span class="line">rm -rf folder1</span><br></pre></td></tr></table></figure>

<h3 id="Viewing-File-Contents"><a href="#Viewing-File-Contents" class="headerlink" title="Viewing File Contents"></a>Viewing File Contents</h3><p>使用 <code>file</code> 瞥一眼文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">file folder1</span><br><span class="line"><span class="comment"># folder1: directory</span></span><br><span class="line">file file2</span><br><span class="line"><span class="comment"># file2: empty</span></span><br><span class="line">ile search.xml</span><br><span class="line"><span class="comment"># search.xml: XML 1.0 document text, UTF-8 Unicode text, with very long lines, with overstriking</span></span><br><span class="line">file badtest</span><br><span class="line"><span class="comment"># badtest: Bourne-Again shell script text executable, ASCII text</span></span><br></pre></td></tr></table></figure>

<p><code>cat</code> 全揽文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">cat tree.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># -n 显示行号</span></span><br><span class="line">cat -n badtest </span><br><span class="line">    <span class="comment">#  1  #!/usr/local/bin/bash</span></span><br><span class="line">    <span class="comment">#  2  # Testing closing file descriptors</span></span><br><span class="line">    <span class="comment">#  3</span></span><br><span class="line">    <span class="comment">#  4  exec 3&gt; test17file</span></span><br><span class="line">    <span class="comment">#  5</span></span><br><span class="line">    <span class="comment">#  6  echo &quot;This is a test line of data&quot; &gt;&amp;3</span></span><br><span class="line">    <span class="comment">#  7</span></span><br><span class="line">    <span class="comment">#  8  exec 3&gt;&amp;-</span></span><br><span class="line">    <span class="comment">#  9</span></span><br><span class="line">    <span class="comment"># 10  echo &quot;This won&#x27;t work&quot; &gt;&amp;3</span></span><br><span class="line">    <span class="comment"># 11</span></span><br><span class="line">    <span class="comment"># 12</span></span><br><span class="line">    <span class="comment"># 13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只显示 non-blank 的行号</span></span><br><span class="line">cat -b badtest </span><br><span class="line">    <span class="comment">#  1  #!/usr/local/bin/bash</span></span><br><span class="line">    <span class="comment">#  2  # Testing closing file descriptors</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#  3  exec 3&gt; test17file</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#  4  echo &quot;This is a test line of data&quot; &gt;&amp;3</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#  5  exec 3&gt;&amp;-</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#  6  echo &quot;This won&#x27;t work&quot; &gt;&amp;3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 ^I 代替 tab, Mac 不支持</span></span><br><span class="line">cat -T badtest</span><br></pre></td></tr></table></figure>

<h4 id="Using-the-more-command"><a href="#Using-the-more-command" class="headerlink" title="Using the more command"></a>Using the more command</h4><p><code>cat</code> 只能全文显示，<code>more</code> 显示一部分并让你自己选择后面的动作</p>
<h4 id="Using-the-less-command"><a href="#Using-the-less-command" class="headerlink" title="Using the less command"></a>Using the less command</h4><p>别被它的名字骗了，其实他是 more 的增强版 for phrase ‘less is more’</p>
<h4 id="Viewing-parts-of-a-file"><a href="#Viewing-parts-of-a-file" class="headerlink" title="Viewing parts of a file"></a>Viewing parts of a file</h4><p><code>tail</code> 默认只显示文件的最后 10 行，<code>-n</code> 指定显示行数 <code>tail -n 2 file</code></p>
<p><code>head</code> 默认显示开头 10 行，<code>- 5</code> 指定行数 <code>head -3 file</code>. 格式和 tail 不统一，真是干了</p>
<p>试了下，这两个命令都可以用 <code>-n 3</code> 和 <code>-3</code> 的格式，没区别</p>
<h2 id="Chapter-4-More-bash-Shell-Commands"><a href="#Chapter-4-More-bash-Shell-Commands" class="headerlink" title="Chapter 4: More bash Shell Commands"></a>Chapter 4: More bash Shell Commands</h2><h3 id="Monitoring-Programs"><a href="#Monitoring-Programs" class="headerlink" title="Monitoring Programs"></a>Monitoring Programs</h3><h4 id="Peeking-at-the-processes"><a href="#Peeking-at-the-processes" class="headerlink" title="Peeking at the processes"></a>Peeking at the processes</h4><p>Linux 系统中，用 process 表示运行着的系统。可以用 <code>ps</code>(process status) 命令查看.</p>
<p>默认情况下，只显示四个内容，process ID，terminal that they are running from, and the CUP time the process has used.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ps </span><br><span class="line">  PID TTY           TIME CMD</span><br><span class="line">  647 ttys000    0:02.15 -zsh</span><br><span class="line">12163 ttys000   11:26.77 /Users/i306454/SAPDevelop/tools/sapjvm_8/bin/java -Dlog4j.co</span><br><span class="line">12183 ttys000    0:01.12 tail -f /Users/i306454/SAPDevelop/workspace/trunk/tomcat-sfs</span><br><span class="line"> 1238 ttys001    0:09.65 /bin/zsh -l</span><br><span class="line"> 9378 ttys002    0:03.04 /bin/zsh --login -i</span><br></pre></td></tr></table></figure>

<p><code>ps</code> command 有三种类型的参数</p>
<ul>
<li>Unix style parameters</li>
<li>BSD style parameters</li>
<li>GNU long parameters</li>
</ul>
<blockquote>
<p>Unix-style parameters</p>
</blockquote>
<p>简单摘录几个, 而且书上列的只是一部分，主要记住几个常用的就行了</p>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-A</td>
<td align="left">Shows all processes</td>
</tr>
<tr>
<td align="left">-N</td>
<td align="left">Shows the opposite of the specified parameters</td>
</tr>
<tr>
<td align="left">-a</td>
<td align="left">Shows all processes except session headers and processes without a terminal</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">Shows all processes except session headers</td>
</tr>
<tr>
<td align="left">-e</td>
<td align="left">Shows all processes</td>
</tr>
<tr>
<td align="left">-f</td>
<td align="left">Displays a full format listing</td>
</tr>
<tr>
<td align="left">-l</td>
<td align="left">Displays a long listing</td>
</tr>
</tbody></table>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | head</span><br><span class="line"><span class="comment">#   UID   PID  PPID   C STIME   TTY           TIME CMD</span></span><br><span class="line"><span class="comment">#     0     1     0   0 10:09AM ??         1:23.22 /sbin/launchd</span></span><br><span class="line"><span class="comment">#     0    64     1   0 10:09AM ??         0:03.00 /usr/sbin/syslogd</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">ps -l | head</span><br><span class="line"><span class="comment"># UID   PID  PPID        F CPU PRI NI       SZ    RSS WCHAN     S             ADDR TTY           TIME CMD</span></span><br><span class="line"><span class="comment"># 501   647   646     4006   0  31  0  5457412   5200 -      S+                  0 ttys000    0:04.03 -zsh</span></span><br></pre></td></tr></table></figure>

<ul>
<li>UID: The user responsible for launching the process</li>
<li>PID: The process ID of the process</li>
<li>PPID: The PID of the parent process(if a process is start by another process)</li>
<li>C: Processor utilization over the lifetime of the process</li>
<li>STIME: The system time when the process started</li>
<li>TTY: The termnal device from which the porcess was launched</li>
<li>TIME: The cumulative CUP Time required to run the process</li>
<li>CMD: The name of the program that wat started</li>
<li>F: System flags assigned to the process by the kernel</li>
<li>S: The state of the process. O-running on proecssor; S-sleeping; R-runnable, waiting to run; Z-zombie, process terminated but parent not availale; T-process stopped;</li>
<li>PRI: The priority of the process(higher numbers mean low priority)</li>
<li>NI: The nice value, which is used for determining priorites</li>
<li>ADDR: The memory address of the process</li>
<li>SZ: Approximate amount of swap space required if the process was swapped out</li>
<li>WCHAN: Address of the kernel function where the process is sleeping</li>
</ul>
<p>其他两种我很少用，先留着把，有机会再补全</p>
<h4 id="Real-time-process-monitoring"><a href="#Real-time-process-monitoring" class="headerlink" title="Real-time process monitoring"></a>Real-time process monitoring</h4><p><code>ps</code> 只能显示一个时间点的 process 状态，如果要实时显示，需要用到 <code>top</code> 命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line"><span class="comment"># PID    COMMAND      %CPU TIME     #TH    #WQ  #PORT MEM    PURG   CMPRS  PGRP  PPID STATE    BOOSTS          %CPU_ME %CPU_OTHRS UID  FAULTS     COW     MSGSENT    MSGRECV   SYSBSD     SYSMACH    CSW        PAGEIN IDLEW    POWE INSTRS    CYCLES    USER</span></span><br><span class="line"><span class="comment"># 1841   com.docker.h 36.7 68:12.08 13     0    37    19G    0B     629M   1710  1830 sleeping *0[1]           0.00000 0.00000    501  202373842+ 473     569        335       85444924+  920        48973831+  17     3949456+ 59.4 469486491 786452501 i306454</span></span><br></pre></td></tr></table></figure>

<h4 id="Stopping-processes"><a href="#Stopping-processes" class="headerlink" title="Stopping processes"></a>Stopping processes</h4><p>Linux 系统中使用 signals 来和其他 process 交互。常用的 signals 列表</p>
<table>
<thead>
<tr>
<th align="left">Signal</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">HUP</td>
<td align="left">Hangs up</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">INT</td>
<td align="left">Interrupts</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">QUIT</td>
<td align="left">Stops running</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left">KILL</td>
<td align="left">Unconditionally terminates</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left">SEGV</td>
<td align="left">Produces segment violation</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left">TERM</td>
<td align="left">Terminates if possible</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left">STOP</td>
<td align="left">Stops unconditionally, but doesn’t terminate</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left">TSTP</td>
<td align="left">Stops or pauses, but continues to run in background</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left">CONT</td>
<td align="left">Resumes execution after STOP or TSTP</td>
</tr>
</tbody></table>
<p><strong>The kill command</strong> 只有 process 的 owner 或者 root user 有权限杀死进程。 格式：<code>kill 3904</code></p>
<p><strong>The killall command</strong> 可以根据名字关闭多个进程 <code>killall http*</code></p>
<h3 id="Monitoring-Disk-Space"><a href="#Monitoring-Disk-Space" class="headerlink" title="Monitoring Disk Space"></a>Monitoring Disk Space</h3><h4 id="Mounting-media"><a href="#Mounting-media" class="headerlink" title="Mounting media"></a>Mounting media</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示当前挂在的设备</span></span><br><span class="line">mount</span><br><span class="line"><span class="comment"># /dev/disk1s1s1 on / (apfs, sealed, local, read-only, journaled)</span></span><br><span class="line"><span class="comment"># devfs on /dev (devfs, local, nobrowse)</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<p>显示信息：</p>
<ul>
<li>The device filename of the media</li>
<li>The mount point in the virtual directory where the media is mounted</li>
<li>The filesystem type</li>
<li>The access status of the mounted media</li>
</ul>
<p>手动挂载，你需要是 root 或者用 sudo，格式为 <code>mount -t type device directory</code>, sample <code>mount -t vfat /dev/sdb1 /media/disk</code></p>
<p>type 指定了设备的文件类型，如果你想要和 Windows 下共享这个设备，你最好使用下面这些文件类型</p>
<ul>
<li>vfat: Windows long filesystem</li>
<li>ntfs: Windows advanced filesystem used in Windows NT, XP and Vista</li>
<li>iso9660: The standard CD-ROM filesystem</li>
</ul>
<p><code>unmount [directory | device]</code> 解绑，如果解绑时有 process 还在这个设备上运行，系统会阻止你</p>
<h4 id="Using-the-df-command"><a href="#Using-the-df-command" class="headerlink" title="Using the df command"></a>Using the df command</h4><p>当你想要看看磁盘还有多少可用空间时。。。</p>
<p><code>df</code> command allows you to easily see what’s happening on all the mounted disks</p>
<p>df - display free disk space</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line"><span class="comment"># Filesystem       Size   Used  Avail Capacity iused      ifree %iused  Mounted on</span></span><br><span class="line"><span class="comment"># /dev/disk1s1s1  932Gi   14Gi  749Gi     2%  553757 9767424403    0%   /</span></span><br><span class="line"><span class="comment"># devfs           190Ki  190Ki    0Bi   100%     656          0  100%   /dev</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<h4 id="Using-the-du-command"><a href="#Using-the-du-command" class="headerlink" title="Using the du command"></a>Using the du command</h4><p>df 是查看磁盘细心， du 是查看磁盘下的文件信息</p>
<p>The <code>du</code> command shows the disk usage or a specific directory(by default, the current directory)</p>
<p>du - display disk usage statistics</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 说是文件也会显示，问什么我这里看不到。。。</span></span><br><span class="line">du .</span><br><span class="line"><span class="comment"># 104     ./tmp_folder</span></span><br><span class="line"><span class="comment"># 0       ./folder1/folder2/folder3</span></span><br><span class="line"><span class="comment"># 0       ./folder1/folder2</span></span><br><span class="line"><span class="comment"># 0       ./folder1</span></span><br></pre></td></tr></table></figure>

<p>一些可选参数</p>
<ul>
<li>-c: 统计结果</li>
<li>-h: 方便阅读的结果</li>
<li>-s: Summarizes each argument</li>
</ul>
<h3 id="Working-with-Data-Files"><a href="#Working-with-Data-Files" class="headerlink" title="Working with Data Files"></a>Working with Data Files</h3><p>列出一些处理大量数据时用到的工具</p>
<h4 id="Sorting-data"><a href="#Sorting-data" class="headerlink" title="Sorting data"></a>Sorting data</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">cat file1</span><br><span class="line"><span class="comment"># one</span></span><br><span class="line"><span class="comment"># two</span></span><br><span class="line"><span class="comment"># three</span></span><br><span class="line"><span class="comment"># four</span></span><br><span class="line"><span class="comment"># five</span></span><br><span class="line">sort file1</span><br><span class="line"><span class="comment"># five</span></span><br><span class="line"><span class="comment"># four</span></span><br><span class="line"><span class="comment"># one</span></span><br><span class="line"><span class="comment"># three</span></span><br><span class="line"><span class="comment"># two</span></span><br><span class="line">cat file2</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="comment"># 45</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 10</span></span><br><span class="line"><span class="comment"># 145</span></span><br><span class="line"><span class="comment"># 75</span></span><br><span class="line">sort file2</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 10</span></span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="comment"># 145</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 45</span></span><br><span class="line"><span class="comment"># 75</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 -n 指定数字排序</span></span><br><span class="line">sort -n file2</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 10</span></span><br><span class="line"><span class="comment"># 45</span></span><br><span class="line"><span class="comment"># 75</span></span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="comment"># 145</span></span><br><span class="line"></span><br><span class="line">cat file3</span><br><span class="line"><span class="comment"># Apr</span></span><br><span class="line"><span class="comment"># Aug</span></span><br><span class="line"><span class="comment"># Dec</span></span><br><span class="line"><span class="comment"># Feb</span></span><br><span class="line"><span class="comment"># Jan</span></span><br><span class="line"><span class="comment"># Jul</span></span><br><span class="line"><span class="comment"># Jun</span></span><br><span class="line"><span class="comment"># Mar</span></span><br><span class="line"><span class="comment"># May</span></span><br><span class="line"><span class="comment"># Nov</span></span><br><span class="line"><span class="comment"># Oct</span></span><br><span class="line"><span class="comment"># Sep</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按月份排序</span></span><br><span class="line">sort -M file3</span><br><span class="line"><span class="comment"># Jan</span></span><br><span class="line"><span class="comment"># Feb</span></span><br><span class="line"><span class="comment"># Mar</span></span><br><span class="line"><span class="comment"># Apr</span></span><br><span class="line"><span class="comment"># May</span></span><br><span class="line"><span class="comment"># Jun</span></span><br><span class="line"><span class="comment"># Jul</span></span><br><span class="line"><span class="comment"># Aug</span></span><br><span class="line"><span class="comment"># Sep</span></span><br><span class="line"><span class="comment"># Oct</span></span><br><span class="line"><span class="comment"># Nov</span></span><br><span class="line"><span class="comment"># Dec</span></span><br></pre></td></tr></table></figure>

<p>其他比较常见的参数</p>
<ul>
<li>-t 指定分割符</li>
<li>-k 指定排序的列</li>
<li>-r 倒序</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前文件夹下的文件倒序排列</span></span><br><span class="line">du -sh * | sort -nr</span><br><span class="line"><span class="comment">#  52K    tmp_folder</span></span><br><span class="line"><span class="comment"># 4.0K    tree.txt</span></span><br><span class="line"><span class="comment"># 4.0K    test_thr</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<h4 id="Searching-for-data"><a href="#Searching-for-data" class="headerlink" title="Searching for data"></a>Searching for data</h4><p><code>grep [options] patttern [file]</code></p>
<p>一些有趣的可选参数</p>
<ul>
<li>-v 挑选不 match 的那些</li>
<li>-n 行号</li>
<li>-o 只显示配的内容</li>
<li>-c 显示匹配的数量</li>
<li>-e 多个匹配 <code>grep -e t -e f file1</code></li>
<li>使用正则 grep [tf] file1</li>
</ul>
<h4 id="Compressing-data"><a href="#Compressing-data" class="headerlink" title="Compressing data"></a>Compressing data</h4><p>Linux 系统中的压缩工具</p>
<table>
<thead>
<tr>
<th align="left">Utility</th>
<th align="left">File Extension</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">bzip2</td>
<td align="left">.bz2</td>
<td align="left">Uses the Burrows-Wheeler block sorting text compression algorith and Fuffman coding</td>
</tr>
<tr>
<td align="left">compress</td>
<td align="left">.Z</td>
<td align="left">Original Unix file compression utility; starting to fade away into obscurity</td>
</tr>
<tr>
<td align="left">gzip</td>
<td align="left">.gz</td>
<td align="left">The GUN Project’s compression utility; uses Lempel-Ziv coding</td>
</tr>
<tr>
<td align="left">zip</td>
<td align="left">.zip</td>
<td align="left">The Unix version of the PKZIP program for Windows</td>
</tr>
</tbody></table>
<p>gzip 是 Linux 中使用度最高的压缩工具，它由三部分组成</p>
<ul>
<li>gzip for compressing files</li>
<li>gzcat for displaying the contents of compressed text files</li>
<li>gunzip for uncompressing files</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gzip file1</span><br><span class="line">ls -l file1*</span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  50 Jun  4 13:57 file1.gz</span></span><br><span class="line">gzip file*</span><br><span class="line"><span class="comment"># gzip: file1.gz already has .gz suffix -- unchanged</span></span><br><span class="line">ls -l file*</span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  50 Jun  4 13:57 file1.gz</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  46 Jun  4 13:58 file2.gz</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  34 Jun  4 14:02 file3.gz</span></span><br></pre></td></tr></table></figure>

<h4 id="Archiving-data"><a href="#Archiving-data" class="headerlink" title="Archiving data"></a>Archiving data</h4><p>虽然 zip 挺好用，但是 Linux 上用的最多的还是 tar command. tar 本来是用来归档到 tape device 的，但是它也能用来归档到文件，后来还变得越来越受欢迎了</p>
<p><code>tar function [options] object1 object2</code></p>
<p>The tar Command Functions</p>
<table>
<thead>
<tr>
<th align="left">Function</th>
<th align="left">Long Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-A</td>
<td align="left">–concatenate</td>
<td align="left">Appends an existing tar archive file to another existing tar archive file</td>
</tr>
<tr>
<td align="left">-c</td>
<td align="left">–create</td>
<td align="left">Create a new tar archive file</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">–diff</td>
<td align="left">Checks the differences between a tar archive file and the filesystem</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">–delete</td>
<td align="left">Deletes from an existing tar archive file</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">–append</td>
<td align="left">Appends files to the end of an existing archive file</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">–list</td>
<td align="left">Lists the contents of an existing tar archive file</td>
</tr>
<tr>
<td align="left">-u</td>
<td align="left">–update</td>
<td align="left">Appends files to an existing tar archive file that are newer than a file with the same name in the existing archive</td>
</tr>
<tr>
<td align="left">-x</td>
<td align="left">–extract</td>
<td align="left">Extract files from an existing archive file</td>
</tr>
</tbody></table>
<p>The tar Command Options</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-C dir</td>
<td align="left">Changes to the specified directory</td>
</tr>
<tr>
<td align="left">-f file</td>
<td align="left">Output results to file(or device)</td>
</tr>
<tr>
<td align="left">-j</td>
<td align="left">Redirects output to the bzip2 command for compression</td>
</tr>
<tr>
<td align="left">-p</td>
<td align="left">Preserves all file permissions</td>
</tr>
<tr>
<td align="left">-v</td>
<td align="left">Lists files as they are processed</td>
</tr>
<tr>
<td align="left">-z</td>
<td align="left">Redirects the output to the gzip command for compression</td>
</tr>
</tbody></table>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -c create new tar file</span></span><br><span class="line"><span class="comment"># -v list process file</span></span><br><span class="line"><span class="comment"># -f output result to file</span></span><br><span class="line">tar -cvf test.tar tmp_folder/</span><br><span class="line"><span class="comment"># a tmp_folder</span></span><br><span class="line"><span class="comment"># a tmp_folder/test11.sh</span></span><br><span class="line"><span class="comment"># a tmp_folder/test2.sh</span></span><br><span class="line"><span class="comment"># a ...</span></span><br><span class="line"></span><br><span class="line">ls <span class="built_in">test</span>*</span><br><span class="line"><span class="comment"># test.tar </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 并不会解压，只是看看</span></span><br><span class="line"><span class="comment"># -t list contents in tar</span></span><br><span class="line">tar -tf test.tar </span><br><span class="line"><span class="comment"># tmp_folder/</span></span><br><span class="line"><span class="comment"># tmp_folder/test11.sh</span></span><br><span class="line"><span class="comment"># tmp_folder/test2.sh</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -xvf test.tar </span><br><span class="line"><span class="comment"># x tmp_folder/</span></span><br><span class="line"><span class="comment"># x tmp_folder/test11.sh</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<p><strong>Tip</strong> 网上下的包很多都是 <code>.tgz</code> 格式的，是 gzipped tar files 的意思，可以用 <code>tar -zxvf filename.tgz</code></p>
<h2 id="Chapter-5-Understanding-the-Shell"><a href="#Chapter-5-Understanding-the-Shell" class="headerlink" title="Chapter 5: Understanding the Shell"></a>Chapter 5: Understanding the Shell</h2><p>这章将学习一些 shell process 相关的知识，子 shell 和 父 shell 的关系等</p>
<h3 id="Exploring-Shell-Types"><a href="#Exploring-Shell-Types" class="headerlink" title="Exploring Shell Types"></a>Exploring Shell Types</h3><p>你默认启动的 shell 是配置在 <code>/etc/passwd</code> 文件中的</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># root:*:0:0:System Administrator:/var/root:/bin/sh</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line">ls -lF /bin/sh </span><br><span class="line"><span class="comment"># -rwxr-xr-x  1 root  wheel  120912 Jan  1  2020 /bin/sh*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 其他一些自带的 sh</span></span><br><span class="line">ls -lF /bin/*sh</span><br><span class="line"><span class="comment"># -r-xr-xr-x  1 root  wheel  1296704 Jan  1  2020 /bin/bash*</span></span><br><span class="line"><span class="comment"># -rwxr-xr-x  1 root  wheel  1106144 Jan  1  2020 /bin/csh*</span></span><br><span class="line"><span class="comment"># -rwxr-xr-x  1 root  wheel   277440 Jan  1  2020 /bin/dash*</span></span><br><span class="line"><span class="comment"># -r-xr-xr-x  1 root  wheel  2585424 Jan  1  2020 /bin/ksh*</span></span><br><span class="line"><span class="comment"># -rwxr-xr-x  1 root  wheel   120912 Jan  1  2020 /bin/sh*</span></span><br><span class="line"><span class="comment"># -rwxr-xr-x  1 root  wheel  1106144 Jan  1  2020 /bin/tcsh*</span></span><br><span class="line"><span class="comment"># -rwxr-xr-x  1 root  wheel  1347856 Jan  1  2020 /bin/zsh*</span></span><br></pre></td></tr></table></figure>

<h3 id="Exploring-Parent-and-Child-Shell-Relationships"><a href="#Exploring-Parent-and-Child-Shell-Relationships" class="headerlink" title="Exploring Parent and Child Shell Relationships"></a>Exploring Parent and Child Shell Relationships</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ps -f               </span><br><span class="line">  <span class="comment"># UID   PID  PPID   C STIME   TTY           TIME CMD</span></span><br><span class="line">  <span class="comment"># 501   667   665   0 10:10AM ttys000    0:03.74 -zsh</span></span><br><span class="line">  <span class="comment"># 501  1454  1433   0 10:10AM ttys001    0:00.99 /bin/zsh -l</span></span><br><span class="line">  <span class="comment"># 501  2027   637   0 10:11AM ttys002    0:00.38 /bin/zsh --login -i</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 zsh 中启动一个 bash</span></span><br><span class="line">bash</span><br><span class="line"></span><br><span class="line">ps -f</span><br><span class="line">  <span class="comment"># UID   PID  PPID   C STIME   TTY           TIME CMD</span></span><br><span class="line">  <span class="comment"># 501   667   665   0 10:10AM ttys000    0:03.74 -zsh</span></span><br><span class="line">  <span class="comment"># 501  1454  1433   0 10:10AM ttys001    0:01.04 /bin/zsh -l</span></span><br><span class="line">  <span class="comment"># 501 12146  1454   0  4:07PM ttys001    0:00.01 bash</span></span><br><span class="line">  <span class="comment"># 501  2027   637   0 10:11AM ttys002    0:00.38 /bin/zsh --login -i</span></span><br><span class="line"><span class="comment"># 可以看到新建了一个 bash process, PPID 是 /bin/zsh 的地址</span></span><br></pre></td></tr></table></figure>

<p>上面的例子中，bash 就是 zsh 的子 shell, 他会复制一部分父 shell 的环境变量，这里会导致一些小问题，第6章会介绍。子 shell 也叫 subshell. subshell 可以再建 subshell. <code>ps --forest</code> 可以显示树桩结构，不过貌似 mac 不支持</p>
<h4 id="Looking-at-process-lists"><a href="#Looking-at-process-lists" class="headerlink" title="Looking at process lists"></a>Looking at process lists</h4><p>一行运行多个 cmd, 使用 semicolon 分割 <code>pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls</code> 但是它并不是一个 process，将它用括号包裹之后，会启动 subshell 运行它 <code>(pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls)</code> 和这个语法相似的还有 <code>&#123; command; &#125;</code> 这个不会启动 subshell. 可以通过打印 <code>$BASH_SUBSHELL</code> 变量来验证</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">pwd</span> ; ls ; <span class="built_in">cd</span> /etc ; <span class="built_in">pwd</span> ; <span class="built_in">cd</span> ; <span class="built_in">pwd</span> ; ls ; <span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span>)</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="built_in">pwd</span> ; ls ; <span class="built_in">cd</span> /etc ; <span class="built_in">pwd</span> ; <span class="built_in">cd</span> ; <span class="built_in">pwd</span> ; ls ; <span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span></span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line">(<span class="built_in">pwd</span>; (<span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span>))</span><br><span class="line"><span class="comment"># /Users/i306454</span></span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<h4 id="Creatively-using-subshells"><a href="#Creatively-using-subshells" class="headerlink" title="Creatively using subshells"></a>Creatively using subshells</h4><h4 id="Investigation-background-mode"><a href="#Investigation-background-mode" class="headerlink" title="Investigation background mode"></a>Investigation background mode</h4><p><code>slepp</code> - 等待 x 秒</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &amp; 符号设置后台运行</span></span><br><span class="line">sleep 3000 &amp;</span><br><span class="line"><span class="comment"># [1] 12603</span></span><br><span class="line">ps</span><br><span class="line"><span class="comment"># 12391 ttys001    0:00.03 bash</span></span><br><span class="line"><span class="comment"># 12603 ttys001    0:00.00 sleep 3000</span></span><br></pre></td></tr></table></figure>

<h4 id="Putting-process-lists-into-the-background"><a href="#Putting-process-lists-into-the-background" class="headerlink" title="Putting process lists into the background"></a>Putting process lists into the background</h4><p>a process list is a command or series of commands executed within a subshell.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(sleep 2 ; <span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span> ; sleep 2)</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line">(sleep 2 ; <span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span> ; sleep 2) &amp;</span><br><span class="line"><span class="comment"># [2] 12658</span></span><br><span class="line">ps</span><br><span class="line"><span class="comment"># 12658 ttys001    0:00.00 bash</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [2]+  Done                    ( sleep 2; echo $BASH_SUBSHELL; sleep 2 )</span></span><br></pre></td></tr></table></figure>

<p>background 运行脚本 not have your terminal tied up with subshell’s I/O</p>
<p>sleep 和 echo 的 sample 只是示范，工作中，你可能会后台执行 tar <code>(tar -cf Rich.tar /home/rich ; tar -cf My.tar /home/christine)&amp;</code></p>
<h4 id="Looking-at-co-processing"><a href="#Looking-at-co-processing" class="headerlink" title="Looking at co-processing"></a>Looking at co-processing</h4><p>Co-processing does two thins at the same time. coproc 会起一个后台的 job 运行对应的命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">coproc sleep 10</span><br><span class="line"><span class="comment"># [2] 12746</span></span><br><span class="line"><span class="built_in">jobs</span> </span><br><span class="line"><span class="comment"># [1]-  Running                 sleep 3000 &amp;</span></span><br><span class="line"><span class="comment"># [2]+  Done                    coproc COPROC sleep 10</span></span><br></pre></td></tr></table></figure>

<p>默认的 coproc 起的 job 名字为 COPRO, 你也可以指定名字, curly bracket({) 换括号后面要接空格，语法规定。一般用默认的名字就行，只有当你需要和他们通信时，才会特别的取一个名字</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">coproc My_Job &#123; sleep 10; &#125;</span><br><span class="line"><span class="comment"># [2] 12848</span></span><br><span class="line"><span class="built_in">jobs</span></span><br><span class="line"><span class="comment"># [2]+  Running                 coproc My_Job &#123; sleep 10; &#125; &amp;</span></span><br></pre></td></tr></table></figure>

<p>后面还跟了一个 <code>ps --forest</code> 的实验，没法做 ╮(￣▽￣””)╭</p>
<p>Just remember taht spawning a subshell can be <strong>expensive and slow</strong>. Creating nested subshells is even more so!</p>
<h3 id="Understanding-Shell-Built-In-Commands"><a href="#Understanding-Shell-Built-In-Commands" class="headerlink" title="Understanding Shell Built-In Commands"></a>Understanding Shell Built-In Commands</h3><p>Built-in commands and non-built-in commands</p>
<h4 id="Looking-at-external-commands"><a href="#Looking-at-external-commands" class="headerlink" title="Looking at external commands"></a>Looking at external commands</h4><p>external command 也被叫做 filesystem command, 是在 bash shell 之外的，通常放在 /bin, /usr/bin, /sbin 或者 /usr/sbin</p>
<p><code>ps</code> 就是一个 external 的 command</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> ps </span><br><span class="line"><span class="comment"># /bin/ps</span></span><br><span class="line"><span class="built_in">type</span> -a ps </span><br><span class="line"><span class="comment"># ps is /bin/ps</span></span><br></pre></td></tr></table></figure>

<p>每当 external command 执行时，都会创建一个 child process, 这种行为叫做 forking.</p>
<h4 id="Looking-at-built-in-comands"><a href="#Looking-at-built-in-comands" class="headerlink" title="Looking at built-in comands"></a>Looking at built-in comands</h4><p>Built-in commands 不需要 child process 就能执行。他们是 shell 工具集的一部分。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> <span class="built_in">exit</span></span><br><span class="line"><span class="comment"># exit is a shell builtin</span></span><br><span class="line"><span class="built_in">type</span> <span class="built_in">cd</span></span><br><span class="line"><span class="comment"># cd is a shell builtin</span></span><br></pre></td></tr></table></figure>

<p>他们不需要 fork 或者运行文件，所以他们更快，效率更高。</p>
<p>有些 cmd 有两个版本，which 只会显示 external command</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> -a <span class="built_in">echo</span> </span><br><span class="line"><span class="comment"># echo is a shell builtin</span></span><br><span class="line"><span class="comment"># echo is /bin/echo</span></span><br><span class="line"><span class="built_in">which</span> <span class="built_in">echo</span> </span><br><span class="line"><span class="comment"># /bin/echo</span></span><br></pre></td></tr></table></figure>

<h4 id="Using-the-history-command"><a href="#Using-the-history-command" class="headerlink" title="Using the history command"></a>Using the history command</h4><p>显示 cmd 的历史记录</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> </span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line">  <span class="comment">#  42  code test19</span></span><br><span class="line">  <span class="comment">#  43  ./test19</span></span><br><span class="line">  <span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<p><strong>Tip</strong> 设置环境变量 HISTSIZE 改变数量上限</p>
<p>使用 <code>!!</code> 执行上一条命令, bash 的历史记录会存在 <code>.bash_history</code> 文件中，当前 shell 的历史存在内存中，退出后存到文件中，通过 <code>history -a</code> 强制立刻写入文件</p>
<h4 id="Using-command-aliases"><a href="#Using-command-aliases" class="headerlink" title="Using command aliases"></a>Using command aliases</h4><p>为了简化输入，有了别名(alias)。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示自带的别名</span></span><br><span class="line"><span class="built_in">alias</span> -p</span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> li=<span class="string">&#x27;ls -li&#x27;</span></span><br><span class="line">li</span><br><span class="line"><span class="comment"># total 8</span></span><br><span class="line"><span class="comment">#  5091820 drwx------@  3 i306454  staff    96 Aug 20  2020 Applications</span></span><br></pre></td></tr></table></figure>

<h2 id="Using-Linux-Environment-Variables"><a href="#Using-Linux-Environment-Variables" class="headerlink" title="Using Linux Environment Variables"></a>Using Linux Environment Variables</h2><p>Environment variables are set in lots of places on the Linux system, and you should know where these places are.</p>
<p>这章将介绍环境变量存储的位置，怎么创建自己的环境变量，还介绍怎么使用 variable arrays.</p>
<h3 id="Exploring-Environment-Variables"><a href="#Exploring-Environment-Variables" class="headerlink" title="Exploring Environment Variables"></a>Exploring Environment Variables</h3><p>bash shell 使用 environment variable 存储 shell session 和 工作环境相关的信息。环境变量分两种</p>
<ul>
<li>Gloabl variables</li>
<li>Local variables</li>
</ul>
<h4 id="Looing-at-global-environment-variables"><a href="#Looing-at-global-environment-variables" class="headerlink" title="Looing at global environment variables"></a>Looing at global environment variables</h4><p>Gloabl variables 是所有 shell 都可见的，Local variables 是当前 shell 才可见的。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 gloabl variables</span></span><br><span class="line">printenv</span><br><span class="line"><span class="comment"># SHELL=/bin/zsh</span></span><br><span class="line"><span class="comment"># LSCOLORS=Gxfxcxdxbxegedabagacad</span></span><br><span class="line"><span class="comment"># PIPENV_VENV_IN_PROJECT=1</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出单个变量</span></span><br><span class="line">printenv HOME</span><br><span class="line"><span class="comment"># /Users/i306454</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># env 貌似不能输出单个变量</span></span><br><span class="line">env HOME</span><br><span class="line"><span class="comment"># env: HOME: No such file or directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 还可以用 echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$HOME</span></span><br><span class="line"><span class="comment"># /Users/i306454</span></span><br></pre></td></tr></table></figure>

<h4 id="Looing-at-local-environment-variables"><a href="#Looing-at-local-environment-variables" class="headerlink" title="Looing at local environment variables"></a>Looing at local environment variables</h4><p>Linux 默认为每个 shell 定义基本的 local variables, 当然你也可以自定。系统中并没有输出本地变量的命令，但是有 set 可以输出 global + local</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br><span class="line"><span class="comment"># &#x27;!&#x27;=0</span></span><br><span class="line"><span class="comment"># &#x27;#&#x27;=0</span></span><br><span class="line"><span class="comment"># &#x27;$&#x27;=13377</span></span><br></pre></td></tr></table></figure>

<p>env vs printenv vs set:</p>
<ul>
<li>set = global + local + user-defined variables, result is sorted</li>
<li>env has additional functionality that printenv not have</li>
</ul>
<h3 id="Setting-User-Defined-Variables"><a href="#Setting-User-Defined-Variables" class="headerlink" title="Setting User-Defined Variables"></a>Setting User-Defined Variables</h3><h4 id="Setting-local-user-defined-variables"><a href="#Setting-local-user-defined-variables" class="headerlink" title="Setting local user-defined variables"></a>Setting local user-defined variables</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"></span><br><span class="line">my_var=Hello</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># Hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 包含空格的，需要用单/双引号包裹</span></span><br><span class="line">my_var=Hello world</span><br><span class="line"><span class="comment"># bash: world: command not found</span></span><br><span class="line">my_var=<span class="string">&#x27;Hello world&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># Hello world</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新启一个 bash, 访问不到之前定义的 local variable</span></span><br><span class="line">bash</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>user-defined local varibale 使用小写，global 的使用大写。Linux 中的变量是区分大小写的。</p>
<h4 id="Setting-global-environment-variables"><a href="#Setting-global-environment-variables" class="headerlink" title="Setting global environment variables"></a>Setting global environment variables</h4><p>创建 gloabl variable 的方法：先创建一个 local variable，然后 export 成一个 global environment</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_var=<span class="string">&quot;I am Gloabl now&quot;</span></span><br><span class="line"><span class="built_in">export</span> my_var</span><br><span class="line">bash</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># I am Gloabl now</span></span><br></pre></td></tr></table></figure>

<p>但是，在 child shell 中修改 global variable 并<strong>不会</strong>影响到 parent shell 中的值，这个好神奇, 即使用 export 在 subshell 中修改也不行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">my_var=<span class="string">&quot;Null&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># Null</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># exit</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># I am Gloabl now</span></span><br><span class="line"></span><br><span class="line">bash </span><br><span class="line"><span class="built_in">export</span> my_var=<span class="string">&quot;Null&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># Null</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># exit</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># I am Gloabl now</span></span><br></pre></td></tr></table></figure>

<h4 id="Removing-Environment-Variables"><a href="#Removing-Environment-Variables" class="headerlink" title="Removing Environment Variables"></a>Removing Environment Variables</h4><p>使用 <code>unset</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment"># I am Gloabl now</span></span><br><span class="line"><span class="built_in">unset</span> my_var</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$my_var</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><strong>Tip</strong> 当你向对变量做什么的时候，不需要加 $, 当你想要用变量做什么的时候，需要加 $. printenv 除外。</p>
<p>和之前的规则一样，当你在 subshell 中 unset 一个 global variable 时，这个 unset 只在 subshell 中生效，parent shell 中变量还是存在的</p>
<h4 id="Uncovering-Default-Shell-Environment-Variables"><a href="#Uncovering-Default-Shell-Environment-Variables" class="headerlink" title="Uncovering Default Shell Environment Variables"></a>Uncovering Default Shell Environment Variables</h4><p>Bash shell 除了自己定义一些环境变量外，还从 Unix Bourne shell 那边继承了一下变量过来。</p>
<p>The bash Shell Bourne Variables</p>
<table>
<thead>
<tr>
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CDPATH</td>
<td align="left">A colon-separated list of directories used as a search path for the cd command</td>
</tr>
<tr>
<td align="left">HOME</td>
<td align="left">The current user’s home directory</td>
</tr>
<tr>
<td align="left">IFS</td>
<td align="left">A list of characters that separate fields used by the shell to split text strings</td>
</tr>
<tr>
<td align="left">MAIL</td>
<td align="left">The filename fo the current user’s mailbox(The bash shell checks this file for new mail.)</td>
</tr>
<tr>
<td align="left">MAILPATH</td>
<td align="left">A colon-separated list of multiple filenames for the current user’s mailbox(The bash shell checks each file in this list for new mail.)</td>
</tr>
<tr>
<td align="left">OPTARG</td>
<td align="left">The value of the last option argument processed by the getopt command</td>
</tr>
<tr>
<td align="left">OPTIND</td>
<td align="left">The index value of the last option argument processed by the getopt command</td>
</tr>
<tr>
<td align="left">PATH</td>
<td align="left">A colon-separated list of directories where shell looks for commands</td>
</tr>
<tr>
<td align="left">PS1</td>
<td align="left">The primary shell command line interface prompt string</td>
</tr>
<tr>
<td align="left">PS2</td>
<td align="left">The sceondary shell command line interface prompt string</td>
</tr>
</tbody></table>
<p>除了这些，bash shell 还提供了一些自定义的变量, 太长了，不列了。</p>
<h3 id="Setting-the-PATH-Environment-Variable"><a href="#Setting-the-PATH-Environment-Variable" class="headerlink" title="Setting the PATH Environment Variable"></a>Setting the PATH Environment Variable</h3><p>当你在终端输入一个 external command 时，系统就会根据 PATH 中的路径找命令. 路径用冒号分割。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line"><span class="comment"># /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加路径</span></span><br><span class="line">PATH=<span class="variable">$PATH</span>:/home/jack/Scripts</span><br></pre></td></tr></table></figure>

<p><strong>Tips</strong> 如果 subshell 中也要用到新加的路劲，你就要 export 它。有一个技巧是，可以在 PATH 中添加当前路径 <code>PATH=$PATH:.</code></p>
<h4 id="Locating-System-Environment-Variables"><a href="#Locating-System-Environment-Variables" class="headerlink" title="Locating System Environment Variables"></a>Locating System Environment Variables</h4><p>前面我们介绍了如何使用这些变量，那么怎么将他们做持久化呢。当你启动一个 shell 的时候，系统会到 setup file or environment files 里面去加载这些变量。</p>
<p>你可以通过三种方式启动一个 bash shell:</p>
<ul>
<li>As a default login shell at login time</li>
<li>As an interactive shell that is started by spawning a subshell</li>
<li>As a non-inactive shell to run a script</li>
</ul>
<h4 id="Understanding-the-login-shell-process"><a href="#Understanding-the-login-shell-process" class="headerlink" title="Understanding the login shell process"></a>Understanding the login shell process</h4><p>当你登陆系统的时候，bash shell 开启了一个 login shell. login shell 会从一下五个文件中加载配置：</p>
<ul>
<li>/etc/profile</li>
<li>$HOME/.bash_profile</li>
<li>$HOME/.bashrc</li>
<li>$HOME/.bash_login</li>
<li>$HOME/.profile</li>
</ul>
<p><code>/etc/profile</code> 是所有用户登陆时都会执行的文件，其他的几个就是用户可以自定一的。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/profile</span><br><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line"><span class="built_in">export</span> PAGER=less</span><br><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\h:\w\$ &#x27;</span></span><br><span class="line"><span class="built_in">umask</span> 022</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> script <span class="keyword">in</span> /etc/profile.d/*.sh ; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ -r <span class="variable">$script</span> ] ; <span class="keyword">then</span></span><br><span class="line">                . <span class="variable">$script</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>脚本中循环处理 profile.d 文件夹下的内容，这个文件夹是专门用来放一下 application-specific startup file taht is executed by the shell when you log in.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ls -lF /etc/profile.d/</span><br><span class="line"><span class="comment"># total 8</span></span><br><span class="line"><span class="comment"># -rw-r--r--    1 root     root           295 May 30  2020 color_prompt</span></span><br><span class="line"><span class="comment"># -rw-r--r--    1 root     root            61 May 30  2020 locale.sh</span></span><br></pre></td></tr></table></figure>

<p>自定义位置文件加载顺序如下，第一个被找到后，其他的就不加载了</p>
<ul>
<li>$HOME/.bash_profile</li>
<li>$HOME/.bash_login</li>
<li>$HOME/.profile</li>
</ul>
<p><code>.bashrc</code> 不在其中，因为它会在其他 process 中被调用</p>
<h4 id="Understanding-the-interactive-shell-process"><a href="#Understanding-the-interactive-shell-process" class="headerlink" title="Understanding the interactive shell process"></a>Understanding the interactive shell process</h4><p>当你在终端输入 bash 时，你会启动一个 interactive shell. 当你启动 interactive shell 的时候，它不会加载 /etc/profile 中的内容。它只会 check .bashrc 中的配置。</p>
<p>.bashrc 做两件事</p>
<ol>
<li>check for a common bashrc file in /etc directory</li>
<li>provides a place for user to enter personal command alias + provide script functions</li>
</ol>
<h4 id="Understanding-the-non-interactive-shell-process"><a href="#Understanding-the-non-interactive-shell-process" class="headerlink" title="Understanding the non-interactive shell process"></a>Understanding the non-interactive shell process</h4><p>没遇到过使用场景，先 pass</p>
<h4 id="Making-environment-variables-persistent"><a href="#Making-environment-variables-persistent" class="headerlink" title="Making environment variables persistent"></a>Making environment variables persistent</h4><p>将自定义的变量存在 $HOME/.bashrc 是一个极好的习惯</p>
<h3 id="Learning-about-Variable-Arrays"><a href="#Learning-about-Variable-Arrays" class="headerlink" title="Learning about Variable Arrays"></a>Learning about Variable Arrays</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义数组 </span></span><br><span class="line">mytest=(one two three four five)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$mytest</span></span><br><span class="line"><span class="comment"># one</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;mytest[2]&#125;</span></span><br><span class="line"><span class="comment"># three</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;mytest[*]&#125;</span></span><br><span class="line"><span class="comment"># one two three four five</span></span><br><span class="line"></span><br><span class="line">mytest[2]=seven</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;mytest[*]&#125;</span></span><br><span class="line">one two seven four five</span><br></pre></td></tr></table></figure>

<p>可以通过 unset 移除某个元素，但是移除之后，print 不会显示，但是它位置还是占着的</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> mytest[2]</span><br><span class="line"><span class="variable">$&#123;mytest[*]&#125;</span></span><br><span class="line"><span class="comment"># one two seven four five</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;mytest[2]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;mytest[3]&#125;</span></span><br><span class="line"><span class="comment"># four</span></span><br><span class="line"><span class="built_in">unset</span> mytest</span><br><span class="line">bash-5.1$ <span class="built_in">echo</span> <span class="variable">$&#123;mytest[*]&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>有时候 arrays 的使用挺复杂的，一般我们不再脚本中使用它，而且兼容性也不是很好。</p>
<h2 id="Understanding-Linux-File-Permissions"><a href="#Understanding-Linux-File-Permissions" class="headerlink" title="Understanding Linux File Permissions"></a>Understanding Linux File Permissions</h2><h3 id="Linux-Security"><a href="#Linux-Security" class="headerlink" title="Linux Security"></a>Linux Security</h3><p>Linux 系统的 security 核心是 account 这个概念。每个访问的用户都有一个唯一的账户，权限就是根据账户设置的。下面将介绍一些账户相关的文件和工具包。</p>
<h4 id="The-etc-passwd-file"><a href="#The-etc-passwd-file" class="headerlink" title="The /etc/passwd file"></a>The /etc/passwd file</h4><p>/etc/passed 文件中存储这一些 UID 相关的信息，root 是管理员账户，有固定的 UID 0.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br><span class="line"><span class="comment"># root:*:0:0:System Administrator:/var/root:/bin/sh</span></span><br><span class="line"><span class="comment"># daemon:*:1:1:System Services:/var/root:/usr/bin/false</span></span><br><span class="line"><span class="comment"># _uucp:*:4:4:Unix to Unix Copy Protocol:/var/spool/uucp:/usr/sbin/uucico</span></span><br></pre></td></tr></table></figure>

<p>系统还会为一些非用户的 process 创建 account，这些叫做 system accounts.</p>
<p>All services that run in background mode need to be logged in to the Linux system under a system user account.</p>
<p>Linux 将 500 以下的 UID 预留给了 system accounts.</p>
<p>passwd 文件中的信息包括</p>
<ul>
<li>The login name</li>
<li>The password for the user</li>
<li>The numberical UID of the user account</li>
<li>The numberical group ID(GID) of the user account</li>
<li>A text description of the user account(called the comment field)</li>
<li>The location of the HOME directory for the user</li>
<li>The default shell for the user</li>
</ul>
<p>password 字段为 x, 以前放置的还是加密后的 pwd 后来为了安全统一放到 /etc/shadow 下面去了</p>
<h4 id="The-etc-shadow-file"><a href="#The-etc-shadow-file" class="headerlink" title="The /etc/shadow file"></a>The /etc/shadow file</h4><p>只有 root user 可以访问 shadow 文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker bash 中的内容</span></span><br><span class="line">cat /etc/shadow</span><br><span class="line"><span class="comment"># root:!::0:::::</span></span><br><span class="line"><span class="comment"># bin:!::0:::::</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 书上的例子</span></span><br><span class="line"><span class="comment"># rich:$1$.FfcK0ns$f1UgiyHQ25wrB/hykCn020:11627:0:99999:7:::</span></span><br></pre></td></tr></table></figure>

<p>shadow 中的信息包括</p>
<ul>
<li>The login name corresponding to the login name in the /etc/passwd file</li>
<li>The encrypted password</li>
<li>The number of days since January 1, 1970, that the password was last changed</li>
<li>The minimun number of days before the password can be changed</li>
<li>The number of days before the password must be changed</li>
<li>The number of days before the password expiration that the user is warned to change the password</li>
<li>The number of days after a password expires before the account will be disabled</li>
<li>The date(stored as the number of days since January 1, 1970) since the user account was disabled</li>
<li>A filed reserved for feature use</li>
</ul>
<h4 id="Adding-a-new-user"><a href="#Adding-a-new-user" class="headerlink" title="Adding a new user"></a>Adding a new user</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 useradd 的默认配置</span></span><br><span class="line">useradd -D</span><br><span class="line"><span class="comment"># GROUP=100</span></span><br><span class="line"><span class="comment"># HOME=/home</span></span><br><span class="line"><span class="comment"># INACTIVE=-1</span></span><br><span class="line"><span class="comment"># EXPIRE=</span></span><br><span class="line"><span class="comment"># SHELL=/bin/sh</span></span><br><span class="line"><span class="comment"># SKEL=/etc/skel</span></span><br><span class="line"><span class="comment"># CREATE_MAIL_SPOOL=no</span></span><br></pre></td></tr></table></figure>

<p>当你在 useradd 的时候没有指定任何参数的时候，就会按照这个 default 的配置添加新用户。default 包含以下信息</p>
<ul>
<li>The user is added to a common group with group ID 100</li>
<li>The new user has a HOME account created in the directory /home/loginname</li>
<li>The account can’t be disabled when the password expires</li>
<li>The new account can’t be set to expire at a set date</li>
<li>The new account users the bin sh as the default shell</li>
<li>The system copies the contents of the /etc/skl directory to the user’s HOME directory</li>
<li>The system creates a file in the mail directory for the user account to receive mail</li>
</ul>
<p>倒数第二个 item 说的是，在创建用户的时候，admin 可以预先设置一个模版</p>
<p>默认情况下，useradd 并不会为用户创建 HOME 目录，需要添加 <code>-m</code> 参数</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ls -l /etc/skel</span><br><span class="line"><span class="comment"># total 16</span></span><br><span class="line"><span class="comment"># drwxr-xr-x+ 2 root root 4096 Aug 11  2017 Desktop</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 root root 8980 Apr 20  2016 examples.desktop</span></span><br><span class="line"></span><br><span class="line">useradd -m I306454</span><br><span class="line">ls -l /home</span><br><span class="line"><span class="comment"># total 28</span></span><br><span class="line"><span class="comment"># drwxr-xr-x+  5 fuser    fuser     4096 Aug 11  2017 fuser</span></span><br><span class="line"><span class="comment"># drwxr-xr-x+  4 I306454  I306454   4096 Jun  5 14:48 I306454</span></span><br><span class="line">ls -lF /home/I306454/</span><br><span class="line"><span class="comment"># total 16</span></span><br><span class="line"><span class="comment"># drwxr-xr-x+ 2 I306454 I306454 4096 Aug 11  2017 Desktop/</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 I306454 I306454 8980 Apr 20  2016 examples.desktop</span></span><br></pre></td></tr></table></figure>

<p>The useradd Command Line Parameters</p>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-c comment</td>
<td align="left">Adds text to the new user’s comment field</td>
</tr>
<tr>
<td align="left">-d home_dir</td>
<td align="left">Specifies a different name for the HOME directory other than the login name</td>
</tr>
<tr>
<td align="left">-e expire_date</td>
<td align="left">Specifies a date, in YYYY-MM-DD format, when the account will expire</td>
</tr>
<tr>
<td align="left">-f inactive_days</td>
<td align="left">Specifies the number of days after a password expires when the account will be disabled. A value of 0 disables the accunt as soon as the password expires; a value of -1 disables this feature</td>
</tr>
<tr>
<td align="left">-g initial_group</td>
<td align="left">Specifies the group name or GID of the user’s login group</td>
</tr>
<tr>
<td align="left">-G group</td>
<td align="left">Specifies one or more supplementary groups the user belongs to</td>
</tr>
<tr>
<td align="left">-k</td>
<td align="left">Gopies the /etc/skel directory contents into the user’s HOME directory(must use -m as well)</td>
</tr>
<tr>
<td align="left">-m</td>
<td align="left">Create the user’s HOME directory</td>
</tr>
<tr>
<td align="left">-M</td>
<td align="left">Doesn’t create a user’s HOME directory(user if the default setting is to create one)</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">Create a new group using the same name as the user’s login name</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">Creates a system account</td>
</tr>
<tr>
<td align="left">-p passwd</td>
<td align="left">Specifies a default password for the user account</td>
</tr>
<tr>
<td align="left">-s shell</td>
<td align="left">Specifies the default login shell</td>
</tr>
<tr>
<td align="left">-u</td>
<td align="left">Specifies a unique UID for the account</td>
</tr>
</tbody></table>
<p>如果你有很多默认配置需要修改，那么你可以通过 <code>useradd -D</code> 修改这些默认配置</p>
<h4 id="Removing-a-user"><a href="#Removing-a-user" class="headerlink" title="Removing a user"></a>Removing a user</h4><p><code>userdel I306454</code> 默认情况下并不会删除对应用户的 HOME 目录。你需要添加 <code>-r</code> 参数达到这个效果</p>
<h4 id="Modifying-a-user"><a href="#Modifying-a-user" class="headerlink" title="Modifying a user"></a>Modifying a user</h4><p>Linux 提供了一些不同的工具包来修改用户信息</p>
<p>User account Modification Utilities</p>
<table>
<thead>
<tr>
<th align="left">Command</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">usermod</td>
<td align="left">Edits user accout fields, as well as specifying primary and seconday group membership</td>
</tr>
<tr>
<td align="left">passwd</td>
<td align="left">Changes the password for an existing user</td>
</tr>
<tr>
<td align="left">chpassed</td>
<td align="left">Reads a file of login name and password pairs, and updates the passwords</td>
</tr>
<tr>
<td align="left">chage</td>
<td align="left">Chagnes the password’s expiration date</td>
</tr>
<tr>
<td align="left">chfn</td>
<td align="left">Changes the user account’s comment information</td>
</tr>
<tr>
<td align="left">chsh</td>
<td align="left">Changes the user account’s default shell</td>
</tr>
</tbody></table>
<p>感觉 <code>usermod</code> 已经具备了所有账户相关的基本操作了</p>
<p>后面有这些 cmd 的用法简介，但是我暂时用不到，先不摘录了</p>
<h3 id="Using-Linux-Groups"><a href="#Using-Linux-Groups" class="headerlink" title="Using Linux Groups"></a>Using Linux Groups</h3><p>Group 可以以群的单位管理权限，每个 group 都有特定的 GID</p>
<h4 id="The-etc-group-file"><a href="#The-etc-group-file" class="headerlink" title="The /etc/group file"></a>The /etc/group file</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/group</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># jenkins:x:58116:</span></span><br><span class="line"><span class="comment"># mfe:x:58117:</span></span><br><span class="line"><span class="comment"># I306454:x:58118:</span></span><br></pre></td></tr></table></figure>

<ul>
<li>The gorup name</li>
<li>The group password</li>
<li>The GID</li>
<li>The list of user accounts that belong to the group</li>
</ul>
<p>你可以通过 usermod 命令添加用户进组</p>
<h4 id="Creating-new-groups"><a href="#Creating-new-groups" class="headerlink" title="Creating new groups"></a>Creating new groups</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">groupadd shared</span><br><span class="line">tail /etc/group</span><br><span class="line"><span class="comment"># I306454:x:58118:</span></span><br><span class="line"><span class="comment"># shared:x:58119:</span></span><br><span class="line"></span><br><span class="line">usermod -G shared I306454</span><br><span class="line">tail /etc/group</span><br><span class="line"><span class="comment"># shared:x:58119:I306454</span></span><br></pre></td></tr></table></figure>

<p>PS: 如果你改变用户组时，用户已经 login， 该用户需要重新 login 使之生效</p>
<p>PPS: 如果你用 -g 新组会代替旧组，如果 -G 则是多个组并存</p>
<h4 id="Modifying-groups"><a href="#Modifying-groups" class="headerlink" title="Modifying groups"></a>Modifying groups</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">groupmod -n sharing shared</span><br><span class="line">tail /etc/group</span><br><span class="line"><span class="comment"># sharing:x:58119:I306454</span></span><br></pre></td></tr></table></figure>

<h3 id="Decoding-File-Permissions"><a href="#Decoding-File-Permissions" class="headerlink" title="Decoding File Permissions"></a>Decoding File Permissions</h3><h4 id="Using-file-permission-symbols"><a href="#Using-file-permission-symbols" class="headerlink" title="Using file permission symbols"></a>Using file permission symbols</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ls -l </span><br><span class="line"><span class="comment"># total 10192</span></span><br><span class="line"><span class="comment"># -rwxr--r--   1 i306454  staff      159 May 30 15:56 badtest</span></span><br><span class="line"><span class="comment"># -rw-r--r--   1 i306454  staff       24 Jun  4 13:57 file1</span></span><br></pre></td></tr></table></figure>

<p><code>-rwxr--r--</code> 即为文件的权限信息</p>
<p>第一个字符表示文件类型</p>
<ul>
<li><ul>
<li>for files</li>
</ul>
</li>
<li>d for directories</li>
<li>l for links</li>
<li>c for character devices</li>
<li>b for block devices</li>
<li>n for network devices</li>
</ul>
<p>后面的字符都是权限</p>
<ul>
<li>r for read permission</li>
<li>w for write permission</li>
<li>x for execute permission</li>
<li><ul>
<li>denied</li>
</ul>
</li>
</ul>
<p>权限三个一组，分别代表 owner/group/everyone, owner 和 group 分别在 ls -l 后面有写出来</p>
<h4 id="Default-file-permissions"><a href="#Default-file-permissions" class="headerlink" title="Default file permissions"></a>Default file permissions</h4><p>umask 设置了所有文件和目录的默认权限</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">touch ttt</span><br><span class="line">ls -l ttt</span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  0 Jun  5 15:43 ttt</span></span><br><span class="line"><span class="built_in">umask</span> </span><br><span class="line"><span class="comment"># 0022</span></span><br></pre></td></tr></table></figure>

<p>umask 结果的第一位表示 sticky bit, 后三位是权限的 octal mode 表示</p>
<table>
<thead>
<tr>
<th align="left">Permissions</th>
<th align="left">Binary</th>
<th align="left">Octal</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">—</td>
<td align="left">000</td>
<td align="left">0</td>
<td align="left">No permissions</td>
</tr>
<tr>
<td align="left">–x</td>
<td align="left">001</td>
<td align="left">1</td>
<td align="left">Execute-only permission</td>
</tr>
<tr>
<td align="left">-w-</td>
<td align="left">010</td>
<td align="left">2</td>
<td align="left">Write-only permission</td>
</tr>
<tr>
<td align="left">-wx</td>
<td align="left">011</td>
<td align="left">3</td>
<td align="left">Write and execute permissions</td>
</tr>
<tr>
<td align="left">r–</td>
<td align="left">100</td>
<td align="left">4</td>
<td align="left">Read-only permission</td>
</tr>
<tr>
<td align="left">r-x</td>
<td align="left">101</td>
<td align="left">5</td>
<td align="left">Read and execute permissions</td>
</tr>
<tr>
<td align="left">rw-</td>
<td align="left">110</td>
<td align="left">6</td>
<td align="left">Read and write permissions</td>
</tr>
<tr>
<td align="left">rwx</td>
<td align="left">111</td>
<td align="left">7</td>
<td align="left">Read, write and execute permissions</td>
</tr>
</tbody></table>
<p>文件的 full 权限是 666，文件夹是 777. umask 可以理解为在这个 full 权限的基础上减去一个值。</p>
<p>之前我们 touch 的文件 <code>rw-r--r--</code> 是 644 = 666 - 022</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -ld newdir</span><br><span class="line"><span class="comment"># drwxr-xr-x  2 i306454  staff  64 Jun  5 15:56 newdir</span></span><br></pre></td></tr></table></figure>

<p><code>drwxr-xr-x</code> 755 = 777 - 022</p>
<h3 id="Changing-Security-Settings"><a href="#Changing-Security-Settings" class="headerlink" title="Changing Security Settings"></a>Changing Security Settings</h3><p><code>chmod options mode file</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls -l ttt</span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  0 Jun  5 15:43 ttt</span></span><br><span class="line">chmod 760 ttt</span><br><span class="line">ls -l ttt</span><br><span class="line"><span class="comment"># -rwxrw----  1 i306454  staff  0 Jun  5 15:43 ttt</span></span><br></pre></td></tr></table></figure>

<p>除了数字表示，你也可以用字母表示</p>
<p>[ugoa…][+-=][rwxXstugo…]</p>
<ul>
<li><p>u for the user</p>
</li>
<li><p>g for the group</p>
</li>
<li><p>o for others(everyone else)</p>
</li>
<li><p>a for all of the above</p>
</li>
<li><ul>
<li>add perm</li>
</ul>
</li>
<li><ul>
<li>subtract perm</li>
</ul>
</li>
<li><p>= set perm</p>
</li>
<li><p>X assigns execute permissions only if the object is a directory or if it already has execute permissions</p>
</li>
<li><p>s sets the UID or GID on execution</p>
</li>
<li><p>t saves program text</p>
</li>
<li><p>u sets the permissions to the owner’s permission</p>
</li>
<li><p>g sets the permissions to the group’s permission</p>
</li>
<li><p>o sets the permissions to the other’s permission</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chmod o+r ttt</span><br><span class="line">ls -l ttt</span><br><span class="line"><span class="comment"># -rwxrw-r--  1 i306454  staff  0 Jun  5 15:43 ttt</span></span><br><span class="line"></span><br><span class="line">chmod u-x ttt</span><br><span class="line">ls -l ttt</span><br><span class="line"><span class="comment"># -rw-rw-r--  1 i306454  staff  0 Jun  5 15:43 ttt</span></span><br></pre></td></tr></table></figure>

<h4 id="Changing-ownership"><a href="#Changing-ownership" class="headerlink" title="Changing ownership"></a>Changing ownership</h4><p>改变文件 owner，比如离开组织的时候，做交接。使用 <code>chown options owner[.group] file</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只改 owner</span></span><br><span class="line">chown dan newfile</span><br><span class="line"><span class="comment"># 同时改变 owner 和 group</span></span><br><span class="line">chown dan.shared newfile</span><br><span class="line"><span class="comment"># 只改 group</span></span><br><span class="line">chown .shared newfile</span><br></pre></td></tr></table></figure>

<p>PS: 只有 root 可以改变文件的 owner, 任何 user 可以将文件组改变，重要这个user 是改变前后组的成员</p>
<h3 id="Sharing-Files"><a href="#Sharing-Files" class="headerlink" title="Sharing Files"></a>Sharing Files</h3><p>这个场景没用到过，以后再说</p>
<h2 id="Chapter-8-Managing-Filesystems"><a href="#Chapter-8-Managing-Filesystems" class="headerlink" title="Chapter 8: Managing Filesystems"></a>Chapter 8: Managing Filesystems</h2><p>这章的内容我大致浏览了一下，作为了解即可。他介绍了很多系统类型，ext3 什么的以前见过，但是不明所以，刚好可以学习一下。</p>
<h3 id="Exploring-Linux-Filesystems"><a href="#Exploring-Linux-Filesystems" class="headerlink" title="Exploring Linux Filesystems"></a>Exploring Linux Filesystems</h3><p>filesystem: 用于存储文件，管理存储设备</p>
<h4 id="Understanding-the-basic-Linux-filesystems"><a href="#Understanding-the-basic-Linux-filesystems" class="headerlink" title="Understanding the basic Linux filesystems"></a>Understanding the basic Linux filesystems</h4><p>最原始的 Linux 文件系统间的的仿造了 Unix 文件系统，下面我们会介绍这个文件系统的发现过程</p>
<ul>
<li>ext(extended filesystem) + inode(track info about files in directory) </li>
<li>ext 系统中文件最大只能 2G。 ext2 是 ext 的升级版，最大文件到 32G. 其他的特性就不举例了</li>
<li>Journaling filesystems, 貌似叫日志系统，算是文件更新到 inode 前的临时文件</li>
<li>ext3, 2001年加入 kernel</li>
<li>ext4, 2008年加入 kernel</li>
<li>Reiser filesystem, in 2001, Hans Reiser created the first journaling filesystem for Linux, call ReiserFS.</li>
<li>Journaled File System(JFS) 可能是最老的 journaling filesystem, IBM 1990 年开发</li>
</ul>
<p>其他暂时不看了。。。</p>
<h2 id="Chapter-9-Installing-Software"><a href="#Chapter-9-Installing-Software" class="headerlink" title="Chapter 9: Installing Software"></a>Chapter 9: Installing Software</h2><h2 id="Chapter-10-Working-with-Editors"><a href="#Chapter-10-Working-with-Editors" class="headerlink" title="Chapter 10: Working with Editors"></a>Chapter 10: Working with Editors</h2><p>第 9，10 章也没啥好看的，说的是软件安装和编辑器，跳过</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jack Zheng
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://jack-zheng.github.io/hexo/2021/05/31/LSCASSB-parti-the-linux-command-line/" title="Linux命令行与shell脚本编程大全 第一章 Linux 命令行">https://jack-zheng.github.io/hexo/2021/05/31/LSCASSB-parti-the-linux-command-line/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/hexo/tags/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8Eshell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E5%A4%A7%E5%85%A8-3rd/" rel="tag"># Linux命令行与shell脚本编程大全 3rd</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/hexo/2021/05/24/LSCASSB-partii-shell-scripting-basics/" rel="next" title="Linux命令行与shell脚本编程大全 第二章 Shell 脚本基础知识">
                  <i class="fa fa-chevron-left"></i> Linux命令行与shell脚本编程大全 第二章 Shell 脚本基础知识
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/hexo/2021/06/05/LSCASSB-partiii-advanced-shell-scripting/" rel="prev" title="Linux命令行与shell脚本编程大全 第三章 Shell 高级用法">
                  Linux命令行与shell脚本编程大全 第三章 Shell 高级用法 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-1-Starting-with-Linux-Shells"><span class="nav-number">1.</span> <span class="nav-text">Chapter 1: Starting with Linux Shells</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-Is-Linux"><span class="nav-number">1.1.</span> <span class="nav-text">What Is Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Looking-into-the-Linux-Kernel"><span class="nav-number">1.1.1.</span> <span class="nav-text">Looking into the Linux Kernel</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#System-Memory-management"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">System Memory management</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-2-Getting-to-the-Shell"><span class="nav-number">2.</span> <span class="nav-text">Chapter 2: Getting to the Shell</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-3-Basic-bash-Shell-Commands"><span class="nav-number">3.</span> <span class="nav-text">Chapter 3: Basic bash Shell Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Interacting-with-the-bash-Manual"><span class="nav-number">3.1.</span> <span class="nav-text">Interacting with the bash Manual</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Navigating-the-Filesystem"><span class="nav-number">3.2.</span> <span class="nav-text">Navigating the Filesystem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Listing-Files-and-Directories"><span class="nav-number">3.3.</span> <span class="nav-text">Listing Files and Directories</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Displaying-a-basic-list"><span class="nav-number">3.3.1.</span> <span class="nav-text">Displaying a basic list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Displaying-a-long-listing"><span class="nav-number">3.3.2.</span> <span class="nav-text">Displaying a long listing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Filtering-listing-output"><span class="nav-number">3.3.3.</span> <span class="nav-text">Filtering listing output</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Handling-Files"><span class="nav-number">3.4.</span> <span class="nav-text">Handling Files</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Creating-files"><span class="nav-number">3.4.1.</span> <span class="nav-text">Creating files</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Copying-files"><span class="nav-number">3.4.2.</span> <span class="nav-text">Copying files</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linking-files"><span class="nav-number">3.4.3.</span> <span class="nav-text">Linking files</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Renaming-files"><span class="nav-number">3.4.4.</span> <span class="nav-text">Renaming files</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Deleting-files"><span class="nav-number">3.4.5.</span> <span class="nav-text">Deleting files</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Managing-Directories"><span class="nav-number">3.5.</span> <span class="nav-text">Managing Directories</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Viewing-File-Contents"><span class="nav-number">3.6.</span> <span class="nav-text">Viewing File Contents</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-more-command"><span class="nav-number">3.6.1.</span> <span class="nav-text">Using the more command</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-less-command"><span class="nav-number">3.6.2.</span> <span class="nav-text">Using the less command</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Viewing-parts-of-a-file"><span class="nav-number">3.6.3.</span> <span class="nav-text">Viewing parts of a file</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-4-More-bash-Shell-Commands"><span class="nav-number">4.</span> <span class="nav-text">Chapter 4: More bash Shell Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Monitoring-Programs"><span class="nav-number">4.1.</span> <span class="nav-text">Monitoring Programs</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Peeking-at-the-processes"><span class="nav-number">4.1.1.</span> <span class="nav-text">Peeking at the processes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Real-time-process-monitoring"><span class="nav-number">4.1.2.</span> <span class="nav-text">Real-time process monitoring</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stopping-processes"><span class="nav-number">4.1.3.</span> <span class="nav-text">Stopping processes</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Monitoring-Disk-Space"><span class="nav-number">4.2.</span> <span class="nav-text">Monitoring Disk Space</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Mounting-media"><span class="nav-number">4.2.1.</span> <span class="nav-text">Mounting media</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-df-command"><span class="nav-number">4.2.2.</span> <span class="nav-text">Using the df command</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-du-command"><span class="nav-number">4.2.3.</span> <span class="nav-text">Using the du command</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Working-with-Data-Files"><span class="nav-number">4.3.</span> <span class="nav-text">Working with Data Files</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sorting-data"><span class="nav-number">4.3.1.</span> <span class="nav-text">Sorting data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Searching-for-data"><span class="nav-number">4.3.2.</span> <span class="nav-text">Searching for data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Compressing-data"><span class="nav-number">4.3.3.</span> <span class="nav-text">Compressing data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Archiving-data"><span class="nav-number">4.3.4.</span> <span class="nav-text">Archiving data</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-5-Understanding-the-Shell"><span class="nav-number">5.</span> <span class="nav-text">Chapter 5: Understanding the Shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Exploring-Shell-Types"><span class="nav-number">5.1.</span> <span class="nav-text">Exploring Shell Types</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exploring-Parent-and-Child-Shell-Relationships"><span class="nav-number">5.2.</span> <span class="nav-text">Exploring Parent and Child Shell Relationships</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Looking-at-process-lists"><span class="nav-number">5.2.1.</span> <span class="nav-text">Looking at process lists</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Creatively-using-subshells"><span class="nav-number">5.2.2.</span> <span class="nav-text">Creatively using subshells</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Investigation-background-mode"><span class="nav-number">5.2.3.</span> <span class="nav-text">Investigation background mode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Putting-process-lists-into-the-background"><span class="nav-number">5.2.4.</span> <span class="nav-text">Putting process lists into the background</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Looking-at-co-processing"><span class="nav-number">5.2.5.</span> <span class="nav-text">Looking at co-processing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Understanding-Shell-Built-In-Commands"><span class="nav-number">5.3.</span> <span class="nav-text">Understanding Shell Built-In Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Looking-at-external-commands"><span class="nav-number">5.3.1.</span> <span class="nav-text">Looking at external commands</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Looking-at-built-in-comands"><span class="nav-number">5.3.2.</span> <span class="nav-text">Looking at built-in comands</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-history-command"><span class="nav-number">5.3.3.</span> <span class="nav-text">Using the history command</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-command-aliases"><span class="nav-number">5.3.4.</span> <span class="nav-text">Using command aliases</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Using-Linux-Environment-Variables"><span class="nav-number">6.</span> <span class="nav-text">Using Linux Environment Variables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Exploring-Environment-Variables"><span class="nav-number">6.1.</span> <span class="nav-text">Exploring Environment Variables</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Looing-at-global-environment-variables"><span class="nav-number">6.1.1.</span> <span class="nav-text">Looing at global environment variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Looing-at-local-environment-variables"><span class="nav-number">6.1.2.</span> <span class="nav-text">Looing at local environment variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-User-Defined-Variables"><span class="nav-number">6.2.</span> <span class="nav-text">Setting User-Defined Variables</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Setting-local-user-defined-variables"><span class="nav-number">6.2.1.</span> <span class="nav-text">Setting local user-defined variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Setting-global-environment-variables"><span class="nav-number">6.2.2.</span> <span class="nav-text">Setting global environment variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Removing-Environment-Variables"><span class="nav-number">6.2.3.</span> <span class="nav-text">Removing Environment Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Uncovering-Default-Shell-Environment-Variables"><span class="nav-number">6.2.4.</span> <span class="nav-text">Uncovering Default Shell Environment Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-the-PATH-Environment-Variable"><span class="nav-number">6.3.</span> <span class="nav-text">Setting the PATH Environment Variable</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Locating-System-Environment-Variables"><span class="nav-number">6.3.1.</span> <span class="nav-text">Locating System Environment Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Understanding-the-login-shell-process"><span class="nav-number">6.3.2.</span> <span class="nav-text">Understanding the login shell process</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Understanding-the-interactive-shell-process"><span class="nav-number">6.3.3.</span> <span class="nav-text">Understanding the interactive shell process</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Understanding-the-non-interactive-shell-process"><span class="nav-number">6.3.4.</span> <span class="nav-text">Understanding the non-interactive shell process</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Making-environment-variables-persistent"><span class="nav-number">6.3.5.</span> <span class="nav-text">Making environment variables persistent</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Learning-about-Variable-Arrays"><span class="nav-number">6.4.</span> <span class="nav-text">Learning about Variable Arrays</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Understanding-Linux-File-Permissions"><span class="nav-number">7.</span> <span class="nav-text">Understanding Linux File Permissions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-Security"><span class="nav-number">7.1.</span> <span class="nav-text">Linux Security</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#The-etc-passwd-file"><span class="nav-number">7.1.1.</span> <span class="nav-text">The &#x2F;etc&#x2F;passwd file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-etc-shadow-file"><span class="nav-number">7.1.2.</span> <span class="nav-text">The &#x2F;etc&#x2F;shadow file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Adding-a-new-user"><span class="nav-number">7.1.3.</span> <span class="nav-text">Adding a new user</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Removing-a-user"><span class="nav-number">7.1.4.</span> <span class="nav-text">Removing a user</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Modifying-a-user"><span class="nav-number">7.1.5.</span> <span class="nav-text">Modifying a user</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Linux-Groups"><span class="nav-number">7.2.</span> <span class="nav-text">Using Linux Groups</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#The-etc-group-file"><span class="nav-number">7.2.1.</span> <span class="nav-text">The &#x2F;etc&#x2F;group file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Creating-new-groups"><span class="nav-number">7.2.2.</span> <span class="nav-text">Creating new groups</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Modifying-groups"><span class="nav-number">7.2.3.</span> <span class="nav-text">Modifying groups</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Decoding-File-Permissions"><span class="nav-number">7.3.</span> <span class="nav-text">Decoding File Permissions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-file-permission-symbols"><span class="nav-number">7.3.1.</span> <span class="nav-text">Using file permission symbols</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Default-file-permissions"><span class="nav-number">7.3.2.</span> <span class="nav-text">Default file permissions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Changing-Security-Settings"><span class="nav-number">7.4.</span> <span class="nav-text">Changing Security Settings</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Changing-ownership"><span class="nav-number">7.4.1.</span> <span class="nav-text">Changing ownership</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sharing-Files"><span class="nav-number">7.5.</span> <span class="nav-text">Sharing Files</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-8-Managing-Filesystems"><span class="nav-number">8.</span> <span class="nav-text">Chapter 8: Managing Filesystems</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Exploring-Linux-Filesystems"><span class="nav-number">8.1.</span> <span class="nav-text">Exploring Linux Filesystems</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Understanding-the-basic-Linux-filesystems"><span class="nav-number">8.1.1.</span> <span class="nav-text">Understanding the basic Linux filesystems</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-9-Installing-Software"><span class="nav-number">9.</span> <span class="nav-text">Chapter 9: Installing Software</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-10-Working-with-Editors"><span class="nav-number">10.</span> <span class="nav-text">Chapter 10: Working with Editors</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jack Zheng"
      src="/hexo/images/jack.jpg">
  <p class="site-author-name" itemprop="name">Jack Zheng</p>
  <div class="site-description" itemprop="description">我是张江搬砖小码农, 知识搬运工</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/hexo/archives/">
        
          <span class="site-state-item-count">197</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/hexo/categories/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/hexo/tags/">
          
        <span class="site-state-item-count">178</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Zheng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">15:50</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v5.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/hexo/lib/anime.min.js"></script>
  <script src="/hexo/lib/velocity/velocity.min.js"></script>
  <script src="/hexo/lib/velocity/velocity.ui.min.js"></script>

<script src="/hexo/js/utils.js"></script>

<script src="/hexo/js/motion.js"></script>


<script src="/hexo/js/schemes/muse.js"></script>


<script src="/hexo/js/next-boot.js"></script>




  




  
<script src="/hexo/js/local-search.js"></script>














  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'd444c814810f7e73ee3a',
      clientSecret: '9b3c417a0c1076887b3cf583c7d7a27456b708ef',
      repo: 'hexo-comments',
      owner: 'jack-zheng',
      admin: ['jack-zheng'],
      id: 'ccfa49ec6451e96a3ad613aa3a94cbad',
        language: '',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
