<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/hexo/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hexo/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hexo/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/hexo/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="UgODgWVmvTsdD--vjodDR3tPUZRWM3i7JpHzbYejxUM">

<link rel="stylesheet" href="/hexo/css/main.css">


<link rel="stylesheet" href="/hexo/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/hexo/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Linux命令行与shell脚本编程大全 3rd 第二部分命令实验记录 Chapter 11: Basic Script buildingUsing Multiple Commands使用分号分隔命令 12345date ; who# Mon May 24 12:36:11 CST 2021# i306454  console  May 24 11:18 # i306454  ttys000  M">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux命令行与shell脚本编程大全 第二章 Shell 脚本基础知识">
<meta property="og:url" content="https://jack-zheng.github.io/hexo/2021/05/24/LSCASSB-partii-shell-scripting-basics/index.html">
<meta property="og:site_name" content="Jackpot">
<meta property="og:description" content="Linux命令行与shell脚本编程大全 3rd 第二部分命令实验记录 Chapter 11: Basic Script buildingUsing Multiple Commands使用分号分隔命令 12345date ; who# Mon May 24 12:36:11 CST 2021# i306454  console  May 24 11:18 # i306454  ttys000  M">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-24T03:04:47.000Z">
<meta property="article:modified_time" content="2021-05-26T12:11:31.580Z">
<meta property="article:author" content="Jack Zheng">
<meta property="article:tag" content="Linux命令行与shell脚本编程大全 3rd">
<meta property="article:tag" content="TODO">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jack-zheng.github.io/hexo/2021/05/24/LSCASSB-partii-shell-scripting-basics/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Linux命令行与shell脚本编程大全 第二章 Shell 脚本基础知识 | Jackpot</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/hexo/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jackpot</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-tags">

    <a href="/hexo/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/hexo/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/hexo/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/jack-zheng" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jack-zheng.github.io/hexo/hexo/2021/05/24/LSCASSB-partii-shell-scripting-basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hexo/images/jack.jpg">
      <meta itemprop="name" content="Jack Zheng">
      <meta itemprop="description" content="我是张江搬砖小码农, 知识搬运工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jackpot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux命令行与shell脚本编程大全 第二章 Shell 脚本基础知识
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-24 11:04:47" itemprop="dateCreated datePublished" datetime="2021-05-24T11:04:47+08:00">2021-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-26 20:11:31" itemprop="dateModified" datetime="2021-05-26T20:11:31+08:00">2021-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>22k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>20 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Linux命令行与shell脚本编程大全 3rd 第二部分命令实验记录</p>
<h2 id="Chapter-11-Basic-Script-building"><a href="#Chapter-11-Basic-Script-building" class="headerlink" title="Chapter 11: Basic Script building"></a>Chapter 11: Basic Script building</h2><h3 id="Using-Multiple-Commands"><a href="#Using-Multiple-Commands" class="headerlink" title="Using Multiple Commands"></a>Using Multiple Commands</h3><p>使用分号分隔命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">date ; who</span><br><span class="line"><span class="comment"># Mon May 24 12:36:11 CST 2021</span></span><br><span class="line"><span class="comment"># i306454  console  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys000  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys003  May 24 11:33</span></span><br></pre></td></tr></table></figure>

<h3 id="Creating-a-Script-File"><a href="#Creating-a-Script-File" class="headerlink" title="Creating a Script File"></a>Creating a Script File</h3><ol>
<li>新建文件 mysh.sh</li>
<li>填入内容</li>
<li>设置环境</li>
<li>运行</li>
</ol>
<blockquote>
<p>However, the fi rst line of a shell script fi le is a special case, and the pound sign followed by the exclamation point tells the shell what shell to run the script under<br>Shell script 的第一行表示你想要用哪个 Shell 运行你的脚本</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># This scri displays the date and who&#x27;s logged on</span></span><br><span class="line">date</span><br><span class="line">who</span><br></pre></td></tr></table></figure>

<p>尝试运行 <code>mysh.sh</code>，运行失败 <code>bash: mysh.sh: command not found</code></p>
<p>这是你有两种选择</p>
<ol>
<li>将包含脚本的目录添加到 PATH 中，eg: <code>export PATH=$PATH:path_to_folder</code></li>
<li>使用相对或绝对路径调用脚本, eg: <code>./mysh.sh</code></li>
</ol>
<p>PS: 发现直接用 <code>sh mysh.sh</code> 即可，还省去了赋权的操作</p>
<p>这里直接使用相对路径调用 <code>./mysh.sh</code>, 运行失败 <code>bash: ./mysh.sh: Permission denied</code>。通过 <code>ls -l mysh.sh</code> 查看权限, 发现并没有权限，然后赋权,再次尝试，运行成功。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ls -l mysh.sh </span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  70 May 24 12:40 mysh.sh</span></span><br><span class="line"></span><br><span class="line">chmod u+x mysh.sh </span><br><span class="line">./mysh.sh </span><br><span class="line"><span class="comment"># Mon May 24 13:11:37 CST 2021</span></span><br><span class="line"><span class="comment"># i306454  console  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys000  May 24 11:18</span></span><br></pre></td></tr></table></figure>

<h3 id="Displaying-Messages"><a href="#Displaying-Messages" class="headerlink" title="Displaying Messages"></a>Displaying Messages</h3><p>使用 <code>echo</code> 打印信息</p>
<ul>
<li>当输出内容中没有什么特殊符号时，可以直接在 echo 后面接你要的内容</li>
<li>当输出内容中包含单/双引号时，需要将 echo 的内容包含在 双/单引号中</li>
<li>默认 echo 是会换行的，使用 <code>echo -n xxx</code> 取消换行</li>
</ul>
<h3 id="Using-Variables"><a href="#Using-Variables" class="headerlink" title="Using Variables"></a>Using Variables</h3><p><code>set</code>: 打印当前环境的所有环境变量, 输出内容包括 PATH，HOME 等</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br><span class="line"><span class="comment"># ANT_HOME=/Users/i306454/SAPDevelop/tools/apache-ant-1.8.4</span></span><br><span class="line"><span class="comment"># BASH=/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># BASHOPTS=checkwinsize:cmdhist:complete_fullquote:expand_aliases:extquote:force_fignore:globasciiranges:hostcomplete:interactive_comments:progcomp:promptvars:sourcepath</span></span><br><span class="line"><span class="comment"># BASH_ALIASES=()</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<p>在你的 sh 脚本中，可以调用这些变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;User info for userid <span class="variable">$USER</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> UID: <span class="variable">$UID</span></span><br><span class="line"><span class="built_in">echo</span> HOME: <span class="variable">$HOME</span></span><br><span class="line"></span><br><span class="line">sh test_var.sh </span><br><span class="line"><span class="comment"># User info for userid i306454</span></span><br><span class="line"><span class="comment"># UID: 501</span></span><br><span class="line"><span class="comment"># HOME: /Users/i306454</span></span><br></pre></td></tr></table></figure>

<p>当你在输出语句中想要打印 <code>$</code> 这个特殊字符时，只需要在前面加斜杠</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This book cost <span class="variable">$15</span>&quot;</span></span><br><span class="line"><span class="comment"># This book cost 5</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This book cost \$15&quot;</span></span><br><span class="line"><span class="comment"># This book cost $15</span></span><br></pre></td></tr></table></figure>

<p>PS: <code>$&#123;variable&#125;</code> 也是合法的，这种声明起到强调变量名的作用</p>
<p>变量名限制：最多 20 个字符，可以是英文，数组或者下划线，区分大小写。使用等号链接，中间<strong>不允许</strong>有空格</p>
<blockquote>
<p>Command substitution</p>
</blockquote>
<p>你可以通过一下方式将 cmd 输出的值赋给你的变量</p>
<ol>
<li><code>`</code> 反引号符(backtick character)</li>
<li><code>$()</code> 表达式</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tdate=`date`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$tdate</span></span><br><span class="line"><span class="comment"># Mon May 24 15:46:51 CST 2021</span></span><br><span class="line">tdate2=$(date)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$tdate2</span></span><br><span class="line"><span class="comment"># Mon May 24 15:47:39 CST 2021</span></span><br></pre></td></tr></table></figure>

<p>这只是初级用法，更骚的操作是将输出定制之后用作后续命令的输出，比如下面这个例子，将文件夹下的所有目录写进 log 文件，并用时间戳做后缀 <code>today=$(date +%y%m%d); ls -al /usr/bin &gt; log.$today</code></p>
<p><strong>Caution:</strong> Command substitution creates what’s called a subshell to run the enclosed command. A subshell is a separate child shell generated from the shell that’s running the script. Because of that, any variables you create in the script aren’t available to the subshell command.</p>
<p>Command substitution 这种使用方法会创建一个子 shell 计算变量值，子 shell 运行的时候是看不到你外面的 shell 中定义的变量的</p>
<h3 id="Redirecting-Input-and-Output"><a href="#Redirecting-Input-and-Output" class="headerlink" title="Redirecting Input and Output"></a>Redirecting Input and Output</h3><blockquote>
<p>Output redirection</p>
</blockquote>
<p>可以使用大于号(greater-than symbol)将输出导入文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">date &gt; test6</span><br><span class="line">ls -l test6</span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  29 May 24 18:31 test6</span></span><br><span class="line">cat test6</span><br><span class="line"><span class="comment"># Mon May 24 18:31:40 CST 2021</span></span><br></pre></td></tr></table></figure>

<p>如果文件已经存在，则覆盖原有内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">who &gt; test6</span><br><span class="line">cat test6</span><br><span class="line"><span class="comment"># i306454  console  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys000  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys003  May 24 18:00</span></span><br></pre></td></tr></table></figure>

<p>使用两个大于号(double greater-than symbol)来做 append 操作</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">date &gt;&gt; test6</span><br><span class="line">cat test6</span><br><span class="line"><span class="comment"># i306454  console  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys000  May 24 11:18 </span></span><br><span class="line"><span class="comment"># i306454  ttys003  May 24 18:00 </span></span><br><span class="line"><span class="comment"># Mon May 24 18:35:12 CST 2021</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Input redirection</p>
</blockquote>
<p>使用小于号(less-htan symbol)将文件中的内容导入输入流 <code>command &lt; inputfile</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wc &lt; test6</span><br><span class="line"><span class="comment">#    4      21     125</span></span><br><span class="line"><span class="comment"># wc: show lines, words and bytes of input</span></span><br></pre></td></tr></table></figure>

<p>除了从文件导入，从命令行直接导入多行也是可行的，术语叫做 <code>inline input redirection</code>。这个之前在之前阿里云 setup 环境的时候操作过的。使用两个小于号(&lt;&lt;) + 起止描述符实现</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wc &lt;&lt; EOF</span><br><span class="line">&gt; <span class="built_in">test</span> String 1</span><br><span class="line">&gt; <span class="built_in">test</span> String 2</span><br><span class="line">&gt; <span class="built_in">test</span> String 3</span><br><span class="line">&gt; EOF</span><br><span class="line"><span class="comment"># 3       9      42</span></span><br></pre></td></tr></table></figure>

<h3 id="Pipes"><a href="#Pipes" class="headerlink" title="Pipes"></a>Pipes</h3><p>使用方式 <code>command1 | command2</code></p>
<blockquote>
<p>Don’t think of piping as running two commands back to back. The Linux system actually runs both commands at the same time, linking them together internally in the system. As the fi rst command produces output, it’s sent immediately to the second command. No inter-mediate fi les or buffer areas are used to transfer the data.<br>pipe 中的命令是同时执行的，变量传递不涉及到中间变量</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ls </span><br><span class="line"><span class="comment"># input.txt       mysh.sh         output.txt      test_echo.sh</span></span><br><span class="line"><span class="comment"># log.210524      out.txt         test6           test_var.sh</span></span><br><span class="line">ls | sort</span><br><span class="line"><span class="comment"># input.txt</span></span><br><span class="line"><span class="comment"># log.210524</span></span><br><span class="line"><span class="comment"># mysh.sh</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure>

<p>pipe 可以无限级联 <code>cmd1 | cmd2 | cmd3 | ...</code></p>
<h3 id="Performing-Math"><a href="#Performing-Math" class="headerlink" title="Performing Math"></a>Performing Math</h3><p>Bash 中提供了两种方式进行计算</p>
<blockquote>
<p>The expr command</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">expr 1 + 5</span><br><span class="line"><span class="comment"># 6</span></span><br></pre></td></tr></table></figure>

<p>expr 支持常规算数运行 + 与或非 + 正则 + 字符串操作等</p>
<p>这个 expr 表达式有点尴尬，他的一些常规运算是要加反斜杠的，简直无情</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">expr 1 * 6</span><br><span class="line"><span class="comment"># expr: syntax error</span></span><br><span class="line">expr 1 \* 6</span><br><span class="line"><span class="comment"># 6</span></span><br></pre></td></tr></table></figure>

<p>这个还算好的，如果在 sh 文件中调用，表达式就更操蛋了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/local/bin/bash</span></span><br><span class="line">var1=10</span><br><span class="line">var2=20</span><br><span class="line">var3=$(expr <span class="variable">$var2</span> / <span class="variable">$var1</span>)</span><br><span class="line"><span class="built_in">echo</span> The result is <span class="variable">$var3</span></span><br><span class="line"></span><br><span class="line">sh test_expr.sh </span><br><span class="line"><span class="comment"># The result is 2</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Using brackets</p>
</blockquote>
<p>Bash 中保留 <code>expr</code> 是为了兼容 Bourne shell,同时它提供了一种更简便的计算方式，<code>$[ operation ]</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var1=$[1 + 5]</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var1</span></span><br><span class="line"><span class="comment"># 6</span></span><br><span class="line">var2=$[ <span class="variable">$var1</span> * 2 ]</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var2</span></span><br><span class="line"><span class="comment"># 12</span></span><br></pre></td></tr></table></figure>

<p>方括号表达式可以自动完成计算符号的识别，不需要用反斜杠做转义符，唯一的缺陷是，他只能做整数运行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var1=100</span><br><span class="line">var2=45</span><br><span class="line">var3=$[<span class="variable">$var1</span>/<span class="variable">$var2</span>]</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var3</span></span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>A floating-point solution</p>
</blockquote>
<p>bc: bash calculation, 他可以识别一下内容</p>
<ul>
<li>Number(integer + floating point)</li>
<li>Variables(simple variables + arrays)</li>
<li>Comments(# or /* … */)</li>
<li>Expressions</li>
<li>Programming statements(such as if-then statements)</li>
<li>Functions</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bc</span><br><span class="line">bc 1.06</span><br><span class="line">Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.</span><br><span class="line">This is free software with ABSOLUTELY NO WARRANTY.</span><br><span class="line">For details <span class="built_in">type</span> `warranty<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">12 * 5.4</span></span><br><span class="line"><span class="string">64.8</span></span><br><span class="line"><span class="string">3.156 * (3 + 5)</span></span><br><span class="line"><span class="string">25.248</span></span><br><span class="line"><span class="string">quit</span></span><br></pre></td></tr></table></figure>

<p>可以通过 scale 关键字指定精确位, 默认 scale 为 0, <code>-q</code> 用于跳过命令文字说明</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bc -q </span><br><span class="line">3.44 / 5</span><br><span class="line">0</span><br><span class="line">scale=4</span><br><span class="line">3.44 / 5</span><br><span class="line">.6880</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>

<p>如前述，bc 可以识别变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bc -q</span><br><span class="line">var1=10</span><br><span class="line">var1 * 4</span><br><span class="line">40</span><br><span class="line">var2 = var1 / 5</span><br><span class="line"><span class="built_in">print</span> var2</span><br><span class="line">2</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>

<p>你可以通过 Command substitution，在 sh 脚本中调用 bc, 形式为 <code>variable=$(echo &quot;options; expression&quot; | bc)</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat test9</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># var1=$(echo &quot;scale=4; 3.44/5&quot; | bc)</span></span><br><span class="line"><span class="comment"># echo This answer is $var1</span></span><br><span class="line"></span><br><span class="line">sh test9</span><br><span class="line"><span class="comment"># This answer is .6880</span></span><br></pre></td></tr></table></figure>

<p>脚本中定义的变量也可以使用</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat test10</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># var1=100</span></span><br><span class="line"><span class="comment"># var2=45</span></span><br><span class="line"><span class="comment"># var3=$(echo &quot;scale=4; $var1 / $var2&quot; | bc)</span></span><br><span class="line"><span class="comment"># echo The answer for this is $var3bash-5.1$ </span></span><br><span class="line">sh test10</span><br><span class="line"><span class="comment"># The answer for this is 2.2222</span></span><br></pre></td></tr></table></figure>

<p>当遇到很长的计算表达式时，可以用 &lt;&lt; 将他们串起来</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat test12</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># var1=10.46</span></span><br><span class="line"><span class="comment"># var2=43.67</span></span><br><span class="line"><span class="comment"># var3=33.2</span></span><br><span class="line"><span class="comment"># var4=71</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># var5=$(bc &lt;&lt; EOF</span></span><br><span class="line"><span class="comment"># scale = 4</span></span><br><span class="line"><span class="comment"># a1 = ($var1 * $var2)</span></span><br><span class="line"><span class="comment"># b1 = ($var3 * $var4)</span></span><br><span class="line"><span class="comment"># a1 + b1</span></span><br><span class="line"><span class="comment"># EOF</span></span><br><span class="line"><span class="comment"># )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># echo The final answer for this mess is $var5</span></span><br><span class="line">sh test12</span><br><span class="line"><span class="comment"># The final answer for this mess is 2813.9882</span></span><br></pre></td></tr></table></figure>

<p>PS: 在上面的脚本中我们用了 Command substitution 所以中间的变量前面都是要加 <code>$</code> 的，当终端调用 <code>bc</code> 时就不需要了</p>
<h3 id="Exiting-the-Script"><a href="#Exiting-the-Script" class="headerlink" title="Exiting the Script"></a>Exiting the Script</h3><p>There’s a more elegant way of completing things available to us. 每个命令结束时，系统都会分配一个 0-255 之间的整数给他</p>
<blockquote>
<p>Checking the exit status</p>
</blockquote>
<p>Linux 使用 <code>$?</code> 表示上一条命令的执行状态</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date</span><br><span class="line"><span class="comment"># Mon May 24 19:47:29 CST 2021</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="comment"># 0</span></span><br></pre></td></tr></table></figure>

<p>运行正常，返回 0。如果有问题，则返回一个非零</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">asd</span><br><span class="line"><span class="comment"># bash: asd: command not found</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="comment"># 127</span></span><br></pre></td></tr></table></figure>

<p>常见错误码表</p>
<table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Desc</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">Success</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">General unknown error</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">Misuse of shell command</td>
</tr>
<tr>
<td align="left">126</td>
<td align="left">The cmd can’t execute</td>
</tr>
<tr>
<td align="left">127</td>
<td align="left">Cmd not found</td>
</tr>
<tr>
<td align="left">128</td>
<td align="left">Invalid exit argument</td>
</tr>
<tr>
<td align="left">128+x</td>
<td align="left">Fatal err with Linux singal x</td>
</tr>
<tr>
<td align="left">130</td>
<td align="left">Cmd terminated with Ctrl+C</td>
</tr>
<tr>
<td align="left">255</td>
<td align="left">Exit status out of range</td>
</tr>
</tbody></table>
<blockquote>
<p>The exit command</p>
</blockquote>
<p>exit 关键字让你可以定制脚本的返回值</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat test13</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing the exit status</span></span><br><span class="line"><span class="comment"># var1=10</span></span><br><span class="line"><span class="comment"># var2=20</span></span><br><span class="line"><span class="comment"># var3=$[$var1 + $var2]</span></span><br><span class="line"><span class="comment"># echo The answer is $var3</span></span><br><span class="line"><span class="comment"># exit 5</span></span><br><span class="line"></span><br><span class="line">chmod u+x test13</span><br><span class="line">./test13</span><br><span class="line"><span class="comment"># The answer is 30</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="comment"># 5</span></span><br></pre></td></tr></table></figure>

<p>PS: 这里看出来差别了，如果我直接用 sh test13 执行的话，结果是 0</p>
<p>这里需要指出的是，exit code 最大为 255 如果超出了，系统会自己做修正</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat test14</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # exit code more than 255</span></span><br><span class="line"><span class="comment"># var=300</span></span><br><span class="line"><span class="comment"># exit $var</span></span><br><span class="line"></span><br><span class="line">chmod u+x test14</span><br><span class="line">./test14</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="comment"># 44</span></span><br></pre></td></tr></table></figure>

<h2 id="Chapter-12-Using-Structured-Commands"><a href="#Chapter-12-Using-Structured-Commands" class="headerlink" title="Chapter 12: Using Structured Commands"></a>Chapter 12: Using Structured Commands</h2><p>本章内容主要包括 loigc flow control 部分</p>
<blockquote>
<p>Working with the if-then Statement</p>
</blockquote>
<p>if-then 是最基本的控制方式，format 如下, 判断依据是 command 的 exit code, 如果是 0 则表示 success，其他的则为 fail.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">command</span></span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>positive sample 如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat test1.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing the if statement</span></span><br><span class="line"><span class="comment"># if pwd</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;It worked&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">chmod u+x test1.sh </span><br><span class="line">./test1.sh</span><br><span class="line"><span class="comment"># /Users/i306454/gitStore/hexo</span></span><br><span class="line"><span class="comment"># It worked</span></span><br></pre></td></tr></table></figure>

<p>negative sample 如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat test2.sh </span><br><span class="line"><span class="comment"># # #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # # testing a bad command</span></span><br><span class="line"><span class="comment"># if IamNotACommand</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;It worked&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"><span class="comment"># echo &quot;We are outside the if statement&quot;</span></span><br><span class="line">chmod u+x test2.sh</span><br><span class="line">./test2.sh </span><br><span class="line"><span class="comment"># ./test2.sh: line 3: IamNotACommand: command not found</span></span><br><span class="line"><span class="comment"># We are outside the if statement</span></span><br></pre></td></tr></table></figure>

<p>PS: <code>if-then</code> 可以改一下 format，将 if-then 写在一行，看上去更贴近其他语言的表现形式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">command</span>; <span class="keyword">then</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>then 中可以写代码段，如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cat test3.sh</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing multiple commands in the then section</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># testuser=MySQL</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if grep $testuser /etc/passwd</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;This is my first command&quot;</span></span><br><span class="line"><span class="comment">#     echo &quot;This is my second command&quot;</span></span><br><span class="line"><span class="comment">#     echo &quot;I can even put in other commands beside echo:&quot;</span></span><br><span class="line"><span class="comment">#     ls -a /home/$testuser/.b*</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test3.sh </span><br><span class="line"><span class="comment"># _mysql:*:74:74:MySQL Server:/var/empty:/usr/bin/false</span></span><br><span class="line"><span class="comment"># This is my first command</span></span><br><span class="line"><span class="comment"># This is my second command</span></span><br><span class="line"><span class="comment"># I can even put in other commands beside echo:</span></span><br><span class="line"><span class="comment"># ls: /home/MySQL/.b*: No such file or directory</span></span><br></pre></td></tr></table></figure>

<p>PS：由于是 mac 系统，有点出入，但是目的还是达到了。顺便测了一下缩进，将 echo 的缩进去了一样 work</p>
<blockquote>
<p>Exploring the if-then-else Statement</p>
</blockquote>
<p>格式如下, </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">command</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>改进 test3.sh 如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing multiple commands in the then section</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># testuser=NoSuchUser</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if grep $testuser /etc/passwd</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;This is my first command&quot;</span></span><br><span class="line"><span class="comment">#     echo &quot;This is my second command&quot;</span></span><br><span class="line"><span class="comment">#     echo &quot;I can even put in other commands beside echo:&quot;</span></span><br><span class="line"><span class="comment">#     ls -a /home/$testuser/.b*</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;The user $testuser does not exist on this system.&quot;</span></span><br><span class="line"><span class="comment">#     echo</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test4.sh </span><br><span class="line"><span class="comment"># The user NoSuchUser does not exist on this system.</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Nesting ifs</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> command1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">elif</span> command2</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    more commands</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>写脚本检测帐户是否存在，然后检测用户文件夹是否存在</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cat test5.sh</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing nested ifs - use elif</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># testuser=NoSuchUser</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if grep $testuser /etc/passwd</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The user $testuser exists on this system&quot;</span></span><br><span class="line"><span class="comment"># elif ls -d /home/$testuser</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The user $testuser does not exist on this system&quot;</span></span><br><span class="line"><span class="comment">#     echo &quot;However, $testuset has directory.&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">chmod u+x test5.sh </span><br><span class="line">./test5.sh </span><br><span class="line"><span class="comment"># ls: /home/NoSuchUser: No such file or directory</span></span><br></pre></td></tr></table></figure>

<p><strong>Tips</strong>: Keep in mind that, with an elif statement, any else statements immediately following it are for that elif code block. They are not part of a preceding if-then statement code block.(elif 之后紧跟的 else 是一对的，它不属于前面的 if-then)</p>
<p>多个 elif 串连的形式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> command1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">command</span> <span class="built_in">set</span> 1</span><br><span class="line"><span class="keyword">elif</span> command2</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">command</span> <span class="built_in">set</span> 2</span><br><span class="line"><span class="keyword">elif</span> command3</span><br><span class="line"><span class="keyword">then</span>    </span><br><span class="line">    <span class="built_in">command</span> <span class="built_in">set</span> 3</span><br><span class="line"><span class="keyword">elif</span> command4</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">command</span> <span class="built_in">set</span> 4</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Trying the test Command</p>
</blockquote>
<p>if-then 条件判断只支持 exit code，为了使它更通用，Linux 提供了 test 工具集，如果 test 判定结果为 TRUE 则返回 0 否则非 0，格式为 <code>test condition</code>, 将它和 if-then 结合，格式如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> condition</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>如果没有写 condition，则默认为非 0 返回值</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat test6.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing the test command</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if test</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;No expression return a True&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;No expression return a False&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test6.sh </span><br><span class="line"><span class="comment"># No expression return a False</span></span><br></pre></td></tr></table></figure>

<p>将测试条件替换为变量，输出 True 的语句</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cat test6.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing the test command</span></span><br><span class="line"><span class="comment"># my_variable=&quot;Full&quot;</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if my_variable</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The $my_variable expression return a True&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;The $my_variable expression return a False&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test6.sh </span><br><span class="line"><span class="comment"># The Full expression return a False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># replace my_variable=&quot;&quot;</span></span><br><span class="line">./test6.sh </span><br><span class="line"><span class="comment"># The  expression return a False</span></span><br></pre></td></tr></table></figure>

<p>测试条件还可以简写成如下形式</p>
<p>Be careful; you <strong>must have a space</strong> after the first bracket and a space before the last bracket, or you’ll get an error message.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>test condition 可以测试如下三种情景</p>
<ul>
<li>Numeric comparisons</li>
<li>String comparisons</li>
<li>File comparisions</li>
</ul>
<blockquote>
<p>Using numeric comparisons</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">Comparison</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">n1 -eq n2</td>
<td align="left">Check if n1 is equal to n2</td>
</tr>
<tr>
<td align="left">n1 -ge n2</td>
<td align="left">Check if n1 greater than or equal to n2</td>
</tr>
<tr>
<td align="left">n1 -gt n2</td>
<td align="left">Check if n1 is greater than n2</td>
</tr>
<tr>
<td align="left">n1 -le n2</td>
<td align="left">Check if n1 is less than or equal to n2</td>
</tr>
<tr>
<td align="left">n1 -lt n2</td>
<td align="left">Check if n1 less than n2</td>
</tr>
<tr>
<td align="left">n1 -ne n2</td>
<td align="left">Check if n1 is not equal to n2</td>
</tr>
</tbody></table>
<p>test condition 对变量也是有效的，示例如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cat numeric_test.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Using numeric test eveluations</span></span><br><span class="line"><span class="comment"># value1=10</span></span><br><span class="line"><span class="comment"># value2=11</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ $value1 -gt 5 ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The test value $value1 is greater than 5&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ $value1 -eq $value2 ]</span></span><br><span class="line"><span class="comment"># then echo &quot;The values are equal&quot;</span></span><br><span class="line"><span class="comment"># else </span></span><br><span class="line"><span class="comment">#     echo &quot;The values are different&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./numeric_test.sh </span><br><span class="line"><span class="comment"># The test value 10 is greater than 5</span></span><br><span class="line"><span class="comment"># The values are different</span></span><br></pre></td></tr></table></figure>

<p>但是 test condition 有个缺陷，它不能测试浮点型数据</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">value1=5.55</span><br><span class="line">[ <span class="variable">$value1</span> -gt 5 ]; <span class="built_in">echo</span> $?</span><br><span class="line"><span class="comment"># bash: [: 5.55: integer expression expected</span></span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<p><strong>Caution:</strong> Remember that the only numbers the bash shell can handle are integers.</p>
<blockquote>
<p>Using string comparisons</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">Comparison</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">str1 = str2</td>
<td align="left">Check if str1 is the same as string str2</td>
</tr>
<tr>
<td align="left">str1 != str2</td>
<td align="left">Check if str1 is not the same as string str2</td>
</tr>
<tr>
<td align="left">str1 &lt; str2</td>
<td align="left">Check if str1 is less than str2</td>
</tr>
<tr>
<td align="left">str1 &gt; str2</td>
<td align="left">Check if str1 is greater than string str2</td>
</tr>
<tr>
<td align="left">-n str1</td>
<td align="left">Check if str1 has a length greater than zero</td>
</tr>
<tr>
<td align="left">-z str1</td>
<td align="left">Check if str1 has a length of zero</td>
</tr>
</tbody></table>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat test8.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing string equality</span></span><br><span class="line"><span class="comment"># testuser=baduser</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ $USER != $testuser ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;This is $testuser&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;Welcome $testuser&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test8.sh </span><br><span class="line"><span class="comment"># This is baduser</span></span><br></pre></td></tr></table></figure>

<p>在处理 <code>&lt;</code> 和 <code>&gt;</code> 时，shell 会有一些很奇怪的注意点</p>
<ul>
<li><code>&lt;</code> 和 <code>&gt;</code> 必须使用转义符号，不然系统会把他们当作流操作</li>
<li><code>&lt;</code> 和 <code>&gt;</code> 的用法和 sort 中的用法时不一致的</li>
</ul>
<p>针对第一点的测试，测试中，比较符号被当成了流操作符，新生产了一个 hockey 文件。这个操作 exit code 是 0 所以执行了 true 的 loop. 你需要将条件语句改为 <code>if [ $val1 \&gt; $val2 ]</code> 才能生效</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat badtest.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # mis-using string comparisons</span></span><br><span class="line"><span class="comment"># val1=baseball</span></span><br><span class="line"><span class="comment"># val2=hockey</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ $val1 &gt; $val2 ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;$val1 is greater than $val2&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;$val1 is less than $val2&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">/badtest.sh </span><br><span class="line"><span class="comment"># baseball is greater than hockey</span></span><br><span class="line">ls</span><br><span class="line"><span class="comment"># badtest.sh      hockey</span></span><br></pre></td></tr></table></figure>

<p>针对第二点，sort 和 test 对 string 的比较是相反的</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat test9b.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing string sort order</span></span><br><span class="line"><span class="comment"># val1=Testing</span></span><br><span class="line"><span class="comment"># val2=testing</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ $val1 \&gt; $val2 ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;$val1 is greater than $val2&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;$val1 is less than $val2&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test9b.sh </span><br><span class="line">Testing is less than testing</span><br><span class="line"></span><br><span class="line">sort &lt;&lt; EOF</span><br><span class="line">&gt; Testing</span><br><span class="line">&gt; testing</span><br><span class="line">&gt; EOF</span><br><span class="line">Testing</span><br><span class="line">testing</span><br></pre></td></tr></table></figure>

<p>PS: 这里和书本上有出入，我在 MacOS 里测试两者是一致的，大写要小于小些，可能 Ubantu 上不一样把，有机会可以测一测</p>
<p><strong>Note:</strong> The test command and test expressions use the standard mathematical comparison symbols for string compari-sons and text codes for numerical comparisons. This is a subtle feature that many programmers manage to get reversed. If you use the mathematical comparison symbols for numeric values, the shell interprets them as string values and may not produce the correct results.</p>
<p>test condition 的处理模式是 数字 + test codes(-eq); string + 运算符(&lt;/&gt;/=)，刚好是交叉的，便于记忆</p>
<p>对 <code>-n</code> 和 <code>-z</code> 进行测试，undefined 的变量默认长度为 0</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">cat test10.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # testing string length</span></span><br><span class="line"><span class="comment"># val1=testing</span></span><br><span class="line"><span class="comment"># val2=&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ -n $val1 ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The string &#x27;$val1&#x27; is not empty&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;The string &#x27;$val1&#x27; is empty&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ -z $val2 ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The string &#x27;$val2&#x27; is empty&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;The string &#x27;$val2&#x27; is not empty&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"><span class="comment"># #</span></span><br><span class="line"><span class="comment"># if [ -z $val3 ]</span></span><br><span class="line"><span class="comment"># then</span></span><br><span class="line"><span class="comment">#     echo &quot;The string &#x27;$val3&#x27; is empty&quot;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#     echo &quot;The string &#x27;$val3&#x27; is not empty&quot;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line">./test10.sh </span><br><span class="line"><span class="comment"># The string &#x27;testing&#x27; is not empty</span></span><br><span class="line"><span class="comment"># The string &#x27;&#x27; is empty</span></span><br><span class="line"><span class="comment"># The string &#x27;&#x27; is empty</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Using file comparisons</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">Comparison</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-d file</td>
<td align="left">Check if file exists and is a directory</td>
</tr>
<tr>
<td align="left">-e file</td>
<td align="left">Check if file or directory exists</td>
</tr>
<tr>
<td align="left">-f file</td>
<td align="left">Check if file exists and is a file</td>
</tr>
<tr>
<td align="left">-r file</td>
<td align="left">Check if file exists and is readable</td>
</tr>
<tr>
<td align="left">-s file</td>
<td align="left">Check if file exists and is not empty</td>
</tr>
<tr>
<td align="left">-w file</td>
<td align="left">Check if file exists and is writable</td>
</tr>
<tr>
<td align="left">-x file</td>
<td align="left">Check if file exists and is executable</td>
</tr>
<tr>
<td align="left">-O file</td>
<td align="left">Check if file exists and is owned by the current user</td>
</tr>
<tr>
<td align="left">-G file</td>
<td align="left">Check if file exists and the default group is the same as the current user</td>
</tr>
<tr>
<td align="left">file1 -nt file2</td>
<td align="left">Check if file1 is newer than file2</td>
</tr>
<tr>
<td align="left">file1 -ot file2</td>
<td align="left">Check if file1 is older than file2</td>
</tr>
</tbody></table>
<p>测试范例如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">mkdir test_folder</span><br><span class="line">[ -d test_folder ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[ -e test_folder ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[ -e xxx ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line"></span><br><span class="line">chmod u+xrw test_file.sh </span><br><span class="line">ls -l test_file.sh </span><br><span class="line"><span class="comment"># -rwxr--r--  1 i306454  staff  190 May 25 17:51 test_file.sh</span></span><br><span class="line">[ -r test_file.sh ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[ -w test_file.sh ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[ -x test_file.sh ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line"></span><br><span class="line">chmod u-rxw test_file.sh </span><br><span class="line">ls -l test_file.sh </span><br><span class="line"><span class="comment"># ----r--r--  1 i306454  staff  190 May 25 17:51 test_file.sh</span></span><br><span class="line">[ -r test_file.sh ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line">[ -w test_file.sh ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line">[ -x test_file.sh ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line"></span><br><span class="line">touch tmp_file</span><br><span class="line">[ -s tmp_file ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line"><span class="built_in">echo</span> new line &gt;&gt; tmp_file </span><br><span class="line">[ -s tmp_file ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line"></span><br><span class="line">ls -l</span><br><span class="line"><span class="comment"># total 8</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  9 May 25 17:59 tmp_file</span></span><br><span class="line"><span class="comment"># -rw-r--r--  1 i306454  staff  0 May 25 18:01 tmp_file2</span></span><br><span class="line">[ tmp_file2 -nt tmp_file ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[ tmp_file -nt tmp_file2 ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line">[ tmp_file -ot tmp_file2 ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[ tmp_file2 -ot tmp_file ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h3 id="Considering-Compound-Testing"><a href="#Considering-Compound-Testing" class="headerlink" title="Considering Compound Testing"></a>Considering Compound Testing</h3><p>组合条件</p>
<ul>
<li>[ condition1 ] &amp;&amp; [  condition2 ]</li>
<li>[ condition1 ] || [  condition2 ]</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ -f tmp_file ] &amp;&amp; [ -d <span class="variable">$HOME</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br></pre></td></tr></table></figure>

<h3 id="Working-with-Advanced-if-then-Features"><a href="#Working-with-Advanced-if-then-Features" class="headerlink" title="Working with Advanced if-then Features"></a>Working with Advanced if-then Features</h3><p>if-then 的增强模式</p>
<ul>
<li>Double parentheses for mathematical expressions(双括号)</li>
<li>Double square brackets for advanced string handling functions(双方括号)</li>
</ul>
<blockquote>
<p>Using double parentheses</p>
</blockquote>
<p>创括号是针对算数运算的</p>
<p>test command 只提供了简单的算术运算，双括号提供的算力更强，效果和其他语言类似，格式 <code>(( expression ))</code>. 除了 test 支持的运算，它还支持如下运算</p>
<table>
<thead>
<tr>
<th align="left">Comparison</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">val++</td>
<td align="left">Post-incremnet</td>
</tr>
<tr>
<td align="left">val–</td>
<td align="left">Post-decrement</td>
</tr>
<tr>
<td align="left">++val</td>
<td align="left">Pre-increment</td>
</tr>
<tr>
<td align="left">–val</td>
<td align="left">Pre-decrement</td>
</tr>
<tr>
<td align="left">!</td>
<td align="left">Logical negation</td>
</tr>
<tr>
<td align="left">~</td>
<td align="left">Bitwise negation</td>
</tr>
<tr>
<td align="left">**</td>
<td align="left">Exponentiation</td>
</tr>
<tr>
<td align="left">&lt;&lt;</td>
<td align="left">Left bitwise shift</td>
</tr>
<tr>
<td align="left">&gt;&gt;</td>
<td align="left">Right bitwise shift</td>
</tr>
<tr>
<td align="left">&amp;</td>
<td align="left">Bitwise Boolean AND</td>
</tr>
<tr>
<td align="left">|</td>
<td align="left">Bitwise Boolean OR</td>
</tr>
<tr>
<td align="left">&amp;&amp;</td>
<td align="left">Logical AND</td>
</tr>
<tr>
<td align="left">||</td>
<td align="left">Logical OR</td>
</tr>
</tbody></table>
<p>测试范例如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ** 次方操作</span></span><br><span class="line">(( <span class="variable">$val1</span>**2 &gt; 90 )) &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Using double bracket</p>
</blockquote>
<p>双方括号是针对字符运算的，格式为 <code>[[ expression ]]</code>. 除了 test 相同的计算外，他还额外提供了<strong>正则</strong>的支持</p>
<p><strong>Note:</strong> bash 是支持双方括号的，但是其他 shell 就不一定了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="variable">$USER</span> == i* ]] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br></pre></td></tr></table></figure>

<p>PS: 双等(==)表示 string 符合 pattern，直接用等号也是可以的</p>
<h3 id="Considering-the-case-Command"><a href="#Considering-the-case-Command" class="headerlink" title="Considering the case Command"></a>Considering the case Command</h3><p>对应 Java 中的 switch-case 语法, 格式如下. 当内容和 pattern 匹配时，就会执行对应的语句</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> variable <span class="keyword">in</span></span><br><span class="line">pattern1 | pattern2) command1;;</span><br><span class="line">pattern3) command2;;</span><br><span class="line">*) default commands;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat test26.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # using the case command</span></span><br><span class="line"><span class="comment"># case $USER in </span></span><br><span class="line"><span class="comment"># rich | barbara)</span></span><br><span class="line"><span class="comment">#     echo &quot;Welcome $USER&quot;</span></span><br><span class="line"><span class="comment">#     echo &quot;Please enjoy your visit&quot;;;</span></span><br><span class="line"><span class="comment"># i306454)</span></span><br><span class="line"><span class="comment">#     echo &quot;Special testing account&quot;;;</span></span><br><span class="line"><span class="comment"># jessica)</span></span><br><span class="line"><span class="comment">#     echo &quot;Do not forget to log off when you&#x27;re done&quot;;;</span></span><br><span class="line"><span class="comment"># *)</span></span><br><span class="line"><span class="comment">#     echo &quot;Sorry, you are not allowed here&quot;;;</span></span><br><span class="line"><span class="comment"># esac</span></span><br><span class="line">./test26.sh </span><br><span class="line"><span class="comment"># Special testing account</span></span><br></pre></td></tr></table></figure>

<h3 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h3><p><strong>Issue1:</strong> 写脚本的时候，发现一个很奇怪的问题</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 未赋值的变脸 -n 会返回 true ?!</span></span><br><span class="line">[ -n <span class="variable">$ret23</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line"><span class="comment"># 经多方查证，需要加引号</span></span><br><span class="line">[ -n <span class="string">&quot;<span class="variable">$ret23</span>&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里就体现出增强型的好处了</span></span><br><span class="line">[[ -n <span class="variable">$ret23</span> ]] &amp;&amp; <span class="built_in">echo</span> <span class="literal">true</span> || <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<p>以后可以的话都用增强型把，容错率更高</p>
<h2 id="More-Structured-Commands"><a href="#More-Structured-Commands" class="headerlink" title="More Structured Commands"></a>More Structured Commands</h2><p>这章介绍了其他一些流程控制的关键词</p>
<h3 id="The-for-Command"><a href="#The-for-Command" class="headerlink" title="The for Command"></a>The for Command</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> list</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>PS: for 和 do 也可以写一起(for var in list; do)，和 if-then 那样</p>
<blockquote>
<p>Reading values in a list</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat test1.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # basic for command</span></span><br><span class="line"><span class="comment"># for test in a b c d e</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo The character is $test</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test1.sh </span><br><span class="line"><span class="comment"># The character is a</span></span><br><span class="line"><span class="comment"># The character is b</span></span><br><span class="line"><span class="comment"># The character is c</span></span><br><span class="line"><span class="comment"># The character is d</span></span><br><span class="line"><span class="comment"># The character is e</span></span><br></pre></td></tr></table></figure>

<p>当 for 结束后变量还会存在</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cat test1b.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing the for variable after the looping</span></span><br><span class="line"><span class="comment"># for test in a b c d e</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo The character is $test</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># echo The last character is $test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test=Connecticut</span></span><br><span class="line"><span class="comment"># echo &quot;Wait, now we&#x27;re visiting $test&quot;</span></span><br><span class="line">./test1b.sh </span><br><span class="line"><span class="comment"># The character is a</span></span><br><span class="line"><span class="comment"># The character is b</span></span><br><span class="line"><span class="comment"># The character is c</span></span><br><span class="line"><span class="comment"># The character is d</span></span><br><span class="line"><span class="comment"># The character is e</span></span><br><span class="line"><span class="comment"># The last character is e</span></span><br><span class="line"><span class="comment"># Wait, now we&#x27;re visiting Connecticut</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Reading complex values in a list</p>
</blockquote>
<p>当 list 中包含一些标点时，结果可能就不是预期的那样了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cat badtest1.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # another example of how not to use the for command</span></span><br><span class="line"><span class="comment"># for test in I don&#x27;t know if this&#x27;ll work, append some thing more?</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo The character is $test</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./badtest1.sh </span><br><span class="line"><span class="comment"># The character is I</span></span><br><span class="line"><span class="comment"># The character is dont know if thisll</span></span><br><span class="line"><span class="comment"># The character is work,</span></span><br><span class="line"><span class="comment"># The character is append</span></span><br><span class="line"><span class="comment"># The character is some</span></span><br><span class="line"><span class="comment"># The character is thing</span></span><br><span class="line"><span class="comment"># The character is more?</span></span><br></pre></td></tr></table></figure>

<p>解决方案：</p>
<ol>
<li>给引号加转义符(for test in I don&#39;t know if this&#39;ll work, append some thing more?)</li>
<li>将 string 用双引号包裹(for test in I don”‘“t know if this”‘“ll work, append some thing more?)</li>
</ol>
<p><code>for</code> 默认使用空格做分割，如果想要连词，你需要将对一个的词用双引号包裹起来</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cat badtest2.sh</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # another example of how not to use the for command</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for test in Nevada New Hampshire New Mexico New York North Carolina</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo &quot;Now going to $test&quot;</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./badtest2.sh </span><br><span class="line"><span class="comment"># Now going to Nevada</span></span><br><span class="line"><span class="comment"># Now going to New</span></span><br><span class="line"><span class="comment"># Now going to Hampshire</span></span><br><span class="line"><span class="comment"># Now going to New</span></span><br><span class="line"><span class="comment"># Now going to Mexico</span></span><br><span class="line"><span class="comment"># Now going to New</span></span><br><span class="line"><span class="comment"># Now going to York</span></span><br><span class="line"><span class="comment"># Now going to North</span></span><br><span class="line"><span class="comment"># Now going to Carolina</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># update to: for test in Nevada &quot;New Hampshire&quot; &quot;New Mexico&quot; &quot;New York&quot;</span></span><br><span class="line">./badtest2.sh </span><br><span class="line"><span class="comment"># Now going to Nevada</span></span><br><span class="line"><span class="comment"># Now going to New Hampshire</span></span><br><span class="line"><span class="comment"># Now going to New Mexico</span></span><br><span class="line"><span class="comment"># Now going to New York</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Reading a list from a variable</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat test4.sh</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # using a variable to hold the list</span></span><br><span class="line"><span class="comment"># list=&quot;Alabama Alaska Arizona Arkansas Colorado&quot;</span></span><br><span class="line"><span class="comment"># list=$list&quot; Connecticut&quot;</span></span><br><span class="line"><span class="comment"># for state in $list</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo &quot;Have you ever visited $state?&quot;</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test4.sh </span><br><span class="line"><span class="comment"># Have you ever visited Alabama?</span></span><br><span class="line"><span class="comment"># Have you ever visited Alaska?</span></span><br><span class="line"><span class="comment"># Have you ever visited Arizona?</span></span><br><span class="line"><span class="comment"># Have you ever visited Arkansas?</span></span><br><span class="line"><span class="comment"># Have you ever visited Colorado?</span></span><br><span class="line"><span class="comment"># Have you ever visited Connecticut?</span></span><br></pre></td></tr></table></figure>

<p>PS: <code>list=$list&quot; Connecticut&quot;</code> 是 shell 中 append 字符串的常见操作</p>
<blockquote>
<p>Reading values from a command</p>
</blockquote>
<p>结合其他命令，计算出 list 的值</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> a b c &gt; states</span><br><span class="line">cat test5.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # reading values from a file</span></span><br><span class="line"><span class="comment"># file=states</span></span><br><span class="line"><span class="comment"># for state in $(cat $file)</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo &quot;Visit beautiful $state&quot;</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test5.sh </span><br><span class="line"><span class="comment"># Visit beautiful a</span></span><br><span class="line"><span class="comment"># Visit beautiful b</span></span><br><span class="line"><span class="comment"># Visit beautiful c</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Changing the field separator</p>
</blockquote>
<p>有一个特殊的环境变量叫做 IFS(internal field separator). 他可以作为分割 field 的依据。默认的分割符有</p>
<ul>
<li>A space</li>
<li>A tab</li>
<li>A newline</li>
</ul>
<p>如果你想要将换行作为分割符，你可以使用 <code>IFS=$&#39;\n&#39;</code></p>
<p><strong>Caution:</strong> 定制 IFS 之后一定要还原</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IFS_OLD=<span class="variable">$IFS</span></span><br><span class="line">IFS=$<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">&lt;use the new IFS value <span class="keyword">in</span> code&gt;</span><br><span class="line">IFS=<span class="variable">$IFS_OLD</span></span><br></pre></td></tr></table></figure>

<p>其他定制分割符 <code>IFS=:</code>, 或者多分割符 <code>IFS=$&#39;\n&#39;:;&quot;</code></p>
<blockquote>
<p>Reading a directory using wildcards</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat test6.sh</span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # iterate through all the files in a directory</span></span><br><span class="line"><span class="comment"># for file in /Users/i306454/tmp/*</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     if [ -d &quot;$file&quot; ]</span></span><br><span class="line"><span class="comment">#     then </span></span><br><span class="line"><span class="comment">#         echo &quot;$file is a directory&quot;</span></span><br><span class="line"><span class="comment">#     elif [ -f &quot;$file&quot; ]</span></span><br><span class="line"><span class="comment">#     then</span></span><br><span class="line"><span class="comment">#         echo &quot;$file is a file&quot;</span></span><br><span class="line"><span class="comment">#     fi</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test6.sh </span><br><span class="line"><span class="comment"># /Users/i306454/tmp/backup is a directory</span></span><br><span class="line"><span class="comment"># /Users/i306454/tmp/bash_test is a directory</span></span><br><span class="line"><span class="comment"># /Users/i306454/tmp/csv is a directory</span></span><br><span class="line"><span class="comment"># /Users/i306454/tmp/dfile is a directory</span></span><br><span class="line"><span class="comment"># /Users/i306454/tmp/ifenduser.sh is a file</span></span><br><span class="line"><span class="comment"># /Users/i306454/tmp/plantuml is a directory</span></span><br><span class="line"><span class="comment"># /Users/i306454/tmp/sh is a directory</span></span><br></pre></td></tr></table></figure>

<p>PS: 在这个例子中有一个很有意思的点，在 test 中，将变量 file 使用双引号包裹起来了。这是因为 Linux 中带空格的文件或文件夹是合法的，如果没有引号，解析就会出错</p>
<p><strong>Caution:</strong> It’s always a good idea to test each file or directory before trying to process it.</p>
<h3 id="The-C-Style-for-command"><a href="#The-C-Style-for-command" class="headerlink" title="The C-Style for command"></a>The C-Style for command</h3><p>C 语言中 for 循环如下</p>
<blockquote>
<p>The C language for command</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The next number is %d\n&quot;</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>bash 中也提供了类似的功能, 语法为 <code>for (( variable assignment; condition; iteration process ))</code> 例子：<code>for(( a=1; a&lt;10; a++ ))</code></p>
<p>限制：</p>
<ul>
<li>The assignment of the variable value can contain space</li>
<li>The variable in the condition isn’t preceded with a dollar sign</li>
<li>The equation for the iteration process doesn’t use the expr command format</li>
</ul>
<p>这种用法，对我倒是很亲切，但是和之前用过的那些变量赋值之类的语句确实有一些语法差异的。这个语句中各种缩进，空格都不作限制</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat test8.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing the C-style for loop</span></span><br><span class="line"><span class="comment"># for ((i=1; i&lt;= 3; i++))</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo &quot;The next number is $i&quot;</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test8.sh </span><br><span class="line"><span class="comment"># The next number is 1</span></span><br><span class="line"><span class="comment"># The next number is 2</span></span><br><span class="line"><span class="comment"># The next number is 3</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Using multiple variables</p>
</blockquote>
<p>for 中包含多个参数</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat test9.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing the C-style for loop</span></span><br><span class="line"><span class="comment"># for ((a=1, b=10; a&lt;= 3; a++, b--))</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo $a - $b</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test9.sh </span><br><span class="line"><span class="comment"># 1 - 10</span></span><br><span class="line"><span class="comment"># 2 - 9</span></span><br><span class="line"><span class="comment"># 3 - 8</span></span><br></pre></td></tr></table></figure>

<h3 id="The-while-Command"><a href="#The-while-Command" class="headerlink" title="The while Command"></a>The while Command</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">test</span> <span class="built_in">command</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    other commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat test10.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # while command test</span></span><br><span class="line"><span class="comment"># var1=3</span></span><br><span class="line"><span class="comment"># while [ $var1 -gt 0 ]</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo $var1</span></span><br><span class="line"><span class="comment">#     var1=$[ $var1 - 1 ]</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test10.sh </span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Using multiple test commands</p>
</blockquote>
<p>while 判断的时候可以接多个条件，但是只有最后一个条件的 exit code 起决定作用。就算第一个条件我直接改为 <code>cmd</code> 每次都抛错，循环照常进行</p>
<p>还有，每个条件要新起一行, 当然用分号隔开也是可以的</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat test11.sh </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # Testing a multicommand while loop</span></span><br><span class="line"><span class="comment"># var1=3</span></span><br><span class="line"><span class="comment"># while echo $var1</span></span><br><span class="line"><span class="comment">#     [ $var1 -gt 0 ]</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo &quot;This is inside the loop&quot;</span></span><br><span class="line"><span class="comment">#     var1=$[ $var1 - 1 ]</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test11.sh </span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># This is inside the loop</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># This is inside the loop</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># This is inside the loop</span></span><br><span class="line"><span class="comment"># 0</span></span><br></pre></td></tr></table></figure>

<h3 id="The-until-Command"><a href="#The-until-Command" class="headerlink" title="The until Command"></a>The until Command</h3><p>语意上和 while 相反，但是用法一致</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until <span class="built_in">test</span> commands</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    other commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat test12 </span><br><span class="line"><span class="comment"># #!/usr/local/bin/bash</span></span><br><span class="line"><span class="comment"># # using the until command</span></span><br><span class="line"><span class="comment"># var1=100</span></span><br><span class="line"><span class="comment"># until [ $var1 -eq 0 ]</span></span><br><span class="line"><span class="comment"># do</span></span><br><span class="line"><span class="comment">#     echo $var1</span></span><br><span class="line"><span class="comment">#     var1=$[ $var1 - 25 ]</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line">./test12 </span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="comment"># 75</span></span><br><span class="line"><span class="comment"># 50</span></span><br><span class="line"><span class="comment"># 25</span></span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jack Zheng
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://jack-zheng.github.io/hexo/2021/05/24/LSCASSB-partii-shell-scripting-basics/" title="Linux命令行与shell脚本编程大全 第二章 Shell 脚本基础知识">https://jack-zheng.github.io/hexo/2021/05/24/LSCASSB-partii-shell-scripting-basics/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/hexo/tags/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8Eshell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E5%A4%A7%E5%85%A8-3rd/" rel="tag"># Linux命令行与shell脚本编程大全 3rd</a>
              <a href="/hexo/tags/TODO/" rel="tag"># TODO</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/hexo/2021/05/20/Spring-bean-injection/" rel="next" title="Spring 如何注入 bean">
                  <i class="fa fa-chevron-left"></i> Spring 如何注入 bean
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-11-Basic-Script-building"><span class="nav-number">1.</span> <span class="nav-text">Chapter 11: Basic Script building</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Multiple-Commands"><span class="nav-number">1.1.</span> <span class="nav-text">Using Multiple Commands</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-a-Script-File"><span class="nav-number">1.2.</span> <span class="nav-text">Creating a Script File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Displaying-Messages"><span class="nav-number">1.3.</span> <span class="nav-text">Displaying Messages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Variables"><span class="nav-number">1.4.</span> <span class="nav-text">Using Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redirecting-Input-and-Output"><span class="nav-number">1.5.</span> <span class="nav-text">Redirecting Input and Output</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pipes"><span class="nav-number">1.6.</span> <span class="nav-text">Pipes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Performing-Math"><span class="nav-number">1.7.</span> <span class="nav-text">Performing Math</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exiting-the-Script"><span class="nav-number">1.8.</span> <span class="nav-text">Exiting the Script</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-12-Using-Structured-Commands"><span class="nav-number">2.</span> <span class="nav-text">Chapter 12: Using Structured Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Considering-Compound-Testing"><span class="nav-number">2.1.</span> <span class="nav-text">Considering Compound Testing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Working-with-Advanced-if-then-Features"><span class="nav-number">2.2.</span> <span class="nav-text">Working with Advanced if-then Features</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Considering-the-case-Command"><span class="nav-number">2.3.</span> <span class="nav-text">Considering the case Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Issues"><span class="nav-number">2.4.</span> <span class="nav-text">Issues</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#More-Structured-Commands"><span class="nav-number">3.</span> <span class="nav-text">More Structured Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-for-Command"><span class="nav-number">3.1.</span> <span class="nav-text">The for Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-C-Style-for-command"><span class="nav-number">3.2.</span> <span class="nav-text">The C-Style for command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-while-Command"><span class="nav-number">3.3.</span> <span class="nav-text">The while Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-until-Command"><span class="nav-number">3.4.</span> <span class="nav-text">The until Command</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jack Zheng"
      src="/hexo/images/jack.jpg">
  <p class="site-author-name" itemprop="name">Jack Zheng</p>
  <div class="site-description" itemprop="description">我是张江搬砖小码农, 知识搬运工</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/hexo/archives/">
        
          <span class="site-state-item-count">155</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/hexo/categories/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/hexo/tags/">
          
        <span class="site-state-item-count">181</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Zheng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">636k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">9:38</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v5.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/hexo/lib/anime.min.js"></script>
  <script src="/hexo/lib/velocity/velocity.min.js"></script>
  <script src="/hexo/lib/velocity/velocity.ui.min.js"></script>

<script src="/hexo/js/utils.js"></script>

<script src="/hexo/js/motion.js"></script>


<script src="/hexo/js/schemes/muse.js"></script>


<script src="/hexo/js/next-boot.js"></script>




  




  
<script src="/hexo/js/local-search.js"></script>














  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'd444c814810f7e73ee3a',
      clientSecret: '9b3c417a0c1076887b3cf583c7d7a27456b708ef',
      repo: 'hexo-comments',
      owner: 'jack-zheng',
      admin: ['jack-zheng'],
      id: '097f26e3b83b4f5f83d136b8496b4aa3',
        language: '',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
